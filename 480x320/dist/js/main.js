!function(g){function I(t){if(C[t])return C[t].exports;var n=C[t]={i:t,l:!1,exports:{}};return g[t].call(n.exports,n,n.exports,I),n.l=!0,n.exports}var C={};I.m=g,I.c=C,I.i=function(g){return g},I.d=function(g,C,t){I.o(g,C)||Object.defineProperty(g,C,{configurable:!1,enumerable:!0,get:t})},I.n=function(g){var C=g&&g.__esModule?function(){return g.default}:function(){return g};return I.d(C,"a",C),C},I.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},I.p="",I(I.s=4)}([function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* eslint-disable */\n\n\nvar _mobile = __webpack_require__(3);\n\nvar _mobile2 = _interopRequireDefault(_mobile);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Video = function () {\n    function Video(options) {\n        _classCallCheck(this, Video);\n\n        this.init(options);\n    }\n\n    _createClass(Video, [{\n        key: 'init',\n        value: function init(options) {\n            var _this = this;\n\n            /* currently the content is pass in as jquery object, and need to change to javascript object */\n            this.content = document.querySelector(options.selector);\n            this.data = options.data;\n            this.id = options.id;\n\n            this.preview = options.preview;\n            this.app = options.app;\n            this.callbackEvents = options.events;\n\n            this.pauseVideo = function () {\n                _this.video.pause();\n            };\n            this.playVideo = function () {\n                _this.video.play();\n            };\n            this.getCurrentTime = function () {\n                return _this.video.currentTime;\n            };\n            this.getDuration = function () {\n                return _this.video.duration;\n            };\n\n            this.quality = 'low';\n\n            if (typeof options.quality != 'undefined') {\n                this.quality = options.quality;\n            }\n\n            /* variable which need to be manipulated for freeflow */\n            this.videoContainer = document.getElementById('video-container-' + this.id);\n            this.video = this.videoContainer.querySelector('#video');\n            this.videoState = 0; //0 - unplayed, 1 - playing, 2 - pause. 3 - ended\n            this.endingImage = document.getElementById('ending-image-' + this.id);\n            this.autoplay = parseInt(this.data.autoplay); // 0 - none, 1 - autoplay, 2 - inview\n            this.clickthrough = document.getElementById('clickthrough-container-' + this.id);\n            this.replayBtn = document.getElementById('control-replay-' + this.id);\n            this.clickable = document.getElementById('hosted-video-clickable-area-' + this.id) || document.createElement('div');\n            this.playTimeTracking = function () {};\n\n            this.control = {\n                audio: document.getElementById('default-control-audio-container-' + this.id),\n                play: document.getElementById('default-control-play-container-' + this.id),\n                replay: document.getElementById('default-control-replay-container-' + this.id)\n            };\n            this.overlay = this.videoContainer.querySelector('.overlay');\n\n            this.timerInterval;\n            this.tracked = [];\n            this.videos_chunks = [];\n            this.hoverEvent = false;\n\n            this.canvasVideo = false;\n            this.canvasVideoSwitched = false;\n\n            /* TEMPORARY animation delay */\n            if (this.autoplay != 0) {\n                if (this.app.isMobile() && this.autoplay == 1) {\n                    this.autoplay = 2; //animating play is same as inview play\n                } else if (this.autoplay == 2) {\n                    if (this.video != null) {\n                        this.video.removeAttribute('autoplay');\n                    }\n                }\n            }\n\n            /* html5 */\n            if (this.app.isMobile() && this.autoplay != 0) {\n\n                if (this.video != null) {\n                    /* hide the html video */\n                    this.video.style.display = 'none';\n                    /* render mobile video */\n                    this.mobile();\n                    // this.mobile({\n                    //     'callback' : () =>  {\n                    //         var desktopVideo = this.videoContainer.querySelector('video') || this.videoContainer.querySelector('canvas');\n                    //         desktopVideo.parentNode.appendChild(this.video);\n                    //         this.events();\n\n                    //         /* create mute unmute function for desktop video */\n                    //         this.video.mute = () =>  {video.muted = true;};\n                    //         this.video.unmute = () =>  {video.muted = false;};\n                    //     }\n                    // });\n                } else {\n                    this.video = this.videoContainer.querySelector('canvas');\n                }\n\n                this.canvasVideo = true;\n            } else {\n                this.loadVideo();\n            }\n\n            /* create mute unmute function for desktop video */\n            this.video.mute = function () {\n                video.muted = true;\n            };\n            this.video.unmute = function () {\n                video.muted = false;\n            };\n\n            if (this.app.isMobile() && this.autoplay != 0) {\n                //this.video.style.display = 'none';\n            } else {\n                this.events();\n            }\n\n            if (this.autoplay == 1) {\n                this.video.play();\n            }\n        }\n    }, {\n        key: 'loadVideo',\n        value: function loadVideo() {\n            var mp4 = document.createElement('source');\n            mp4.src = this.data.src.mp4.replace('.mp4', '_' + this.quality + '.mp4');\n            var webm = document.createElement('source');\n            webm.src = this.data.src.mp4.replace('.webm', '_' + this.quality + '.webm');\n            var ogg = document.createElement('source');\n            ogg.src = this.data.src.mp4.replace('.ogg', '_' + this.quality + '.ogg');\n\n            mp4.onerror = this.retarget.bind(this);\n\n            this.video.appendChild(mp4);\n            this.video.appendChild(webm);\n            this.video.appendChild(ogg);\n        }\n    }, {\n        key: 'retarget',\n        value: function retarget(e) {\n            /* insert the video source for desktop video */\n            this.video.innerHTML = '<source src=\"' + this.data.src.mp4 + '\" type=\"video/mp4\" onerror=\"console.log(this);this.retarget(this)\"/>\\\r\n            <source src=\"' + this.data.src.webm + '\" type=\"video/webm\" onerror=\"this.retarget(this)\"/>\\\r\n            <source src=\"' + this.data.src.ogg + '\" type=\"video/ogg\" onerror=\"this.retarget(this)\"/>';\n        }\n\n        /* Method to be used from controller */\n\n    }, {\n        key: 'playVideo',\n        value: function playVideo() {\n            this.video.play();\n        }\n    }, {\n        key: 'events',\n        value: function events() {\n            var _this2 = this;\n\n            /* set some important styling - NJ */\n            if (this.endingImage != null) {\n                this.endingImage.style.display = 'none';\n            }\n\n            /* clickthrough */\n            this.eventsClickthrough();\n            /* control */\n            this.eventsControl();\n\n            /**/\n            if (this.autoplay == 2) {\n                if (!this.preview) {\n                    /* register inview and outview here */\n                } else {\n                    this.video.play();\n                }\n            }\n\n            this.video.addEventListener('play', function () {\n\n                if (typeof _this2.videos_chunks != 'undefined') {\n                    while (_this2.videos_chunks.length != 0 && !_this2.canvasVideoSwitched) {\n\n                        _this2.loadJSON(_this2.videos_chunks.shift(), function (response) {\n                            var actual_JSON = JSON.parse(response);\n                            _this2.images_list[actual_JSON['index']] = actual_JSON['c'];\n                            if (typeof _this2.video.updateImagesUrl != 'undefined') {\n                                _this2.video.updateImagesUrl(_this2.images_list);\n                            }\n                        });\n                    }\n                }\n\n                /* update video state */\n                _this2.videoState = 1;\n                /* tracker */\n                _this2.tracker({\n                    type: 'video_play',\n                    tt: ''\n                });\n\n                _this2.playTimeTracking = setInterval(function () {\n                    _this2.trackPlayTime();\n                }, 500);\n            });\n            this.video.addEventListener('pause', function () {\n\n                /* video end will trigger pause event, so will need to check the time */\n                if (_this2.video.currentTime < _this2.video.duration) {\n                    /* update video state */\n                    _this2.videoState = 2;\n\n                    /* tracker */\n                    _this2.tracker({\n                        type: 'video_pause'\n                    });\n                }\n            });\n\n            this.video.addEventListener('ended', function () {\n                /* update video state */\n                _this2.videoState = 3;\n                /* tracker */\n                _this2.tracker({\n                    type: 'video_play_100',\n                    tt: ''\n                });\n                /* ending image */\n                _this2.eventsEndingImage();\n                /* stop play time tracking */\n                clearInterval(_this2.playTimeTracking);\n\n                /* video loop - NJ */\n                if (typeof _this2.data.loop != 'undefined' && _this2.data.loop) {\n                    _this2.play();\n                    /* hide replay */\n                    _this2.control.replay.querySelector('.dc-replay').style.display = 'none';\n                    _this2.control.play.querySelector('.dc-play').style.display = 'none';\n                    _this2.control.play.querySelector('.dc-pause').style.display = 'block';\n                }\n            });\n\n            /* listen to post message */\n            this.app.listen({\n                callback: function callback(resp) {\n                    if (typeof resp.auth == 'undefined') {\n                        return false;\n                    }\n                    /* inview */\n                    if (resp.auth.type == 'inview' && _this2.autoplay == 2) {\n                        if (!_this2.video.ended) {\n                            _this2.video.play();\n                        }\n                    }\n\n                    /* outview */\n                    if (resp.auth.type == 'outview' && _this2.autoplay == 2) {\n                        _this2.video.pause();\n                    }\n\n                    /* close exp */\n                    if (resp.auth.type == 'closeExpandable') {\n                        _this2.video.pause();\n                    }\n\n                    if (resp.auth.type == 'openADC') {\n                        _this2.video.play();\n                        if (_this2.hoverEvent == false) {\n                            _this2.video.onmouseover = function () {\n                                this.mute(false);\n                            };\n                            _this2.hoverEvent = true;\n                        }\n                    }\n                }\n            });\n        }\n    }, {\n        key: 'eventsEndingImage',\n        value: function eventsEndingImage() {\n            var _this3 = this;\n\n            if (this.endingImage != null) {\n                this.endingImage.style.display = 'block';\n                this.clickable.style.height = '100%';\n                this.clickable.style.zIndex = '11';\n\n                this.endingImage.addEventListener('click', function () {\n                    if (_this3.data.endingImage.lpUrl) {\n                        // only open if landing url is not blank -yk\n                        _this3.tracker({\n                            type: 'end_image_click',\n                            tt: 'CTR'\n                        });\n                        _this3.linkOpener({\n                            url: _this3.data.endingImage.lpUrl\n                        });\n                    }\n                });\n\n                this.video.addEventListener('play', function () {\n                    _this3.endingImage.style.display = 'none';\n                });\n            }\n        }\n    }, {\n        key: 'eventsClickthrough',\n        value: function eventsClickthrough() {\n            var _this4 = this;\n\n            /* clickthrough */\n            if (this.data.endingImage.lpUrl) {\n                if (this.clickable != null) {\n                    this.clickable.setAttribute('href', '#');\n                    this.clickable.addEventListener('click', function () {\n                        _this4.tracker({\n                            type: 'end_image_click',\n                            tt: 'CTR'\n                        });\n                        _this4.linkOpener({\n                            url: _this4.data.endingImage.lpUrl\n                        });\n                    });\n                }\n            }\n\n            if (this.clickthrough != null) {\n                this.clickthrough.addEventListener('click', function () {\n                    _this4.linkOpener({\n                        url: _this4.data.clickthrough.lpUrl\n                    });\n                });\n            }\n        }\n    }, {\n        key: 'eventsReplayBtn',\n        value: function eventsReplayBtn() {\n            var _this5 = this;\n\n            if (this.replayBtn != '') {\n\n                /* ended, show replay */\n                this.video.addEventListener('ended', function () {\n                    _this5.replayBtn.querySelector('img').style.display = 'block';\n                });\n\n                this.replayBtn.querySelector('img').addEventListener('click', function (e) {\n                    _this5.video.unmute();\n                    _this5.video.play();\n                    e.target.style.display = 'none';\n                });\n            }\n        }\n    }, {\n        key: 'eventsControl',\n        value: function eventsControl() {\n            var _this6 = this;\n\n            if (this.control['play'] != 'undefined') {\n                /* show play by default if it is non autoplay or inview autoplay */\n                if (this.data.autoplay == 0) {\n                    this.control.play.querySelector('.dc-play').style.display = 'block';\n                    this.control.play.querySelector('.dc-pause').style.display = 'none';\n\n                    this.control.replay.querySelector('.dc-replay').style.display = 'none';\n\n                    /* if non autoplay unmute by default - NJ */\n                    this.control.audio.style.display = 'block';\n                    this.control.audio.querySelector('.dc-mute').style.display = 'block';\n                    this.control.audio.querySelector('.dc-unmute').style.display = 'none';\n\n                    /* unmute video by default - used in play event */\n                    this.unmuteDefault = true;\n                }\n                /* show pause by default if it is autoplay */\n                else {\n                        this.control.play.querySelector('.dc-pause').style.display = 'block';\n                        this.control.play.querySelector('.dc-play').style.display = 'none';\n\n                        this.control.audio.querySelector('.dc-mute').style.display = 'none';\n                        this.control.audio.querySelector('.dc-unmute').style.display = 'block';\n\n                        /* mute video by default - used in play event  */\n                        this.unmuteDefault = false;\n                    }\n\n                /* played, show mute/unmute */\n                this.video.addEventListener('play', function () {\n\n                    /* To mute or unmute video by default - on the first play only - NJ */\n                    if (_this6.data.autoplay == 0 && _this6.unmuteDefault && _this6.unmuteDefault != null) {\n                        _this6.mute(false);\n                        _this6.unmuteDefault = null;\n                    } else if (!_this6.unmuteDefault && _this6.unmuteDefault != null) {\n                        //this.video.mute();\n                        _this6.unmuteDefault = null;\n                    }\n\n                    /* play show/hide */\n                    _this6.control.play.querySelector('.dc-play').style.display = 'none';\n                    _this6.control.audio.style.display = 'block';\n                    _this6.control.play.querySelector('.dc-pause').style.display = 'block';\n\n                    /* make sure replay is hidden */\n                    _this6.control.replay.querySelector('.dc-replay').style.display = 'none';\n\n                    /* timer */\n                    var time_span = _this6.control.replay.querySelector('span');\n                    var time = Math.round(_this6.video.duration) - Math.round(_this6.video.currentTime || 0);\n                    time = isNaN(time) ? '' : time;\n                    if (time_span != null) {\n                        time_span.innerHTML = time;\n                        time_span.style.display = 'block';\n                    }\n\n                    clearInterval(_this6.timerInterval);\n                    _this6.timerInterval = setInterval(function () {\n                        var time = Math.round(_this6.video.duration) - Math.round(_this6.video.currentTime);\n                        time = isNaN(time) ? '' : time;\n                        if (time_span != null) {\n                            time_span.innerHTML = time;\n                        }\n\n                        /* video sync */\n                        var v_duration = Math.round(_this6.video.duration);\n                        var v_currentTime = Math.round(_this6.video.currentTime);\n                        var perc_25 = Math.round(v_duration * 0.25);\n                        var perc_50 = Math.round(v_duration * 0.5);\n                        var perc_75 = Math.round(v_duration * 0.75);\n\n                        if (_this6.video.currentTime >= _this6.video.duration || _this6.videoState != 1 && _this6.video.currentTime == 0) {\n                            time_span.style.display = 'none';\n                            clearInterval(_this6.timerInterval);\n                        }\n\n                        if (_this6.videoState != 1) {\n                            clearInterval(_this6.timerInterval);\n                        }\n\n                        if (typeof _this6.callbackEvents.onPlaying != 'undefined') {\n                            _this6.callbackEvents.onPlaying(Math.round(_this6.video.currentTime));\n                        }\n                    }, 1000);\n                });\n                /* for canvas switching - NJ */\n                this.video.addEventListener('playing', function () {\n                    if (_this6.canvasVideoSwitched) {\n                        _this6.overlay.style.display = 'none';\n                    }\n                });\n                /* pause, show replay */\n                this.video.addEventListener('pause', function () {\n                    _this6.control.play.querySelector('.dc-play').style.display = 'block';\n                    _this6.control.play.querySelector('.dc-pause').style.display = 'none';\n                });\n\n                /* ended, show replay */\n                this.video.addEventListener('ended', function () {\n                    _this6.control.play.querySelector('.dc-play').style.display = 'none';\n                    _this6.control.play.querySelector('.dc-pause').style.display = 'none';\n                    _this6.control.audio.style.display = 'none';\n                    //this.control.replay.querySelector('.dc-replay').style.display = 'block';\n\n                    setTimeout(function () {\n                        _this6.control.replay.querySelector('.dc-replay').style.display = 'block';\n                    }, 1000);\n\n                    if (typeof _this6.callbackEvents.onPlaying != 'undefined') {\n                        _this6.callbackEvents.onEnded();\n                    }\n                });\n\n                /* control events */\n                this.control.play.querySelector('.dc-play').addEventListener('click', function (e) {\n                    _this6.video.play();\n                });\n                this.control.play.querySelector('.dc-pause').addEventListener('click', function (e) {\n                    _this6.video.pause();\n                });\n                this.control.audio.querySelector('.dc-mute').addEventListener('click', function (e) {\n                    _this6.mute(true);\n                });\n                this.control.audio.querySelector('.dc-unmute').addEventListener('click', function (e) {\n\n                    /* tracker */\n                    _this6.tracker({\n                        type: 'video_unmute'\n                    });\n\n                    /* canvas switching */\n                    if (_this6.canvasVideo && !_this6.canvasVideoSwitched) {\n                        _this6.canvasVideoSwitched = true;\n                        _this6.canvas = _this6.video;\n\n                        setTimeout(function () {\n                            _this6.canvas.pause();\n                            _this6.canvas.style.display = 'none';\n\n                            _this6.canvas.parentNode.removeChild(_this6.canvas);\n                        }, 1000);\n\n                        //this.overlay.style.display = 'block';\n\n                        var currentTime = _this6.video.currentTime;\n\n                        _this6.video = _this6.videoContainer.querySelector('#video');\n                        _this6.video.currentTime = currentTime;\n                        _this6.video.style.display = 'block';\n                        _this6.mute(false);\n\n                        _this6.loadVideo();\n                        _this6.events();\n                        // this.video.play();\n                        setTimeout(function () {\n                            _this6.video.play();\n                        }, 1000);\n                    }\n\n                    _this6.mute(false);\n                });\n                this.control.replay.querySelector('.dc-replay').addEventListener('click', function (e) {\n                    /* tracker */\n                    _this6.tracker({\n                        type: 'video_replay'\n                    });\n                    _this6.mute(false);\n                    _this6.video.play();\n                    /* hide replay */\n                    e.target.style.display = 'none';\n\n                    _this6.clickable.removeAttribute('style');\n                    _this6.clickable.style.display = 'block';\n                    _this6.clickable.style.height = '';\n                    _this6.clickable.style.zIndex = '10';\n                });\n\n                if (this.data.mouseoutMute) {\n                    this.video.onmouseout = function () {\n                        console.log('out');\n                        this.mute(true);\n                    };\n                }\n            }\n        }\n    }, {\n        key: 'mute',\n        value: function mute(_mute) {\n            if (_mute) {\n                this.video.mute();\n                this.control.audio.querySelector('.dc-unmute').style.display = 'block';\n                this.control.audio.querySelector('.dc-mute').style.display = 'none';\n            } else {\n                this.video.unmute();\n                this.control.audio.querySelector('.dc-unmute').style.display = 'none';\n                this.control.audio.querySelector('.dc-mute').style.display = 'block';\n            }\n        }\n    }, {\n        key: 'linkOpener',\n        value: function linkOpener(options) {\n            // console.log(options.url);\n            this.app.open(options.url);\n        }\n    }, {\n        key: 'tracker',\n        value: function tracker(options) {\n\n            if (!this.preview) {\n                //console.log(options.type);\n                this.app.tracker(typeof options.tt != 'undefined' ? options.tt : 'E', options.type, this.layer, this.layer, options.value || '');\n\n                if (typeof this.data.extTrackers != 'undefined' && this.data.extTrackers.enabled && (this.data.extTrackers.type == 0 || this.data.extTrackers.type == 1)) {\n                    this.extTracker({\n                        type: options.type\n                    });\n                }\n            }\n        }\n    }, {\n        key: 'extTracker',\n        value: function extTracker(options) {\n            /*\r\n            * external tracker with dsp macro support ( tmc )\r\n            */\n            if (!this.preview && typeof this.data.extTrackers[options.type] != 'undefined' && this.data.extTrackers[options.type] != '') {\n\n                var url = this.data.extTrackers[options.type];\n                /* make sure we have received the macro */\n\n                url = this.app.macro({\n                    url: this.data.extTrackers[options.type],\n                    dspMacro: this.app.dspMacro\n                });\n\n                /* js */\n                if (this.data.extTrackers.type == 0) {\n                    var s = document.createElement('script');\n                    s.style.display = 'none';\n                    s.src = url;\n\n                    document.body.appendChild(s);\n                }\n                /* img */\n                else if (this.data.extTrackers.type == 1) {\n                        var i = document.createElement('img');\n                        i.style.width = '1px';\n                        i.style.height = '1px';\n                        i.style.display = 'none';\n                        i.src = url;\n\n                        document.body.appendChild(i);\n                    }\n\n                /* temporary trackers which fire when video_100 is fired for ext tracker */\n                if (options.type == 'video_play_100') {\n                    this.tracker({\n                        type: 'viewthrough',\n                        value: encodeURIComponent(url)\n                    });\n                }\n\n                delete this.data.extTrackers[options.type];\n            }\n        }\n    }, {\n        key: 'trackPlayTime',\n        value: function trackPlayTime() {\n            var duration = this.video.duration;\n            var currentTime = this.video.currentTime;\n\n            if (currentTime >= duration && this.tracked.indexOf('video_play_100') < 0) {\n\n                this.tracked.push('video_play_100');\n                /* tracker */\n                this.tracker({\n                    type: 'video_play_100',\n                    tt: ''\n                });\n                /* stop play time tracking */\n                clearInterval(this.playTimeTracking);\n            } else if (currentTime >= duration * 0.75 && this.tracked.indexOf('video_play_75') < 0) {\n                this.tracked.push('video_play_75');\n                /* tracker */\n                this.tracker({\n                    type: 'video_play_75',\n                    tt: ''\n                });\n            } else if (currentTime >= duration * 0.5 && this.tracked.indexOf('video_play_50') < 0) {\n                this.tracked.push('video_play_50');\n                /* tracker */\n                this.tracker({\n                    type: 'video_play_50',\n                    tt: ''\n                });\n            } else if (currentTime >= duration * 0.25 && this.tracked.indexOf('video_play_25') < 0) {\n                this.tracked.push('video_play_25');\n                /* tracker */\n                this.tracker({\n                    type: 'video_play_25',\n                    tt: ''\n                });\n            }\n        }\n    }, {\n        key: 'mobile',\n        value: function mobile() {\n            var _this7 = this;\n\n            this.images_list = [];\n            for (var i = 1; i <= Math.ceil(this.data.frames / 20); i++) {\n\n                if (i <= 3) {\n\n                    this.loadJSON(this.data.src.img_url.replace('image_', '') + 'chunks' + i + '.json', function (response) {\n                        // Parse JSON string into object\n                        var actual_JSON = JSON.parse(response);\n                        _this7.images_list[actual_JSON['index']] = actual_JSON['c'];\n\n                        // Check if its first chunk \n                        if (actual_JSON['index'] == 0) {\n                            // init video only if first chunk is loaded\n                            _this7.video = new _mobile2.default({\n                                id: _this7.id,\n                                fps: _this7.data.fps,\n                                numberOfFrames: _this7.data.frames,\n                                loop: _this7.data.loop,\n                                dimensions: [{\n                                    width: _this7.data.w,\n                                    height: _this7.data.h,\n                                    imagesUrl: _this7.images_list\n                                }],\n                                defaultDimension: 0,\n                                autoplay: _this7.autoplay == 1 ? true : false\n                            });\n\n                            var desktopVideo = _this7.videoContainer.querySelector('video') || _this7.videoContainer.querySelector('canvas');\n                            desktopVideo.parentNode.appendChild(_this7.video);\n                            _this7.events();\n\n                            /* create mute unmute function for desktop video */\n                            _this7.video.mute = function () {\n                                video.muted = true;\n                            };\n                            _this7.video.unmute = function () {\n                                video.muted = false;\n                            };\n\n                            _this7.video.play();\n                        }\n                    });\n                } else {\n                    this.videos_chunks.push(this.data.src.img_url.replace('image_', '') + 'chunks' + i + '.json');\n                }\n            }\n        }\n    }, {\n        key: 'loadJSON',\n        value: function loadJSON(url, callback) {\n\n            var xobj = new XMLHttpRequest();\n            xobj.overrideMimeType(\"application/json\");\n            xobj.open('GET', url, true); // Replace 'my_data' with the path to your file\n            xobj.onreadystatechange = function () {\n                if (xobj.readyState == 4 && xobj.status == \"200\") {\n                    // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode\n                    callback(xobj.responseText);\n                }\n            };\n            xobj.send(null);\n        }\n    }]);\n\n    return Video;\n}();\n\nexports.default = Video;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy92aWRlby5qcz8xYWEzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOyAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuXG5cbnZhciBfbW9iaWxlID0gcmVxdWlyZSgnLi9tb2JpbGUnKTtcblxudmFyIF9tb2JpbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbW9iaWxlKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFZpZGVvID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFZpZGVvKG9wdGlvbnMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZpZGVvKTtcblxuICAgICAgICB0aGlzLmluaXQob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFZpZGVvLCBbe1xuICAgICAgICBrZXk6ICdpbml0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAgICAgLyogY3VycmVudGx5IHRoZSBjb250ZW50IGlzIHBhc3MgaW4gYXMganF1ZXJ5IG9iamVjdCwgYW5kIG5lZWQgdG8gY2hhbmdlIHRvIGphdmFzY3JpcHQgb2JqZWN0ICovXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMuc2VsZWN0b3IpO1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gb3B0aW9ucy5kYXRhO1xuICAgICAgICAgICAgdGhpcy5pZCA9IG9wdGlvbnMuaWQ7XG5cbiAgICAgICAgICAgIHRoaXMucHJldmlldyA9IG9wdGlvbnMucHJldmlldztcbiAgICAgICAgICAgIHRoaXMuYXBwID0gb3B0aW9ucy5hcHA7XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrRXZlbnRzID0gb3B0aW9ucy5ldmVudHM7XG5cbiAgICAgICAgICAgIHRoaXMucGF1c2VWaWRlbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy52aWRlby5wYXVzZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGxheVZpZGVvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnZpZGVvLnBsYXkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmdldEN1cnJlbnRUaW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy52aWRlby5jdXJyZW50VGltZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmdldER1cmF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy52aWRlby5kdXJhdGlvbjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMucXVhbGl0eSA9ICdsb3cnO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMucXVhbGl0eSAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMucXVhbGl0eSA9IG9wdGlvbnMucXVhbGl0eTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogdmFyaWFibGUgd2hpY2ggbmVlZCB0byBiZSBtYW5pcHVsYXRlZCBmb3IgZnJlZWZsb3cgKi9cbiAgICAgICAgICAgIHRoaXMudmlkZW9Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlkZW8tY29udGFpbmVyLScgKyB0aGlzLmlkKTtcbiAgICAgICAgICAgIHRoaXMudmlkZW8gPSB0aGlzLnZpZGVvQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyN2aWRlbycpO1xuICAgICAgICAgICAgdGhpcy52aWRlb1N0YXRlID0gMDsgLy8wIC0gdW5wbGF5ZWQsIDEgLSBwbGF5aW5nLCAyIC0gcGF1c2UuIDMgLSBlbmRlZFxuICAgICAgICAgICAgdGhpcy5lbmRpbmdJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmRpbmctaW1hZ2UtJyArIHRoaXMuaWQpO1xuICAgICAgICAgICAgdGhpcy5hdXRvcGxheSA9IHBhcnNlSW50KHRoaXMuZGF0YS5hdXRvcGxheSk7IC8vIDAgLSBub25lLCAxIC0gYXV0b3BsYXksIDIgLSBpbnZpZXdcbiAgICAgICAgICAgIHRoaXMuY2xpY2t0aHJvdWdoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsaWNrdGhyb3VnaC1jb250YWluZXItJyArIHRoaXMuaWQpO1xuICAgICAgICAgICAgdGhpcy5yZXBsYXlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udHJvbC1yZXBsYXktJyArIHRoaXMuaWQpO1xuICAgICAgICAgICAgdGhpcy5jbGlja2FibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9zdGVkLXZpZGVvLWNsaWNrYWJsZS1hcmVhLScgKyB0aGlzLmlkKSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRoaXMucGxheVRpbWVUcmFja2luZyA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRyb2wgPSB7XG4gICAgICAgICAgICAgICAgYXVkaW86IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWZhdWx0LWNvbnRyb2wtYXVkaW8tY29udGFpbmVyLScgKyB0aGlzLmlkKSxcbiAgICAgICAgICAgICAgICBwbGF5OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVmYXVsdC1jb250cm9sLXBsYXktY29udGFpbmVyLScgKyB0aGlzLmlkKSxcbiAgICAgICAgICAgICAgICByZXBsYXk6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWZhdWx0LWNvbnRyb2wtcmVwbGF5LWNvbnRhaW5lci0nICsgdGhpcy5pZClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXkgPSB0aGlzLnZpZGVvQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XG5cbiAgICAgICAgICAgIHRoaXMudGltZXJJbnRlcnZhbDtcbiAgICAgICAgICAgIHRoaXMudHJhY2tlZCA9IFtdO1xuICAgICAgICAgICAgdGhpcy52aWRlb3NfY2h1bmtzID0gW107XG4gICAgICAgICAgICB0aGlzLmhvdmVyRXZlbnQgPSBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5jYW52YXNWaWRlbyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jYW52YXNWaWRlb1N3aXRjaGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8qIFRFTVBPUkFSWSBhbmltYXRpb24gZGVsYXkgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLmF1dG9wbGF5ICE9IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hcHAuaXNNb2JpbGUoKSAmJiB0aGlzLmF1dG9wbGF5ID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXRvcGxheSA9IDI7IC8vYW5pbWF0aW5nIHBsYXkgaXMgc2FtZSBhcyBpbnZpZXcgcGxheVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5hdXRvcGxheSA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW8ucmVtb3ZlQXR0cmlidXRlKCdhdXRvcGxheScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBodG1sNSAqL1xuICAgICAgICAgICAgaWYgKHRoaXMuYXBwLmlzTW9iaWxlKCkgJiYgdGhpcy5hdXRvcGxheSAhPSAwKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWRlbyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIGhpZGUgdGhlIGh0bWwgdmlkZW8gKi9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAvKiByZW5kZXIgbW9iaWxlIHZpZGVvICovXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9iaWxlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMubW9iaWxlKHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICdjYWxsYmFjaycgOiAoKSA9PiAge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHZhciBkZXNrdG9wVmlkZW8gPSB0aGlzLnZpZGVvQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3ZpZGVvJykgfHwgdGhpcy52aWRlb0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBkZXNrdG9wVmlkZW8ucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzLnZpZGVvKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLmV2ZW50cygpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgLyogY3JlYXRlIG11dGUgdW5tdXRlIGZ1bmN0aW9uIGZvciBkZXNrdG9wIHZpZGVvICovXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy52aWRlby5tdXRlID0gKCkgPT4gIHt2aWRlby5tdXRlZCA9IHRydWU7fTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnZpZGVvLnVubXV0ZSA9ICgpID0+ICB7dmlkZW8ubXV0ZWQgPSBmYWxzZTt9O1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvID0gdGhpcy52aWRlb0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc1ZpZGVvID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkVmlkZW8oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogY3JlYXRlIG11dGUgdW5tdXRlIGZ1bmN0aW9uIGZvciBkZXNrdG9wIHZpZGVvICovXG4gICAgICAgICAgICB0aGlzLnZpZGVvLm11dGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmlkZW8ubXV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudmlkZW8udW5tdXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZpZGVvLm11dGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAodGhpcy5hcHAuaXNNb2JpbGUoKSAmJiB0aGlzLmF1dG9wbGF5ICE9IDApIHtcbiAgICAgICAgICAgICAgICAvL3RoaXMudmlkZW8uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuYXV0b3BsYXkgPT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW8ucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdsb2FkVmlkZW8nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZFZpZGVvKCkge1xuICAgICAgICAgICAgdmFyIG1wNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NvdXJjZScpO1xuICAgICAgICAgICAgbXA0LnNyYyA9IHRoaXMuZGF0YS5zcmMubXA0LnJlcGxhY2UoJy5tcDQnLCAnXycgKyB0aGlzLnF1YWxpdHkgKyAnLm1wNCcpO1xuICAgICAgICAgICAgdmFyIHdlYm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTtcbiAgICAgICAgICAgIHdlYm0uc3JjID0gdGhpcy5kYXRhLnNyYy5tcDQucmVwbGFjZSgnLndlYm0nLCAnXycgKyB0aGlzLnF1YWxpdHkgKyAnLndlYm0nKTtcbiAgICAgICAgICAgIHZhciBvZ2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTtcbiAgICAgICAgICAgIG9nZy5zcmMgPSB0aGlzLmRhdGEuc3JjLm1wNC5yZXBsYWNlKCcub2dnJywgJ18nICsgdGhpcy5xdWFsaXR5ICsgJy5vZ2cnKTtcblxuICAgICAgICAgICAgbXA0Lm9uZXJyb3IgPSB0aGlzLnJldGFyZ2V0LmJpbmQodGhpcyk7XG5cbiAgICAgICAgICAgIHRoaXMudmlkZW8uYXBwZW5kQ2hpbGQobXA0KTtcbiAgICAgICAgICAgIHRoaXMudmlkZW8uYXBwZW5kQ2hpbGQod2VibSk7XG4gICAgICAgICAgICB0aGlzLnZpZGVvLmFwcGVuZENoaWxkKG9nZyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JldGFyZ2V0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJldGFyZ2V0KGUpIHtcbiAgICAgICAgICAgIC8qIGluc2VydCB0aGUgdmlkZW8gc291cmNlIGZvciBkZXNrdG9wIHZpZGVvICovXG4gICAgICAgICAgICB0aGlzLnZpZGVvLmlubmVySFRNTCA9ICc8c291cmNlIHNyYz1cIicgKyB0aGlzLmRhdGEuc3JjLm1wNCArICdcIiB0eXBlPVwidmlkZW8vbXA0XCIgb25lcnJvcj1cImNvbnNvbGUubG9nKHRoaXMpO3RoaXMucmV0YXJnZXQodGhpcylcIi8+XFxcclxuICAgICAgICAgICAgPHNvdXJjZSBzcmM9XCInICsgdGhpcy5kYXRhLnNyYy53ZWJtICsgJ1wiIHR5cGU9XCJ2aWRlby93ZWJtXCIgb25lcnJvcj1cInRoaXMucmV0YXJnZXQodGhpcylcIi8+XFxcclxuICAgICAgICAgICAgPHNvdXJjZSBzcmM9XCInICsgdGhpcy5kYXRhLnNyYy5vZ2cgKyAnXCIgdHlwZT1cInZpZGVvL29nZ1wiIG9uZXJyb3I9XCJ0aGlzLnJldGFyZ2V0KHRoaXMpXCIvPic7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBNZXRob2QgdG8gYmUgdXNlZCBmcm9tIGNvbnRyb2xsZXIgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncGxheVZpZGVvJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBsYXlWaWRlbygpIHtcbiAgICAgICAgICAgIHRoaXMudmlkZW8ucGxheSgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdldmVudHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZXZlbnRzKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8qIHNldCBzb21lIGltcG9ydGFudCBzdHlsaW5nIC0gTkogKi9cbiAgICAgICAgICAgIGlmICh0aGlzLmVuZGluZ0ltYWdlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZGluZ0ltYWdlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIGNsaWNrdGhyb3VnaCAqL1xuICAgICAgICAgICAgdGhpcy5ldmVudHNDbGlja3Rocm91Z2goKTtcbiAgICAgICAgICAgIC8qIGNvbnRyb2wgKi9cbiAgICAgICAgICAgIHRoaXMuZXZlbnRzQ29udHJvbCgpO1xuXG4gICAgICAgICAgICAvKiovXG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvcGxheSA9PSAyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByZXZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogcmVnaXN0ZXIgaW52aWV3IGFuZCBvdXR2aWV3IGhlcmUgKi9cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvLnBsYXkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheScsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMyLnZpZGVvc19jaHVua3MgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKF90aGlzMi52aWRlb3NfY2h1bmtzLmxlbmd0aCAhPSAwICYmICFfdGhpczIuY2FudmFzVmlkZW9Td2l0Y2hlZCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIubG9hZEpTT04oX3RoaXMyLnZpZGVvc19jaHVua3Muc2hpZnQoKSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdHVhbF9KU09OID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmltYWdlc19saXN0W2FjdHVhbF9KU09OWydpbmRleCddXSA9IGFjdHVhbF9KU09OWydjJ107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczIudmlkZW8udXBkYXRlSW1hZ2VzVXJsICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi52aWRlby51cGRhdGVJbWFnZXNVcmwoX3RoaXMyLmltYWdlc19saXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qIHVwZGF0ZSB2aWRlbyBzdGF0ZSAqL1xuICAgICAgICAgICAgICAgIF90aGlzMi52aWRlb1N0YXRlID0gMTtcbiAgICAgICAgICAgICAgICAvKiB0cmFja2VyICovXG4gICAgICAgICAgICAgICAgX3RoaXMyLnRyYWNrZXIoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW9fcGxheScsXG4gICAgICAgICAgICAgICAgICAgIHR0OiAnJ1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgX3RoaXMyLnBsYXlUaW1lVHJhY2tpbmcgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi50cmFja1BsYXlUaW1lKCk7XG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKCdwYXVzZScsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIC8qIHZpZGVvIGVuZCB3aWxsIHRyaWdnZXIgcGF1c2UgZXZlbnQsIHNvIHdpbGwgbmVlZCB0byBjaGVjayB0aGUgdGltZSAqL1xuICAgICAgICAgICAgICAgIGlmIChfdGhpczIudmlkZW8uY3VycmVudFRpbWUgPCBfdGhpczIudmlkZW8uZHVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLyogdXBkYXRlIHZpZGVvIHN0YXRlICovXG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi52aWRlb1N0YXRlID0gMjtcblxuICAgICAgICAgICAgICAgICAgICAvKiB0cmFja2VyICovXG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi50cmFja2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlb19wYXVzZSdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLyogdXBkYXRlIHZpZGVvIHN0YXRlICovXG4gICAgICAgICAgICAgICAgX3RoaXMyLnZpZGVvU3RhdGUgPSAzO1xuICAgICAgICAgICAgICAgIC8qIHRyYWNrZXIgKi9cbiAgICAgICAgICAgICAgICBfdGhpczIudHJhY2tlcih7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlb19wbGF5XzEwMCcsXG4gICAgICAgICAgICAgICAgICAgIHR0OiAnJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8qIGVuZGluZyBpbWFnZSAqL1xuICAgICAgICAgICAgICAgIF90aGlzMi5ldmVudHNFbmRpbmdJbWFnZSgpO1xuICAgICAgICAgICAgICAgIC8qIHN0b3AgcGxheSB0aW1lIHRyYWNraW5nICovXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChfdGhpczIucGxheVRpbWVUcmFja2luZyk7XG5cbiAgICAgICAgICAgICAgICAvKiB2aWRlbyBsb29wIC0gTkogKi9cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMi5kYXRhLmxvb3AgIT0gJ3VuZGVmaW5lZCcgJiYgX3RoaXMyLmRhdGEubG9vcCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczIucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAvKiBoaWRlIHJlcGxheSAqL1xuICAgICAgICAgICAgICAgICAgICBfdGhpczIuY29udHJvbC5yZXBsYXkucXVlcnlTZWxlY3RvcignLmRjLXJlcGxheScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi5jb250cm9sLnBsYXkucXVlcnlTZWxlY3RvcignLmRjLXBsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczIuY29udHJvbC5wbGF5LnF1ZXJ5U2VsZWN0b3IoJy5kYy1wYXVzZScpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKiBsaXN0ZW4gdG8gcG9zdCBtZXNzYWdlICovXG4gICAgICAgICAgICB0aGlzLmFwcC5saXN0ZW4oe1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiBjYWxsYmFjayhyZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzcC5hdXRoID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyogaW52aWV3ICovXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwLmF1dGgudHlwZSA9PSAnaW52aWV3JyAmJiBfdGhpczIuYXV0b3BsYXkgPT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpczIudmlkZW8uZW5kZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIudmlkZW8ucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLyogb3V0dmlldyAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcC5hdXRoLnR5cGUgPT0gJ291dHZpZXcnICYmIF90aGlzMi5hdXRvcGxheSA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIudmlkZW8ucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8qIGNsb3NlIGV4cCAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcC5hdXRoLnR5cGUgPT0gJ2Nsb3NlRXhwYW5kYWJsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi52aWRlby5wYXVzZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3AuYXV0aC50eXBlID09ICdvcGVuQURDJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnZpZGVvLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczIuaG92ZXJFdmVudCA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi52aWRlby5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdXRlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5ob3ZlckV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdldmVudHNFbmRpbmdJbWFnZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBldmVudHNFbmRpbmdJbWFnZSgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5lbmRpbmdJbWFnZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmRpbmdJbWFnZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrYWJsZS5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGlja2FibGUuc3R5bGUuekluZGV4ID0gJzExJztcblxuICAgICAgICAgICAgICAgIHRoaXMuZW5kaW5nSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczMuZGF0YS5lbmRpbmdJbWFnZS5scFVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25seSBvcGVuIGlmIGxhbmRpbmcgdXJsIGlzIG5vdCBibGFuayAteWtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy50cmFja2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZW5kX2ltYWdlX2NsaWNrJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dDogJ0NUUidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmxpbmtPcGVuZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogX3RoaXMzLmRhdGEuZW5kaW5nSW1hZ2UubHBVcmxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMy5lbmRpbmdJbWFnZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdldmVudHNDbGlja3Rocm91Z2gnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZXZlbnRzQ2xpY2t0aHJvdWdoKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8qIGNsaWNrdGhyb3VnaCAqL1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5lbmRpbmdJbWFnZS5scFVybCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsaWNrYWJsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpY2thYmxlLnNldEF0dHJpYnV0ZSgnaHJlZicsICcjJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpY2thYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LnRyYWNrZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlbmRfaW1hZ2VfY2xpY2snLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR0OiAnQ1RSJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQubGlua09wZW5lcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBfdGhpczQuZGF0YS5lbmRpbmdJbWFnZS5scFVybFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuY2xpY2t0aHJvdWdoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrdGhyb3VnaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmxpbmtPcGVuZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBfdGhpczQuZGF0YS5jbGlja3Rocm91Z2gubHBVcmxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2V2ZW50c1JlcGxheUJ0bicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBldmVudHNSZXBsYXlCdG4oKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKHRoaXMucmVwbGF5QnRuICE9ICcnKSB7XG5cbiAgICAgICAgICAgICAgICAvKiBlbmRlZCwgc2hvdyByZXBsYXkgKi9cbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczUucmVwbGF5QnRuLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5yZXBsYXlCdG4ucXVlcnlTZWxlY3RvcignaW1nJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczUudmlkZW8udW5tdXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNS52aWRlby5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2V2ZW50c0NvbnRyb2wnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZXZlbnRzQ29udHJvbCgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5jb250cm9sWydwbGF5J10gIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAvKiBzaG93IHBsYXkgYnkgZGVmYXVsdCBpZiBpdCBpcyBub24gYXV0b3BsYXkgb3IgaW52aWV3IGF1dG9wbGF5ICovXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5hdXRvcGxheSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbC5wbGF5LnF1ZXJ5U2VsZWN0b3IoJy5kYy1wbGF5Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbC5wbGF5LnF1ZXJ5U2VsZWN0b3IoJy5kYy1wYXVzZScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cm9sLnJlcGxheS5xdWVyeVNlbGVjdG9yKCcuZGMtcmVwbGF5Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgICAgICAvKiBpZiBub24gYXV0b3BsYXkgdW5tdXRlIGJ5IGRlZmF1bHQgLSBOSiAqL1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2wuYXVkaW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbC5hdWRpby5xdWVyeVNlbGVjdG9yKCcuZGMtbXV0ZScpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2wuYXVkaW8ucXVlcnlTZWxlY3RvcignLmRjLXVubXV0ZScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICAgICAgLyogdW5tdXRlIHZpZGVvIGJ5IGRlZmF1bHQgLSB1c2VkIGluIHBsYXkgZXZlbnQgKi9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bm11dGVEZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyogc2hvdyBwYXVzZSBieSBkZWZhdWx0IGlmIGl0IGlzIGF1dG9wbGF5ICovXG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2wucGxheS5xdWVyeVNlbGVjdG9yKCcuZGMtcGF1c2UnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbC5wbGF5LnF1ZXJ5U2VsZWN0b3IoJy5kYy1wbGF5Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cm9sLmF1ZGlvLnF1ZXJ5U2VsZWN0b3IoJy5kYy1tdXRlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbC5hdWRpby5xdWVyeVNlbGVjdG9yKCcuZGMtdW5tdXRlJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIG11dGUgdmlkZW8gYnkgZGVmYXVsdCAtIHVzZWQgaW4gcGxheSBldmVudCAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5tdXRlRGVmYXVsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKiBwbGF5ZWQsIHNob3cgbXV0ZS91bm11dGUgKi9cbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLyogVG8gbXV0ZSBvciB1bm11dGUgdmlkZW8gYnkgZGVmYXVsdCAtIG9uIHRoZSBmaXJzdCBwbGF5IG9ubHkgLSBOSiAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM2LmRhdGEuYXV0b3BsYXkgPT0gMCAmJiBfdGhpczYudW5tdXRlRGVmYXVsdCAmJiBfdGhpczYudW5tdXRlRGVmYXVsdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczYubXV0ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczYudW5tdXRlRGVmYXVsdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIV90aGlzNi51bm11dGVEZWZhdWx0ICYmIF90aGlzNi51bm11dGVEZWZhdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy52aWRlby5tdXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczYudW5tdXRlRGVmYXVsdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvKiBwbGF5IHNob3cvaGlkZSAqL1xuICAgICAgICAgICAgICAgICAgICBfdGhpczYuY29udHJvbC5wbGF5LnF1ZXJ5U2VsZWN0b3IoJy5kYy1wbGF5Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNvbnRyb2wuYXVkaW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi5jb250cm9sLnBsYXkucXVlcnlTZWxlY3RvcignLmRjLXBhdXNlJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAgICAgICAgICAgICAgICAgLyogbWFrZSBzdXJlIHJlcGxheSBpcyBoaWRkZW4gKi9cbiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNvbnRyb2wucmVwbGF5LnF1ZXJ5U2VsZWN0b3IoJy5kYy1yZXBsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qIHRpbWVyICovXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aW1lX3NwYW4gPSBfdGhpczYuY29udHJvbC5yZXBsYXkucXVlcnlTZWxlY3Rvcignc3BhbicpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGltZSA9IE1hdGgucm91bmQoX3RoaXM2LnZpZGVvLmR1cmF0aW9uKSAtIE1hdGgucm91bmQoX3RoaXM2LnZpZGVvLmN1cnJlbnRUaW1lIHx8IDApO1xuICAgICAgICAgICAgICAgICAgICB0aW1lID0gaXNOYU4odGltZSkgPyAnJyA6IHRpbWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aW1lX3NwYW4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZV9zcGFuLmlubmVySFRNTCA9IHRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lX3NwYW4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKF90aGlzNi50aW1lckludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LnRpbWVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGltZSA9IE1hdGgucm91bmQoX3RoaXM2LnZpZGVvLmR1cmF0aW9uKSAtIE1hdGgucm91bmQoX3RoaXM2LnZpZGVvLmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUgPSBpc05hTih0aW1lKSA/ICcnIDogdGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lX3NwYW4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVfc3Bhbi5pbm5lckhUTUwgPSB0aW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB2aWRlbyBzeW5jICovXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdl9kdXJhdGlvbiA9IE1hdGgucm91bmQoX3RoaXM2LnZpZGVvLmR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2X2N1cnJlbnRUaW1lID0gTWF0aC5yb3VuZChfdGhpczYudmlkZW8uY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmNfMjUgPSBNYXRoLnJvdW5kKHZfZHVyYXRpb24gKiAwLjI1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwZXJjXzUwID0gTWF0aC5yb3VuZCh2X2R1cmF0aW9uICogMC41KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwZXJjXzc1ID0gTWF0aC5yb3VuZCh2X2R1cmF0aW9uICogMC43NSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczYudmlkZW8uY3VycmVudFRpbWUgPj0gX3RoaXM2LnZpZGVvLmR1cmF0aW9uIHx8IF90aGlzNi52aWRlb1N0YXRlICE9IDEgJiYgX3RoaXM2LnZpZGVvLmN1cnJlbnRUaW1lID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lX3NwYW4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKF90aGlzNi50aW1lckludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNi52aWRlb1N0YXRlICE9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKF90aGlzNi50aW1lckludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczYuY2FsbGJhY2tFdmVudHMub25QbGF5aW5nICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNhbGxiYWNrRXZlbnRzLm9uUGxheWluZyhNYXRoLnJvdW5kKF90aGlzNi52aWRlby5jdXJyZW50VGltZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvKiBmb3IgY2FudmFzIHN3aXRjaGluZyAtIE5KICovXG4gICAgICAgICAgICAgICAgdGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKCdwbGF5aW5nJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM2LmNhbnZhc1ZpZGVvU3dpdGNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi5vdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvKiBwYXVzZSwgc2hvdyByZXBsYXkgKi9cbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczYuY29udHJvbC5wbGF5LnF1ZXJ5U2VsZWN0b3IoJy5kYy1wbGF5Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi5jb250cm9sLnBsYXkucXVlcnlTZWxlY3RvcignLmRjLXBhdXNlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8qIGVuZGVkLCBzaG93IHJlcGxheSAqL1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi5jb250cm9sLnBsYXkucXVlcnlTZWxlY3RvcignLmRjLXBsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczYuY29udHJvbC5wbGF5LnF1ZXJ5U2VsZWN0b3IoJy5kYy1wYXVzZScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi5jb250cm9sLmF1ZGlvLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcy5jb250cm9sLnJlcGxheS5xdWVyeVNlbGVjdG9yKCcuZGMtcmVwbGF5Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczYuY29udHJvbC5yZXBsYXkucXVlcnlTZWxlY3RvcignLmRjLXJlcGxheScpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzNi5jYWxsYmFja0V2ZW50cy5vblBsYXlpbmcgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi5jYWxsYmFja0V2ZW50cy5vbkVuZGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8qIGNvbnRyb2wgZXZlbnRzICovXG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sLnBsYXkucXVlcnlTZWxlY3RvcignLmRjLXBsYXknKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi52aWRlby5wbGF5KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sLnBsYXkucXVlcnlTZWxlY3RvcignLmRjLXBhdXNlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczYudmlkZW8ucGF1c2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2wuYXVkaW8ucXVlcnlTZWxlY3RvcignLmRjLW11dGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi5tdXRlKHRydWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbC5hdWRpby5xdWVyeVNlbGVjdG9yKCcuZGMtdW5tdXRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8qIHRyYWNrZXIgKi9cbiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LnRyYWNrZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3ZpZGVvX3VubXV0ZSdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLyogY2FudmFzIHN3aXRjaGluZyAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM2LmNhbnZhc1ZpZGVvICYmICFfdGhpczYuY2FudmFzVmlkZW9Td2l0Y2hlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNhbnZhc1ZpZGVvU3dpdGNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNhbnZhcyA9IF90aGlzNi52aWRlbztcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNhbnZhcy5wYXVzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi5jYW52YXMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi5jYW52YXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChfdGhpczYuY2FudmFzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMub3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gX3RoaXM2LnZpZGVvLmN1cnJlbnRUaW1lO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczYudmlkZW8gPSBfdGhpczYudmlkZW9Db250YWluZXIucXVlcnlTZWxlY3RvcignI3ZpZGVvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczYudmlkZW8uY3VycmVudFRpbWUgPSBjdXJyZW50VGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi52aWRlby5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi5tdXRlKGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmxvYWRWaWRlbygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmV2ZW50cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy52aWRlby5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczYudmlkZW8ucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBfdGhpczYubXV0ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sLnJlcGxheS5xdWVyeVNlbGVjdG9yKCcuZGMtcmVwbGF5JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvKiB0cmFja2VyICovXG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi50cmFja2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlb19yZXBsYXknXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczYubXV0ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi52aWRlby5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIC8qIGhpZGUgcmVwbGF5ICovXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNsaWNrYWJsZS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi5jbGlja2FibGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi5jbGlja2FibGUuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi5jbGlja2FibGUuc3R5bGUuekluZGV4ID0gJzEwJztcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEubW91c2VvdXRNdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW8ub25tb3VzZW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ211dGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbXV0ZShfbXV0ZSkge1xuICAgICAgICAgICAgaWYgKF9tdXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlby5tdXRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sLmF1ZGlvLnF1ZXJ5U2VsZWN0b3IoJy5kYy11bm11dGUnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2wuYXVkaW8ucXVlcnlTZWxlY3RvcignLmRjLW11dGUnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvLnVubXV0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbC5hdWRpby5xdWVyeVNlbGVjdG9yKCcuZGMtdW5tdXRlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2wuYXVkaW8ucXVlcnlTZWxlY3RvcignLmRjLW11dGUnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbGlua09wZW5lcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsaW5rT3BlbmVyKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG9wdGlvbnMudXJsKTtcbiAgICAgICAgICAgIHRoaXMuYXBwLm9wZW4ob3B0aW9ucy51cmwpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0cmFja2VyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRyYWNrZXIob3B0aW9ucykge1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMucHJldmlldykge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cob3B0aW9ucy50eXBlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC50cmFja2VyKHR5cGVvZiBvcHRpb25zLnR0ICE9ICd1bmRlZmluZWQnID8gb3B0aW9ucy50dCA6ICdFJywgb3B0aW9ucy50eXBlLCB0aGlzLmxheWVyLCB0aGlzLmxheWVyLCBvcHRpb25zLnZhbHVlIHx8ICcnKTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLmV4dFRyYWNrZXJzICE9ICd1bmRlZmluZWQnICYmIHRoaXMuZGF0YS5leHRUcmFja2Vycy5lbmFibGVkICYmICh0aGlzLmRhdGEuZXh0VHJhY2tlcnMudHlwZSA9PSAwIHx8IHRoaXMuZGF0YS5leHRUcmFja2Vycy50eXBlID09IDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0VHJhY2tlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBvcHRpb25zLnR5cGVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdleHRUcmFja2VyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGV4dFRyYWNrZXIob3B0aW9ucykge1xuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgKiBleHRlcm5hbCB0cmFja2VyIHdpdGggZHNwIG1hY3JvIHN1cHBvcnQgKCB0bWMgKVxyXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByZXZpZXcgJiYgdHlwZW9mIHRoaXMuZGF0YS5leHRUcmFja2Vyc1tvcHRpb25zLnR5cGVdICE9ICd1bmRlZmluZWQnICYmIHRoaXMuZGF0YS5leHRUcmFja2Vyc1tvcHRpb25zLnR5cGVdICE9ICcnKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5kYXRhLmV4dFRyYWNrZXJzW29wdGlvbnMudHlwZV07XG4gICAgICAgICAgICAgICAgLyogbWFrZSBzdXJlIHdlIGhhdmUgcmVjZWl2ZWQgdGhlIG1hY3JvICovXG5cbiAgICAgICAgICAgICAgICB1cmwgPSB0aGlzLmFwcC5tYWNybyh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdGhpcy5kYXRhLmV4dFRyYWNrZXJzW29wdGlvbnMudHlwZV0sXG4gICAgICAgICAgICAgICAgICAgIGRzcE1hY3JvOiB0aGlzLmFwcC5kc3BNYWNyb1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLyoganMgKi9cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhLmV4dFRyYWNrZXJzLnR5cGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICAgICAgICAgICAgICBzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIHMuc3JjID0gdXJsO1xuXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qIGltZyAqL1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZGF0YS5leHRUcmFja2Vycy50eXBlID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpLnN0eWxlLndpZHRoID0gJzFweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpLnN0eWxlLmhlaWdodCA9ICcxcHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaS5zcmMgPSB1cmw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qIHRlbXBvcmFyeSB0cmFja2VycyB3aGljaCBmaXJlIHdoZW4gdmlkZW9fMTAwIGlzIGZpcmVkIGZvciBleHQgdHJhY2tlciAqL1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnR5cGUgPT0gJ3ZpZGVvX3BsYXlfMTAwJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYWNrZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3ZpZXd0aHJvdWdoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbmNvZGVVUklDb21wb25lbnQodXJsKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5kYXRhLmV4dFRyYWNrZXJzW29wdGlvbnMudHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3RyYWNrUGxheVRpbWUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdHJhY2tQbGF5VGltZSgpIHtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRoaXMudmlkZW8uZHVyYXRpb247XG4gICAgICAgICAgICB2YXIgY3VycmVudFRpbWUgPSB0aGlzLnZpZGVvLmN1cnJlbnRUaW1lO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudFRpbWUgPj0gZHVyYXRpb24gJiYgdGhpcy50cmFja2VkLmluZGV4T2YoJ3ZpZGVvX3BsYXlfMTAwJykgPCAwKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnRyYWNrZWQucHVzaCgndmlkZW9fcGxheV8xMDAnKTtcbiAgICAgICAgICAgICAgICAvKiB0cmFja2VyICovXG4gICAgICAgICAgICAgICAgdGhpcy50cmFja2VyKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3ZpZGVvX3BsYXlfMTAwJyxcbiAgICAgICAgICAgICAgICAgICAgdHQ6ICcnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLyogc3RvcCBwbGF5IHRpbWUgdHJhY2tpbmcgKi9cbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMucGxheVRpbWVUcmFja2luZyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRUaW1lID49IGR1cmF0aW9uICogMC43NSAmJiB0aGlzLnRyYWNrZWQuaW5kZXhPZigndmlkZW9fcGxheV83NScpIDwgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tlZC5wdXNoKCd2aWRlb19wbGF5Xzc1Jyk7XG4gICAgICAgICAgICAgICAgLyogdHJhY2tlciAqL1xuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tlcih7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlb19wbGF5Xzc1JyxcbiAgICAgICAgICAgICAgICAgICAgdHQ6ICcnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRUaW1lID49IGR1cmF0aW9uICogMC41ICYmIHRoaXMudHJhY2tlZC5pbmRleE9mKCd2aWRlb19wbGF5XzUwJykgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFja2VkLnB1c2goJ3ZpZGVvX3BsYXlfNTAnKTtcbiAgICAgICAgICAgICAgICAvKiB0cmFja2VyICovXG4gICAgICAgICAgICAgICAgdGhpcy50cmFja2VyKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3ZpZGVvX3BsYXlfNTAnLFxuICAgICAgICAgICAgICAgICAgICB0dDogJydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFRpbWUgPj0gZHVyYXRpb24gKiAwLjI1ICYmIHRoaXMudHJhY2tlZC5pbmRleE9mKCd2aWRlb19wbGF5XzI1JykgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFja2VkLnB1c2goJ3ZpZGVvX3BsYXlfMjUnKTtcbiAgICAgICAgICAgICAgICAvKiB0cmFja2VyICovXG4gICAgICAgICAgICAgICAgdGhpcy50cmFja2VyKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3ZpZGVvX3BsYXlfMjUnLFxuICAgICAgICAgICAgICAgICAgICB0dDogJydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbW9iaWxlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vYmlsZSgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLmltYWdlc19saXN0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBNYXRoLmNlaWwodGhpcy5kYXRhLmZyYW1lcyAvIDIwKTsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoaSA8PSAzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSlNPTih0aGlzLmRhdGEuc3JjLmltZ191cmwucmVwbGFjZSgnaW1hZ2VfJywgJycpICsgJ2NodW5rcycgKyBpICsgJy5qc29uJywgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXJzZSBKU09OIHN0cmluZyBpbnRvIG9iamVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdHVhbF9KU09OID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuaW1hZ2VzX2xpc3RbYWN0dWFsX0pTT05bJ2luZGV4J11dID0gYWN0dWFsX0pTT05bJ2MnXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXRzIGZpcnN0IGNodW5rIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdHVhbF9KU09OWydpbmRleCddID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0IHZpZGVvIG9ubHkgaWYgZmlyc3QgY2h1bmsgaXMgbG9hZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LnZpZGVvID0gbmV3IF9tb2JpbGUyLmRlZmF1bHQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogX3RoaXM3LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcHM6IF90aGlzNy5kYXRhLmZwcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZGcmFtZXM6IF90aGlzNy5kYXRhLmZyYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9vcDogX3RoaXM3LmRhdGEubG9vcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGltZW5zaW9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBfdGhpczcuZGF0YS53LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBfdGhpczcuZGF0YS5oLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VzVXJsOiBfdGhpczcuaW1hZ2VzX2xpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHREaW1lbnNpb246IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiBfdGhpczcuYXV0b3BsYXkgPT0gMSA/IHRydWUgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlc2t0b3BWaWRlbyA9IF90aGlzNy52aWRlb0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCd2aWRlbycpIHx8IF90aGlzNy52aWRlb0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNrdG9wVmlkZW8ucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChfdGhpczcudmlkZW8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5ldmVudHMoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGNyZWF0ZSBtdXRlIHVubXV0ZSBmdW5jdGlvbiBmb3IgZGVza3RvcCB2aWRlbyAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy52aWRlby5tdXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5tdXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcudmlkZW8udW5tdXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5tdXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcudmlkZW8ucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvc19jaHVua3MucHVzaCh0aGlzLmRhdGEuc3JjLmltZ191cmwucmVwbGFjZSgnaW1hZ2VfJywgJycpICsgJ2NodW5rcycgKyBpICsgJy5qc29uJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdsb2FkSlNPTicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkSlNPTih1cmwsIGNhbGxiYWNrKSB7XG5cbiAgICAgICAgICAgIHZhciB4b2JqID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4b2JqLm92ZXJyaWRlTWltZVR5cGUoXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgICAgICAgeG9iai5vcGVuKCdHRVQnLCB1cmwsIHRydWUpOyAvLyBSZXBsYWNlICdteV9kYXRhJyB3aXRoIHRoZSBwYXRoIHRvIHlvdXIgZmlsZVxuICAgICAgICAgICAgeG9iai5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHhvYmoucmVhZHlTdGF0ZSA9PSA0ICYmIHhvYmouc3RhdHVzID09IFwiMjAwXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWlyZWQgdXNlIG9mIGFuIGFub255bW91cyBjYWxsYmFjayBhcyAub3BlbiB3aWxsIE5PVCByZXR1cm4gYSB2YWx1ZSBidXQgc2ltcGx5IHJldHVybnMgdW5kZWZpbmVkIGluIGFzeW5jaHJvbm91cyBtb2RlXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHhvYmoucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeG9iai5zZW5kKG51bGwpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFZpZGVvO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBWaWRlbztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy92aWRlby5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _effects = __webpack_require__(8);\n\nObject.keys(_effects).forEach(function (key) {\n  if (key === "default" || key === "__esModule") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _effects[key];\n    }\n  });\n});\n\nvar _mads = __webpack_require__(9);\n\nvar _mads2 = _interopRequireDefault(_mads);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _mads2.default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vbWFkcy1jdXN0b20vbGliL2luZGV4LmpzPzUyZmYiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2VmZmVjdHMgPSByZXF1aXJlKCcuL2VmZmVjdHMnKTtcblxuT2JqZWN0LmtleXMoX2VmZmVjdHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICBpZiAoa2V5ID09PSBcImRlZmF1bHRcIiB8fCBrZXkgPT09IFwiX19lc01vZHVsZVwiKSByZXR1cm47XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIF9lZmZlY3RzW2tleV07XG4gICAgfVxuICB9KTtcbn0pO1xuXG52YXIgX21hZHMgPSByZXF1aXJlKCcuL21hZHMnKTtcblxudmFyIF9tYWRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21hZHMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBfbWFkczIuZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWFkcy1jdXN0b20vbGliL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n')},function(module,exports,__webpack_require__){eval("// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(5);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(11)(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js??ref--2-1!../node_modules/postcss-loader/lib/index.js!./main.css\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js??ref--2-1!../node_modules/postcss-loader/lib/index.js!./main.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tYWluLmNzcz9kMTJiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS0yLTEhLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2xpYi9pbmRleC5qcyEuL21haW4uY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBQcmVwYXJlIGNzc1RyYW5zZm9ybWF0aW9uXG52YXIgdHJhbnNmb3JtO1xuXG52YXIgb3B0aW9ucyA9IHt9XG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS0yLTEhLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2xpYi9pbmRleC5qcyEuL21haW4uY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS0yLTEhLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2xpYi9pbmRleC5qcyEuL21haW4uY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9tYWluLmNzc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* eslint-disable */\nvar Mobile = function Mobile(options) {\n    _classCallCheck(this, Mobile);\n\n    /* mobile doesn't support CustomEvent so use this as fallback - April */\n    if (typeof CustomEvent === 'undefined') {\n        CustomEvent = function CustomEvent(type, eventInitDict) {\n            var event = document.createEvent('CustomEvent');\n            event.initCustomEvent(type, eventInitDict['bubbles'], eventInitDict['cancelable'], eventInitDict['detail']);\n            return event;\n        };\n    }\n    var connectionsPerHost = 6,\n        // max simultaneous http connections to same host; Varies for different versions of Android and iOS\n    maxPossibleConnections = 16,\n        // max connections to all hosts; Can varies for different versions of Android and iOS\n    memWarning = 600,\n        // after the number of images cached in memory hits this - start cleaning images from memory after they are shown (when play or seek) (this still means there can hold up to memWarning potentially useless images in cache)\n    memCritical = 1200,\n        // maximum amount of images to cache in memory. After the size of cache hits this, prevent downloading new images until part of cache is released. The system relies on automatic cleaning when playing and when seeking so we should have gap Critical minus Warning\n    isMemCritical = false,\n        // true if we have ever hit the memory warning\n    cleaningTolerance,\n        // if we are sure we have downloaded the right images, no need to remove images immediately after they are shown but save them for future\n    totalConnections,\n        // calculated taking into consideration number of CDNs and audio download state\n    maxLoadedPerFrame = 4,\n        // limit number of images downloaded per animation frame; this prevents video freeze to unpack from JPEG/PNG\n    loadPerFrame,\n        // number of images already downloaded during this frame\n    isLoadingBlocked,\n        tabId = options.id,\n        canvasEl,\n        // canvas node\n    canvasCtx,\n        // canvas 2d context\n    percentageEl,\n        // text element displaying loading percentage pressing controls\n    hideControlsTimeoutId,\n        // handler to timeout that hides controls when not used\n\n    FPS = options.fps,\n        // frames per second\n    origFpi = 1000 / FPS,\n        fpi = origFpi,\n        // delay between frames in milliseconds\n    syncTolerance,\n        // max allowed number of frames that audio is not in sync with video; can increase if audio engine is slow on the concrete device\n\n    threads = 0,\n        // number of images downloaded simultaneously\n    noInternetTimeout,\n        // if no images downloaded, display a hint\n    calcSpeedTimeoutId,\n        // handler on timeout periodically recalculating the speed\n    loadThickeningStage,\n        // how many times the downloading \"worm\" has hit the video end. The \"worm\" can go back to download holes in the middle\n\n    loadStartPos,\n        // from which position we started downloading in the latest download session\n    loadStartCount,\n        // totalLoaded at the beginning of session. Useful for speed count method 2\n    loadStartTime,\n        // time when latest download (and speed measurement as well) started\n    totalStartTime = Date.now(),\n        totalLoaded = 0,\n        // number of totally downloaded images loaded since the beginning of time\n    totalCached = 0,\n        speedFactor,\n        // calculated value - shows how much download speed is slower than playing speed; value > 1 means that video is playing faster than downloading\n    oldSpeedFactor,\n        // since we have 2 speed methods, take the average value of both\n    bufferSize = FPS,\n        // if connection is slow; buffer is calculated so that video is played without lags to the very end\n    isSpeedUnknown = true,\n        // whether we have speed approximation or not\n    calcSpeedMethod = 1,\n        // method == 1 means calculate using totalLoaded, method == 2 means calculate speed using loadedInSession. when we hit the memory limit, we skip downloading images, so can't calculate speed precisely\n    loadingThrottleTimeoutIds = [],\n        // if number of image cached reaches memCritical, we start throttling images download. We should release those timed out downloads as soon as seek happens\n\n    videoStopped = 0,\n        videoWaitingForBuffer = 2,\n        videoPlaying = 6,\n        videoState = videoStopped,\n        isVideoTryingToPlay,\n        // whether is trying to play video\n    isVideoWaiting = false,\n        startVideoOnImageLoadTimeoutId,\n        videoIntervalId,\n        // correcting interval handler\n\n    playSkip = 1,\n        // step between frames when playing; 1 - no frames skipped; 2 - every second is skipped\n    loadSkip = 1,\n        // step between frames when downloading; 1 - no frames skipped; 2 - every second is skipped\n    setSkippingTo1 = Infinity,\n        // position after which frames won't be skipped because we've downloaded enough frames or the speed is good\n    setSkippingTo2 = Infinity,\n        // position after which we skip every second frame; At first loadSkip is set so that download rate changes. Later, when playingPos reaches that magic position (setSkippingTo1 or 2) where download rate has changed, - playSkip is set to corresponding value\n    framesDelayed,\n        // how many frames could not play because the images were not downloaded yet\n\n    doSynchronisationAsap = false,\n        // do synchronize audio and video as soon as possible\n\n    nextLoadingPos,\n        // position of the NEXT image to load\n    playingPos = 0,\n        // position of now playing or about to play from\n\n    videoLength = options.numberOfFrames,\n        // number of frames in the video\n    duration = videoLength / FPS,\n        // duration of video in seconds\n    images = new Array(videoLength),\n        // all saved images together with event handlers\n    dimensions = options.dimensions,\n\n    // array of all DIMENSIONS objects\n    currentDimension,\n        // current dimension\n    width,\n        // width of current dimension\n    height,\n        // height of current dimension\n    imagesUrl,\n        // url from which to load images\n    cdnsCount,\n        isLoop = options.loop,\n        // weather play video in a loop\n    isSeekReleased = true,\n        // do not update seekbar when it's been dragged or clicked\n    isPreviewShown,\n        // special case when the preview frame is shown before starting video\n    playEvent = new CustomEvent('play', {\n        detail: {\n            id: tabId\n        }\n    }),\n        endEvent = new CustomEvent('ended', {\n        detail: {\n            id: tabId\n        }\n    }),\n        pauseEvent = new CustomEvent('pause', {\n        detail: {\n            id: tabId\n        }\n    }),\n        replayEvent = new CustomEvent('replay', {\n        detail: {\n            id: tabId\n        }\n    }),\n        canvasWidth = 0,\n        canvasHeight = 0;\n\n    if (options.fastStart) {\n        // USE options.fastStart to push the player start as soon as possible. If the played is deployed into a large web page, http requests from other elements can break speed calculation and lead to later video start\n        isSpeedUnknown = false;\n        bufferSize = connectionsPerHost;\n    }\n\n    function detectOldPhones() {\n        // Detect old phones and adjust memory saving mode for them\n        var version,\n            ua = navigator.userAgent,\n            io = ua.indexOf(\"Android\");\n\n        if (io !== -1) {\n            version = parseFloat(ua.slice(io + 8));\n            if (version < 3) {\n                if (version < 2.4) {\n                    memWarning *= 2 / 3;\n                    memCritical *= 2 / 3;\n                    connectionsPerHost = 8;\n                    maxPossibleConnections = 10;\n                    if (version < 2.3) {\n                        memWarning *= 2 / 3;\n                        memCritical *= 2 / 3;\n                        setLoadSkip(2); // old OSes target old phones which have very little memory and slow processors\n                        setPlaySkip(2);\n                    }\n                }\n            }\n        } else if (/iP(hone|od|ad)/i.test(ua)) {\n            version = parseInt(navigator.appVersion.match(/OS (\\d+)_?/)[1], 10);\n            if (version < 5) {\n                memWarning *= 2 / 3;\n                memCritical *= 2 / 3;\n                if (version < 4) {\n                    memWarning *= 2 / 3;\n                    memCritical *= 2 / 3;\n                    setLoadSkip(2);\n                    setPlaySkip(2);\n                }\n            }\n        }\n    }\n\n    function getImageUrl(index) {\n        var n = 20;\n        var y = imagesUrl[Math.floor(index / n)];\n        if (typeof y == 'undefined' || typeof y[index % n] == 'undefined') {\n            return '';\n        }\n\n        return y[index % n];\n\n        return imagesUrl[index % cdnsCount] + (index + 1) + '.jpg'; // distribute images loading across CDNs\n    }\n\n    function setLoadSkip(val) {\n        // set images skipping when loading\n        if (loadSkip !== val) {\n            loadSkip = val;\n\n            if (val === 2) {\n                // skip images loading - load odd images only\n                loadThickeningStage = 0;\n                if (nextLoadingPos % 2) {\n                    // if position is odd, set downloading to the next position\n                    setSkippingTo2 = nextLoadingPos - 1; // we have \"holes\" since the previous position\n                    nextLoadingPos++;\n                } else {\n                    setSkippingTo2 = nextLoadingPos; // if position is even, everything is fine\n                }\n                setSkippingTo1 = Infinity;\n            } else {\n                setSkippingTo1 = nextLoadingPos; // stop skipping since this position\n                setSkippingTo2 = Infinity;\n            }\n        }\n    }\n\n    function setPlaySkip(val) {\n        playSkip = val;\n        setSkippingTo1 = Infinity;\n        setSkippingTo2 = Infinity;\n        resetFpi();\n    }\n\n    function adjustPlayingPos() {\n        var currentImageLoaded = images[playingPos],\n            // check if something is already loaded\n        pattern = getPattern(playingPos);\n        currentImageLoaded = currentImageLoaded && currentImageLoaded.complete;\n\n        if (currentImageLoaded && pattern === -2 || pattern === 2) {\n            setLoadSkip(2);\n            setPlaySkip(2);\n            if (pattern === 2) {\n                playingPos++;\n            }\n        } else if (pattern === 1) {\n            setLoadSkip(1);\n            setPlaySkip(1);\n            if (!currentImageLoaded) {\n                playingPos++;\n            }\n        } else if (pattern === -1) {\n            setLoadSkip(1);\n            setPlaySkip(1);\n            playingPos += 2;\n        } else if (pattern === 0 && currentImageLoaded) {\n            setLoadSkip(1);\n            setPlaySkip(1);\n        } else if (loadSkip === 2 && playingPos > setSkippingTo2) {\n            setPlaySkip(2);\n        } else if (loadSkip === 1 && playingPos > setSkippingTo1) {\n            setPlaySkip(1);\n        }\n        // pesimmistic patterns\n        else if (!isSpeedUnknown && speedFactor < 1) {\n                setLoadSkip(2);\n                setPlaySkip(2);\n            }\n\n        if (playSkip === 2 && playingPos % 2 && playingPos < videoLength - 1) {\n            playingPos++;\n        }\n    }\n\n    function resetFpi() {\n        fpi = origFpi * playSkip;\n    }\n\n    function resizeVideo(size) {\n\n        if (size >= 0 && size < dimensions.length) {\n            currentDimension = size;\n\n            var dimension = dimensions[currentDimension];\n            width = dimension.width;\n            height = dimension.height;\n            canvasWidth = width;\n            canvasHeight = height;\n            imagesUrl = dimension.imagesUrl;\n            cdnsCount = imagesUrl.length;\n            totalConnections = Math.min(connectionsPerHost * cdnsCount, maxPossibleConnections) - 1;\n\n            canvasEl.width = width;\n            canvasEl.height = height;\n        }\n    }\n\n    function getSpeed() {\n        if (calcSpeedMethod === 1) {\n            speedFactor = totalLoaded / (Date.now() - totalStartTime) * origFpi;\n        } else if (calcSpeedMethod === 2) {\n            speedFactor = (oldSpeedFactor + (totalLoaded - loadStartCount) / (Date.now() - loadStartTime) * origFpi) / 2;\n        }\n    }\n\n    function getBufferSize() {\n        var val;\n\n        if (loadThickeningStage === 0) {\n            val = (videoLength - playingPos) * (1 - speedFactor * loadSkip);\n        } else {\n            val = 0;\n        }\n\n        return Math.max(totalConnections, Math.min(val, memCritical - totalCached - 1)) + totalConnections;\n    }\n\n    function calculateSpeed() {\n        getSpeed();\n\n        if (speedFactor > 2) {\n            setLoadSkip(1);\n            // resizeVideo(sizePreset + 1);\n        } else if (speedFactor > 0.8) {\n            setLoadSkip(1);\n        } else {\n            if (speedFactor < 0.5) {\n                setLoadSkip(2);\n                // resizeVideo(sizePreset - 1);\n            }\n        }\n\n        bufferSize = getBufferSize();\n\n        if (speedFactor < 1) {\n            var loadedInSession = nextLoadingPos - playingPos;\n            if (loadedInSession >= 0 && loadedInSession < bufferSize) {\n                percentageEl.innerText = Math.round(Math.sqrt(loadedInSession / bufferSize) * 100) + '%';\n                percentageEl.className = 'vp-hidden spinner';\n            }\n        }\n\n        calcSpeedTimeoutId = setTimeout(calculateSpeed, 300);\n\n        if (isSpeedUnknown) {\n            clearTimeout(noInternetTimeout);\n            isSpeedUnknown = false;\n        }\n    }\n\n    function resetLoadData(currentImageLoaded) {\n        var topLimit = playingPos + memWarning;\n\n        if (playingPos < loadStartPos || nextLoadingPos < playingPos || !currentImageLoaded || setSkippingTo1 < playingPos || setSkippingTo1 > topLimit || setSkippingTo2 < playingPos || setSkippingTo2 > topLimit) {\n            if (playSkip === 2) {\n                setSkippingTo1 = Infinity;\n                setSkippingTo2 = playingPos;\n            } else {\n                setSkippingTo1 = Infinity;\n                setSkippingTo2 = Infinity;\n            }\n        }\n\n        nextLoadingPos = playingPos;\n        loadStartPos = playingPos;\n\n        if (playingPos === 0 && nextLoadingPos >= videoLength) {\n            cleaningTolerance = memCritical - 50;\n        } else {\n            cleaningTolerance = memWarning;\n        }\n\n        if (isMemCritical) {\n            loadStartCount = totalLoaded;\n            loadStartTime = Date.now();\n            calcSpeedMethod = 2;\n            oldSpeedFactor = speedFactor;\n\n            for (var i = 0, l = loadingThrottleTimeoutIds.length; i < l; i++) {\n                clearTimeout(loadingThrottleTimeoutIds[i]);\n                threads--;\n            }\n            loadingThrottleTimeoutIds = [];\n        }\n\n        if (totalCached > cleaningTolerance) {\n            cleanMemory();\n        }\n\n        if (isVideoTryingToPlay) {\n            isVideoWaiting = true;\n            videoState = videoWaitingForBuffer;\n        }\n\n        isPreviewShown = false;\n        doSynchronisationAsap = false;\n        resetFpi();\n\n        framesDelayed = 0;\n        loadThickeningStage = 0;\n        syncTolerance = FPS / 3;\n        isLoadingBlocked = false;\n\n        if (!isSpeedUnknown) {\n            clearTimeout(calcSpeedTimeoutId);\n            calcSpeedTimeoutId = setTimeout(calculateSpeed, 100);\n            bufferSize = getBufferSize();\n        }\n    }\n\n    function onImageLoad(index) {\n        totalLoaded++;\n        totalCached++;\n\n        if (isVideoWaiting) {\n            if (nextLoadingPos - playingPos > bufferSize) {\n                // when buffer is full, start playing video\n                startVideoOnImageLoadTimeoutId = setTimeout(function () {\n                    if (isVideoWaiting) {\n                        startPlaying();\n                    }\n                }, fpi);\n            } else if (index === playingPos && !isPreviewShown) {\n                playFrame();\n                isPreviewShown = true;\n            } else if (isSpeedUnknown && totalLoaded > totalConnections) {\n                calculateSpeed();\n            }\n        } else {\n            loadPerFrame++;\n            if (loadPerFrame > maxLoadedPerFrame) {\n                setTimeout(loadNextImage, fpi / 7);\n                return;\n            }\n        }\n\n        loadNextImage();\n    }\n\n    function cleanThrottle(id) {\n        var i = loadingThrottleTimeoutIds.indexOf(id);\n\n        if (i !== -1) {\n            loadingThrottleTimeoutIds.splice(i, 1);\n        }\n    }\n\n    function onImageFailed(index) {\n        deleteImage(images[index], index, false);\n\n        if (index >= playingPos) {\n\n            var timeoutId = setTimeout(function () {\n                if (index >= playingPos && index - playingPos < cleaningTolerance && (loadSkip === 1 || loadSkip === 2 && index % 2 === 0) && !images[index]) {\n                    loadImage(index);\n                } else {\n                    loadNextImage();\n                }\n                cleanThrottle(timeoutId);\n            }, videoState === videoPlaying ? 10 : 500); // reload image\n\n            loadingThrottleTimeoutIds.push(timeoutId);\n        } else {\n            loadNextImage();\n        }\n    }\n\n    function loadImage(index) {\n        var img = new Image();\n        images[index] = img;\n\n        img.onload = function () {\n\n            onImageLoad(index);\n        };\n        img.onerror = function () {\n            onImageFailed(index);\n        };\n        img.src = getImageUrl(index);\n    }\n\n    function deleteImage(img, index, complete) {\n        images[index] = undefined;\n        if (complete) {\n            totalCached--;\n        }\n        img.onload = undefined;\n        img.onerror = undefined;\n        img.src = ''; // only this line actually releases memory taken by the bitmap\n    }\n\n    function loadNextImage() {\n        if (!isVideoTryingToPlay && nextLoadingPos - playingPos > bufferSize) {\n            // If video is stopped, do not load more than bufferSize images\n            threads--; // Indicate we have killed one downloading thread\n            isLoadingBlocked = true;\n        } else if (totalCached > memCritical) {\n            // Do not hold too much images in cache, because otherwise OS will terminate the browser\n            getSpeed(); // This is the last time when we can calculate speed percsisely using current method; The downloading is starting to throttle now\n            isMemCritical = true;\n            calcSpeedMethod = 0; // Neither method will work now\n            clearTimeout(calcSpeedTimeoutId); // Stop calculating speed\n\n            if (isVideoTryingToPlay) {\n                // If video is started - start throttling\n                var timeoutId = setTimeout(function () {\n                    loadNextImage(); // Continue thread after timeout\n                    cleanThrottle(timeoutId); // Remove timeout from the list because it has fired; We track active timeouts only\n                }, 4 * fpi * totalConnections); // Periodically ping if we can resume downloading\n\n                loadingThrottleTimeoutIds.push(timeoutId); // Record this timeout - so we can quickly move to downloading something different\n            } else {\n                threads--; // Otherwise stop downloading by killing current thread\n                isLoadingBlocked = true;\n            }\n        } else {\n            // IF EVERYTHING IS FINE:\n\n            while (nextLoadingPos < videoLength) {\n                // Find next image to load by iterating over the array\n                if (images[nextLoadingPos]) {\n                    nextLoadingPos += loadSkip;\n                } else {\n                    loadImage(nextLoadingPos);\n                    nextLoadingPos += loadSkip; // Set position to start the new search from\n                    return; // Success\n                }\n            }\n\n            loadThickeningStage++; // If we did not return, it means we have reached the end\n\n            if (isVideoWaiting) {\n                // If we wanted to play, but could not, start playing\n                startPlaying();\n            }\n\n            if (totalCached < videoLength && loadThickeningStage < 3) {\n                // If we have downloaded to the end but have \"holes\" in the middle (plus prevent possible recursion)\n\n                if (loadThickeningStage === 1 && loadSkip === 2) {\n                    // If we are skipping frames - put all downloading threads to fix the holes while playing, and load the rest of the video in the best possible quality\n                    nextLoadingPos = playingPos + // predict the position from which we can load without skipping to the very end:\n                    Math.floor(getBufferSize()); // and downloading speed with the help of wise function returning real-time buffer size depending on download speed\n                    setLoadSkip(1); // This records the position from which we load without skipping\n                    cleaningTolerance = memCritical - 50;\n                } else {\n                    nextLoadingPos = 0; // Otherwise check the video for holes from the very beginning\n                    if (memCritical > videoLength / 2) {\n                        // I have an idea of optimizing the video for seek:\n                        loadSkip = 1; // if it's possible, download the video entirely\n                    } else {\n                        loadSkip = 2; // if not, download with frame skipping. This lowers the video quality, but allows to seek over the maximum part of the video video instantly\n                    }\n                }\n\n                loadNextImage();\n            } else {\n                threads--;\n                isLoadingBlocked = true;\n            }\n        }\n    }\n\n    function cleanMemory() {\n\n        function cleanImage(i) {\n            var img = images[i];\n            if (img) {\n                var complete = img.complete;\n                if (!complete) {\n                    // if we are deleting currently downloading image\n                    threads--; // it means we kill one downloading thread\n                }\n                deleteImage(img, i, complete);\n            }\n        }\n\n        var i = 0;\n\n        while (i < playingPos && totalCached >= cleaningTolerance) {\n            cleanImage(i++);\n        }\n\n        i = videoLength - 1;\n        while (totalCached >= cleaningTolerance) {\n            cleanImage(i--);\n        }\n    }\n\n    function restart() {\n        playingPos = 0;\n        stopPlaying({ delayed: false });\n        drawFrame();\n\n        if (isLoop) {\n            loadVideo();\n        } else {\n            isVideoTryingToPlay = false;\n        }\n    }\n\n    function drawFrame() {\n\n        canvasEl.currentTime = playingPos / FPS;\n\n        var img = images[playingPos],\n            complete = img && img.complete;\n\n        if (typeof img == 'undefined') {\n            return;\n        }\n\n        var height = img.height;\n\n        var x = 0,\n            y = 0;\n\n        /* adjust postion */\n        if (img.width > img.height) {\n            y = (canvasHeight - img.height) / 2;\n        } else {\n            x = (canvasWidth - img.width) / 2;\n\n            if (img.height < canvasHeight) {\n                y = (canvasHeight - img.height) / 2;\n            }\n        }\n\n        if (complete) {\n            // handle broken frame\n            canvasCtx.drawImage(img, x, y, img.width, img.height); // draw the frame\n\n            if (totalCached > cleaningTolerance) {\n                deleteImage(img, playingPos, complete);\n            }\n\n            return true;\n        }\n\n        return false;\n    }\n\n    function iteratePlayingPos() {\n        loadPerFrame = 0;\n        playingPos++;\n\n        if (playingPos >= setSkippingTo1) {\n            setPlaySkip(1);\n        } else if (playingPos > setSkippingTo2) {\n            setPlaySkip(2);\n        }\n\n        if (playSkip === 2) {\n            playingPos++;\n        }\n    }\n\n    var autoIncrement = 0,\n        intervals = {};\n\n    var clearCorrectingInterval = function clearCorrectingInterval(id) {\n        clearTimeout(intervals[id]);\n        delete intervals[id];\n    };\n\n    function playFrame() {\n\n        if (doSynchronisationAsap || playingPos % 7 === 0) {\n            doSynchronisationAsap = false;\n        }\n\n        if (drawFrame()) {\n            iteratePlayingPos();\n            if (playingPos >= videoLength) {\n                canvasEl.dispatchEvent(endEvent);\n                restart();\n                return;\n            }\n            if (isPreviewShown && !loadThickeningStage && videoLength > nextLoadingPos && nextLoadingPos - playingPos < totalConnections) {\n                setLoadSkip(2);\n            }\n        } else {\n            delayFrames();\n        }\n    }\n\n    function delayFrames() {\n        var pattern = getPattern(playingPos);\n\n        if (pattern === 0 || pattern === 1) {\n            playingPos++;\n        }\n        if (pattern === -1) {\n            playingPos += 2;\n        } else if (pattern === 2) {\n            playingPos++; // get in sync with frames skipping\n            setLoadSkip(2); // set skipping, it looks like we can't download video in good quality\n        } else {\n            setLoadSkip(2); // set skipping, it looks like we can't download video in good quality\n\n            if (nextLoadingPos < playingPos ||\n            //nextLoadingPos - playingPos > 100 ||\n            framesDelayed > 2 * syncTolerance) {\n                // console.log('delayed');\n                stopPlaying({ delayed: true });\n                loadVideo();\n            }\n            framesDelayed++;\n        }\n    }\n\n    function getPattern(index) {\n        var img = images[++index]; // check weather we reached an area loaded with loadSkip = 2\n        img = img && img.complete; // recognize the pattern where every second image is skipped\n        var img1 = images[++index];\n        img1 = img1 && img1.complete;\n        var img2 = images[++index];\n        img2 = img2 && img2.complete;\n        if (img && !img1 && img2) {\n            // it looks like the images are loaded ok with loadStep === 2\n            return 2;\n        } else if (img && img1 && img2) {\n            return 1;\n        } else if (!img && img1 && !img2) {\n            return -2;\n        } else if (img1 && img2) {\n            return -1;\n        } else if (img && img1) {\n            return 0;\n        }\n    }\n\n    function startPlaying() {\n        startVideo();\n    }\n\n    function stopPlaying(options) {\n        if (!options.delayed && playingPos != 0) {\n            canvasEl.dispatchEvent(pauseEvent);\n        }\n        clearTimeout(calcSpeedTimeoutId);\n        percentageEl.className = 'vp-hidden spinner';\n\n        isVideoWaiting = false;\n        videoState = videoStopped;\n\n        clearCorrectingInterval(videoIntervalId);\n        clearInterval(startVideoOnImageLoadTimeoutId);\n    }\n\n    function startVideo() {\n        canvasEl.dispatchEvent(playEvent);\n        clearTimeout(calcSpeedTimeoutId);\n        percentageEl.className = 'vp-hidden spinner';\n\n        isVideoWaiting = false;\n        videoState = videoPlaying;\n        isPreviewShown = true;\n\n        clearCorrectingInterval(videoIntervalId);\n        videoIntervalId = setCorrectingInterval(playFrame);\n        clearTimeout(startVideoOnImageLoadTimeoutId);\n    }\n\n    function loadVideo() {\n\n        adjustPlayingPos();\n\n        if (playingPos >= videoLength) {\n            // some error protection\n            restart();\n            return;\n        }\n        var currentImageLoaded = images[playingPos];\n        currentImageLoaded = currentImageLoaded && currentImageLoaded.complete;\n\n        resetLoadData(currentImageLoaded);\n\n        while (threads < totalConnections && !isLoadingBlocked) {\n            // start loading maxConnections images\n            loadNextImage();\n            threads++;\n        }\n\n        if (currentImageLoaded) {\n            // if (isVideoTryingToPlay && (nextLoadingPos - playingPos > bufferSize)) {\n            //     startPlaying();\n            // } else {\n            //     playFrame();\n            //     isPreviewShown = true;\n            // }\n            /* fix play shutter - NJ */\n            startPlaying();\n        }\n    }\n\n    function play() {\n        isVideoTryingToPlay = true;\n        loadVideo();\n    }\n\n    function stop() {\n        isVideoTryingToPlay = false;\n        stopPlaying({ delayed: false });\n    }\n\n    /* replay video, audio play by default - NJ */\n    function replay() {\n        canvasEl.dispatchEvent(replayEvent);\n        restart();\n        startPlaying();\n        isTrying2Play = true;\n        isVideoTryingToPlay = true;\n    }\n\n    // function to get the current playing time - April\n    function currentTime() {\n        return playingPos / FPS;\n    }\n\n    function updateImagesUrl(i) {\n        imagesUrl = i;\n        console.log(imagesUrl);\n    }\n\n    this.updateImagesUrl = updateImagesUrl;\n\n    this.play = play;\n\n    this.stop = stop;\n\n    this.pause = stop;\n\n    this.replay = replay;\n\n    this.currentTime = currentTime;\n\n    this.duration = duration;\n\n    function createHTML() {\n\n        var t = document.createElement('div');\n\n        var $ = t.querySelector.bind(t);\n\n        t.innerHTML = '<canvas id=vp-canvas></canvas> \\\r\n                     </div>\\\r\n                     <div id=vp-percentage class=vp-hidden></div>';\n\n        canvasEl = $('#vp-canvas');\n        percentageEl = $('#vp-percentage');\n        canvasCtx = canvasEl.getContext(\"2d\");\n    }\n\n    detectOldPhones();\n\n    createHTML();\n\n    resizeVideo(options.defaultDimension);\n\n    if (options.autoplay) {\n        isVideoTryingToPlay = true;\n    } else {\n        isVideoTryingToPlay = false;\n    }\n\n    loadVideo();\n\n    noInternetTimeout = setTimeout(function () {\n        if (playingPos === 0 && totalLoaded === 0) {\n            percentageEl.innerText = 'no internet';\n            percentageEl.className = 'vp-hidden spinner';\n        }\n    }, 8000);\n\n    var setCorrectingInterval = function setCorrectingInterval(func) {\n        var id = autoIncrement++,\n            planned = Date.now() - fpi;\n        var o = planned,\n            x;\n\n        function tick() {\n            func();\n            if (intervals[id] !== undefined) {\n                planned += fpi;\n                x = Date.now();\n                var delta = planned - x;\n                if (delta < 0) {\n                    /* @NOTE  disable to fix invalid current time when tab inactive - NJ */\n                    //playingPos -= Math.round(delta / fpi);\n                    delta = 0;\n                    if (playingPos >= videoLength) {\n\n                        /* Video Stops and not restart, fire end event - NJ */\n                        if (!isLoop) {\n                            canvasEl.dispatchEvent(endEvent);\n                        }\n                        restart();\n                        return;\n                    }\n                }\n                /* @NOTE time change from delta to origFpi to fix invalid current time when tab inactive - NJ */\n                intervals[id] = setTimeout(tick, origFpi);\n            }\n        }\n\n        intervals[id] = setTimeout(tick, 0);\n        return id;\n    };\n\n    canvasEl.play = this.play;\n    canvasEl.pause = this.pause;\n    canvasEl.replay = this.replay;\n    canvasEl.duration = Math.floor(duration);\n    canvasEl.updateImagesUrl = this.updateImagesUrl;\n\n    return canvasEl;\n};\n\nexports.default = Mobile;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9tb2JpbGUuanM/ZmVhMCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyogZXNsaW50LWRpc2FibGUgKi9cbnZhciBNb2JpbGUgPSBmdW5jdGlvbiBNb2JpbGUob3B0aW9ucykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb2JpbGUpO1xuXG4gICAgLyogbW9iaWxlIGRvZXNuJ3Qgc3VwcG9ydCBDdXN0b21FdmVudCBzbyB1c2UgdGhpcyBhcyBmYWxsYmFjayAtIEFwcmlsICovXG4gICAgaWYgKHR5cGVvZiBDdXN0b21FdmVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgQ3VzdG9tRXZlbnQgPSBmdW5jdGlvbiBDdXN0b21FdmVudCh0eXBlLCBldmVudEluaXREaWN0KSB7XG4gICAgICAgICAgICB2YXIgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICAgICAgICAgIGV2ZW50LmluaXRDdXN0b21FdmVudCh0eXBlLCBldmVudEluaXREaWN0WydidWJibGVzJ10sIGV2ZW50SW5pdERpY3RbJ2NhbmNlbGFibGUnXSwgZXZlbnRJbml0RGljdFsnZGV0YWlsJ10pO1xuICAgICAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgY29ubmVjdGlvbnNQZXJIb3N0ID0gNixcbiAgICAgICAgLy8gbWF4IHNpbXVsdGFuZW91cyBodHRwIGNvbm5lY3Rpb25zIHRvIHNhbWUgaG9zdDsgVmFyaWVzIGZvciBkaWZmZXJlbnQgdmVyc2lvbnMgb2YgQW5kcm9pZCBhbmQgaU9TXG4gICAgbWF4UG9zc2libGVDb25uZWN0aW9ucyA9IDE2LFxuICAgICAgICAvLyBtYXggY29ubmVjdGlvbnMgdG8gYWxsIGhvc3RzOyBDYW4gdmFyaWVzIGZvciBkaWZmZXJlbnQgdmVyc2lvbnMgb2YgQW5kcm9pZCBhbmQgaU9TXG4gICAgbWVtV2FybmluZyA9IDYwMCxcbiAgICAgICAgLy8gYWZ0ZXIgdGhlIG51bWJlciBvZiBpbWFnZXMgY2FjaGVkIGluIG1lbW9yeSBoaXRzIHRoaXMgLSBzdGFydCBjbGVhbmluZyBpbWFnZXMgZnJvbSBtZW1vcnkgYWZ0ZXIgdGhleSBhcmUgc2hvd24gKHdoZW4gcGxheSBvciBzZWVrKSAodGhpcyBzdGlsbCBtZWFucyB0aGVyZSBjYW4gaG9sZCB1cCB0byBtZW1XYXJuaW5nIHBvdGVudGlhbGx5IHVzZWxlc3MgaW1hZ2VzIGluIGNhY2hlKVxuICAgIG1lbUNyaXRpY2FsID0gMTIwMCxcbiAgICAgICAgLy8gbWF4aW11bSBhbW91bnQgb2YgaW1hZ2VzIHRvIGNhY2hlIGluIG1lbW9yeS4gQWZ0ZXIgdGhlIHNpemUgb2YgY2FjaGUgaGl0cyB0aGlzLCBwcmV2ZW50IGRvd25sb2FkaW5nIG5ldyBpbWFnZXMgdW50aWwgcGFydCBvZiBjYWNoZSBpcyByZWxlYXNlZC4gVGhlIHN5c3RlbSByZWxpZXMgb24gYXV0b21hdGljIGNsZWFuaW5nIHdoZW4gcGxheWluZyBhbmQgd2hlbiBzZWVraW5nIHNvIHdlIHNob3VsZCBoYXZlIGdhcCBDcml0aWNhbCBtaW51cyBXYXJuaW5nXG4gICAgaXNNZW1Dcml0aWNhbCA9IGZhbHNlLFxuICAgICAgICAvLyB0cnVlIGlmIHdlIGhhdmUgZXZlciBoaXQgdGhlIG1lbW9yeSB3YXJuaW5nXG4gICAgY2xlYW5pbmdUb2xlcmFuY2UsXG4gICAgICAgIC8vIGlmIHdlIGFyZSBzdXJlIHdlIGhhdmUgZG93bmxvYWRlZCB0aGUgcmlnaHQgaW1hZ2VzLCBubyBuZWVkIHRvIHJlbW92ZSBpbWFnZXMgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhleSBhcmUgc2hvd24gYnV0IHNhdmUgdGhlbSBmb3IgZnV0dXJlXG4gICAgdG90YWxDb25uZWN0aW9ucyxcbiAgICAgICAgLy8gY2FsY3VsYXRlZCB0YWtpbmcgaW50byBjb25zaWRlcmF0aW9uIG51bWJlciBvZiBDRE5zIGFuZCBhdWRpbyBkb3dubG9hZCBzdGF0ZVxuICAgIG1heExvYWRlZFBlckZyYW1lID0gNCxcbiAgICAgICAgLy8gbGltaXQgbnVtYmVyIG9mIGltYWdlcyBkb3dubG9hZGVkIHBlciBhbmltYXRpb24gZnJhbWU7IHRoaXMgcHJldmVudHMgdmlkZW8gZnJlZXplIHRvIHVucGFjayBmcm9tIEpQRUcvUE5HXG4gICAgbG9hZFBlckZyYW1lLFxuICAgICAgICAvLyBudW1iZXIgb2YgaW1hZ2VzIGFscmVhZHkgZG93bmxvYWRlZCBkdXJpbmcgdGhpcyBmcmFtZVxuICAgIGlzTG9hZGluZ0Jsb2NrZWQsXG4gICAgICAgIHRhYklkID0gb3B0aW9ucy5pZCxcbiAgICAgICAgY2FudmFzRWwsXG4gICAgICAgIC8vIGNhbnZhcyBub2RlXG4gICAgY2FudmFzQ3R4LFxuICAgICAgICAvLyBjYW52YXMgMmQgY29udGV4dFxuICAgIHBlcmNlbnRhZ2VFbCxcbiAgICAgICAgLy8gdGV4dCBlbGVtZW50IGRpc3BsYXlpbmcgbG9hZGluZyBwZXJjZW50YWdlIHByZXNzaW5nIGNvbnRyb2xzXG4gICAgaGlkZUNvbnRyb2xzVGltZW91dElkLFxuICAgICAgICAvLyBoYW5kbGVyIHRvIHRpbWVvdXQgdGhhdCBoaWRlcyBjb250cm9scyB3aGVuIG5vdCB1c2VkXG5cbiAgICBGUFMgPSBvcHRpb25zLmZwcyxcbiAgICAgICAgLy8gZnJhbWVzIHBlciBzZWNvbmRcbiAgICBvcmlnRnBpID0gMTAwMCAvIEZQUyxcbiAgICAgICAgZnBpID0gb3JpZ0ZwaSxcbiAgICAgICAgLy8gZGVsYXkgYmV0d2VlbiBmcmFtZXMgaW4gbWlsbGlzZWNvbmRzXG4gICAgc3luY1RvbGVyYW5jZSxcbiAgICAgICAgLy8gbWF4IGFsbG93ZWQgbnVtYmVyIG9mIGZyYW1lcyB0aGF0IGF1ZGlvIGlzIG5vdCBpbiBzeW5jIHdpdGggdmlkZW87IGNhbiBpbmNyZWFzZSBpZiBhdWRpbyBlbmdpbmUgaXMgc2xvdyBvbiB0aGUgY29uY3JldGUgZGV2aWNlXG5cbiAgICB0aHJlYWRzID0gMCxcbiAgICAgICAgLy8gbnVtYmVyIG9mIGltYWdlcyBkb3dubG9hZGVkIHNpbXVsdGFuZW91c2x5XG4gICAgbm9JbnRlcm5ldFRpbWVvdXQsXG4gICAgICAgIC8vIGlmIG5vIGltYWdlcyBkb3dubG9hZGVkLCBkaXNwbGF5IGEgaGludFxuICAgIGNhbGNTcGVlZFRpbWVvdXRJZCxcbiAgICAgICAgLy8gaGFuZGxlciBvbiB0aW1lb3V0IHBlcmlvZGljYWxseSByZWNhbGN1bGF0aW5nIHRoZSBzcGVlZFxuICAgIGxvYWRUaGlja2VuaW5nU3RhZ2UsXG4gICAgICAgIC8vIGhvdyBtYW55IHRpbWVzIHRoZSBkb3dubG9hZGluZyBcIndvcm1cIiBoYXMgaGl0IHRoZSB2aWRlbyBlbmQuIFRoZSBcIndvcm1cIiBjYW4gZ28gYmFjayB0byBkb3dubG9hZCBob2xlcyBpbiB0aGUgbWlkZGxlXG5cbiAgICBsb2FkU3RhcnRQb3MsXG4gICAgICAgIC8vIGZyb20gd2hpY2ggcG9zaXRpb24gd2Ugc3RhcnRlZCBkb3dubG9hZGluZyBpbiB0aGUgbGF0ZXN0IGRvd25sb2FkIHNlc3Npb25cbiAgICBsb2FkU3RhcnRDb3VudCxcbiAgICAgICAgLy8gdG90YWxMb2FkZWQgYXQgdGhlIGJlZ2lubmluZyBvZiBzZXNzaW9uLiBVc2VmdWwgZm9yIHNwZWVkIGNvdW50IG1ldGhvZCAyXG4gICAgbG9hZFN0YXJ0VGltZSxcbiAgICAgICAgLy8gdGltZSB3aGVuIGxhdGVzdCBkb3dubG9hZCAoYW5kIHNwZWVkIG1lYXN1cmVtZW50IGFzIHdlbGwpIHN0YXJ0ZWRcbiAgICB0b3RhbFN0YXJ0VGltZSA9IERhdGUubm93KCksXG4gICAgICAgIHRvdGFsTG9hZGVkID0gMCxcbiAgICAgICAgLy8gbnVtYmVyIG9mIHRvdGFsbHkgZG93bmxvYWRlZCBpbWFnZXMgbG9hZGVkIHNpbmNlIHRoZSBiZWdpbm5pbmcgb2YgdGltZVxuICAgIHRvdGFsQ2FjaGVkID0gMCxcbiAgICAgICAgc3BlZWRGYWN0b3IsXG4gICAgICAgIC8vIGNhbGN1bGF0ZWQgdmFsdWUgLSBzaG93cyBob3cgbXVjaCBkb3dubG9hZCBzcGVlZCBpcyBzbG93ZXIgdGhhbiBwbGF5aW5nIHNwZWVkOyB2YWx1ZSA+IDEgbWVhbnMgdGhhdCB2aWRlbyBpcyBwbGF5aW5nIGZhc3RlciB0aGFuIGRvd25sb2FkaW5nXG4gICAgb2xkU3BlZWRGYWN0b3IsXG4gICAgICAgIC8vIHNpbmNlIHdlIGhhdmUgMiBzcGVlZCBtZXRob2RzLCB0YWtlIHRoZSBhdmVyYWdlIHZhbHVlIG9mIGJvdGhcbiAgICBidWZmZXJTaXplID0gRlBTLFxuICAgICAgICAvLyBpZiBjb25uZWN0aW9uIGlzIHNsb3c7IGJ1ZmZlciBpcyBjYWxjdWxhdGVkIHNvIHRoYXQgdmlkZW8gaXMgcGxheWVkIHdpdGhvdXQgbGFncyB0byB0aGUgdmVyeSBlbmRcbiAgICBpc1NwZWVkVW5rbm93biA9IHRydWUsXG4gICAgICAgIC8vIHdoZXRoZXIgd2UgaGF2ZSBzcGVlZCBhcHByb3hpbWF0aW9uIG9yIG5vdFxuICAgIGNhbGNTcGVlZE1ldGhvZCA9IDEsXG4gICAgICAgIC8vIG1ldGhvZCA9PSAxIG1lYW5zIGNhbGN1bGF0ZSB1c2luZyB0b3RhbExvYWRlZCwgbWV0aG9kID09IDIgbWVhbnMgY2FsY3VsYXRlIHNwZWVkIHVzaW5nIGxvYWRlZEluU2Vzc2lvbi4gd2hlbiB3ZSBoaXQgdGhlIG1lbW9yeSBsaW1pdCwgd2Ugc2tpcCBkb3dubG9hZGluZyBpbWFnZXMsIHNvIGNhbid0IGNhbGN1bGF0ZSBzcGVlZCBwcmVjaXNlbHlcbiAgICBsb2FkaW5nVGhyb3R0bGVUaW1lb3V0SWRzID0gW10sXG4gICAgICAgIC8vIGlmIG51bWJlciBvZiBpbWFnZSBjYWNoZWQgcmVhY2hlcyBtZW1Dcml0aWNhbCwgd2Ugc3RhcnQgdGhyb3R0bGluZyBpbWFnZXMgZG93bmxvYWQuIFdlIHNob3VsZCByZWxlYXNlIHRob3NlIHRpbWVkIG91dCBkb3dubG9hZHMgYXMgc29vbiBhcyBzZWVrIGhhcHBlbnNcblxuICAgIHZpZGVvU3RvcHBlZCA9IDAsXG4gICAgICAgIHZpZGVvV2FpdGluZ0ZvckJ1ZmZlciA9IDIsXG4gICAgICAgIHZpZGVvUGxheWluZyA9IDYsXG4gICAgICAgIHZpZGVvU3RhdGUgPSB2aWRlb1N0b3BwZWQsXG4gICAgICAgIGlzVmlkZW9UcnlpbmdUb1BsYXksXG4gICAgICAgIC8vIHdoZXRoZXIgaXMgdHJ5aW5nIHRvIHBsYXkgdmlkZW9cbiAgICBpc1ZpZGVvV2FpdGluZyA9IGZhbHNlLFxuICAgICAgICBzdGFydFZpZGVvT25JbWFnZUxvYWRUaW1lb3V0SWQsXG4gICAgICAgIHZpZGVvSW50ZXJ2YWxJZCxcbiAgICAgICAgLy8gY29ycmVjdGluZyBpbnRlcnZhbCBoYW5kbGVyXG5cbiAgICBwbGF5U2tpcCA9IDEsXG4gICAgICAgIC8vIHN0ZXAgYmV0d2VlbiBmcmFtZXMgd2hlbiBwbGF5aW5nOyAxIC0gbm8gZnJhbWVzIHNraXBwZWQ7IDIgLSBldmVyeSBzZWNvbmQgaXMgc2tpcHBlZFxuICAgIGxvYWRTa2lwID0gMSxcbiAgICAgICAgLy8gc3RlcCBiZXR3ZWVuIGZyYW1lcyB3aGVuIGRvd25sb2FkaW5nOyAxIC0gbm8gZnJhbWVzIHNraXBwZWQ7IDIgLSBldmVyeSBzZWNvbmQgaXMgc2tpcHBlZFxuICAgIHNldFNraXBwaW5nVG8xID0gSW5maW5pdHksXG4gICAgICAgIC8vIHBvc2l0aW9uIGFmdGVyIHdoaWNoIGZyYW1lcyB3b24ndCBiZSBza2lwcGVkIGJlY2F1c2Ugd2UndmUgZG93bmxvYWRlZCBlbm91Z2ggZnJhbWVzIG9yIHRoZSBzcGVlZCBpcyBnb29kXG4gICAgc2V0U2tpcHBpbmdUbzIgPSBJbmZpbml0eSxcbiAgICAgICAgLy8gcG9zaXRpb24gYWZ0ZXIgd2hpY2ggd2Ugc2tpcCBldmVyeSBzZWNvbmQgZnJhbWU7IEF0IGZpcnN0IGxvYWRTa2lwIGlzIHNldCBzbyB0aGF0IGRvd25sb2FkIHJhdGUgY2hhbmdlcy4gTGF0ZXIsIHdoZW4gcGxheWluZ1BvcyByZWFjaGVzIHRoYXQgbWFnaWMgcG9zaXRpb24gKHNldFNraXBwaW5nVG8xIG9yIDIpIHdoZXJlIGRvd25sb2FkIHJhdGUgaGFzIGNoYW5nZWQsIC0gcGxheVNraXAgaXMgc2V0IHRvIGNvcnJlc3BvbmRpbmcgdmFsdWVcbiAgICBmcmFtZXNEZWxheWVkLFxuICAgICAgICAvLyBob3cgbWFueSBmcmFtZXMgY291bGQgbm90IHBsYXkgYmVjYXVzZSB0aGUgaW1hZ2VzIHdlcmUgbm90IGRvd25sb2FkZWQgeWV0XG5cbiAgICBkb1N5bmNocm9uaXNhdGlvbkFzYXAgPSBmYWxzZSxcbiAgICAgICAgLy8gZG8gc3luY2hyb25pemUgYXVkaW8gYW5kIHZpZGVvIGFzIHNvb24gYXMgcG9zc2libGVcblxuICAgIG5leHRMb2FkaW5nUG9zLFxuICAgICAgICAvLyBwb3NpdGlvbiBvZiB0aGUgTkVYVCBpbWFnZSB0byBsb2FkXG4gICAgcGxheWluZ1BvcyA9IDAsXG4gICAgICAgIC8vIHBvc2l0aW9uIG9mIG5vdyBwbGF5aW5nIG9yIGFib3V0IHRvIHBsYXkgZnJvbVxuXG4gICAgdmlkZW9MZW5ndGggPSBvcHRpb25zLm51bWJlck9mRnJhbWVzLFxuICAgICAgICAvLyBudW1iZXIgb2YgZnJhbWVzIGluIHRoZSB2aWRlb1xuICAgIGR1cmF0aW9uID0gdmlkZW9MZW5ndGggLyBGUFMsXG4gICAgICAgIC8vIGR1cmF0aW9uIG9mIHZpZGVvIGluIHNlY29uZHNcbiAgICBpbWFnZXMgPSBuZXcgQXJyYXkodmlkZW9MZW5ndGgpLFxuICAgICAgICAvLyBhbGwgc2F2ZWQgaW1hZ2VzIHRvZ2V0aGVyIHdpdGggZXZlbnQgaGFuZGxlcnNcbiAgICBkaW1lbnNpb25zID0gb3B0aW9ucy5kaW1lbnNpb25zLFxuXG4gICAgLy8gYXJyYXkgb2YgYWxsIERJTUVOU0lPTlMgb2JqZWN0c1xuICAgIGN1cnJlbnREaW1lbnNpb24sXG4gICAgICAgIC8vIGN1cnJlbnQgZGltZW5zaW9uXG4gICAgd2lkdGgsXG4gICAgICAgIC8vIHdpZHRoIG9mIGN1cnJlbnQgZGltZW5zaW9uXG4gICAgaGVpZ2h0LFxuICAgICAgICAvLyBoZWlnaHQgb2YgY3VycmVudCBkaW1lbnNpb25cbiAgICBpbWFnZXNVcmwsXG4gICAgICAgIC8vIHVybCBmcm9tIHdoaWNoIHRvIGxvYWQgaW1hZ2VzXG4gICAgY2Ruc0NvdW50LFxuICAgICAgICBpc0xvb3AgPSBvcHRpb25zLmxvb3AsXG4gICAgICAgIC8vIHdlYXRoZXIgcGxheSB2aWRlbyBpbiBhIGxvb3BcbiAgICBpc1NlZWtSZWxlYXNlZCA9IHRydWUsXG4gICAgICAgIC8vIGRvIG5vdCB1cGRhdGUgc2Vla2JhciB3aGVuIGl0J3MgYmVlbiBkcmFnZ2VkIG9yIGNsaWNrZWRcbiAgICBpc1ByZXZpZXdTaG93bixcbiAgICAgICAgLy8gc3BlY2lhbCBjYXNlIHdoZW4gdGhlIHByZXZpZXcgZnJhbWUgaXMgc2hvd24gYmVmb3JlIHN0YXJ0aW5nIHZpZGVvXG4gICAgcGxheUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdwbGF5Jywge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIGlkOiB0YWJJZFxuICAgICAgICB9XG4gICAgfSksXG4gICAgICAgIGVuZEV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdlbmRlZCcsIHtcbiAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICBpZDogdGFiSWRcbiAgICAgICAgfVxuICAgIH0pLFxuICAgICAgICBwYXVzZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdwYXVzZScsIHtcbiAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICBpZDogdGFiSWRcbiAgICAgICAgfVxuICAgIH0pLFxuICAgICAgICByZXBsYXlFdmVudCA9IG5ldyBDdXN0b21FdmVudCgncmVwbGF5Jywge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIGlkOiB0YWJJZFxuICAgICAgICB9XG4gICAgfSksXG4gICAgICAgIGNhbnZhc1dpZHRoID0gMCxcbiAgICAgICAgY2FudmFzSGVpZ2h0ID0gMDtcblxuICAgIGlmIChvcHRpb25zLmZhc3RTdGFydCkge1xuICAgICAgICAvLyBVU0Ugb3B0aW9ucy5mYXN0U3RhcnQgdG8gcHVzaCB0aGUgcGxheWVyIHN0YXJ0IGFzIHNvb24gYXMgcG9zc2libGUuIElmIHRoZSBwbGF5ZWQgaXMgZGVwbG95ZWQgaW50byBhIGxhcmdlIHdlYiBwYWdlLCBodHRwIHJlcXVlc3RzIGZyb20gb3RoZXIgZWxlbWVudHMgY2FuIGJyZWFrIHNwZWVkIGNhbGN1bGF0aW9uIGFuZCBsZWFkIHRvIGxhdGVyIHZpZGVvIHN0YXJ0XG4gICAgICAgIGlzU3BlZWRVbmtub3duID0gZmFsc2U7XG4gICAgICAgIGJ1ZmZlclNpemUgPSBjb25uZWN0aW9uc1Blckhvc3Q7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGV0ZWN0T2xkUGhvbmVzKCkge1xuICAgICAgICAvLyBEZXRlY3Qgb2xkIHBob25lcyBhbmQgYWRqdXN0IG1lbW9yeSBzYXZpbmcgbW9kZSBmb3IgdGhlbVxuICAgICAgICB2YXIgdmVyc2lvbixcbiAgICAgICAgICAgIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgICAgICAgIGlvID0gdWEuaW5kZXhPZihcIkFuZHJvaWRcIik7XG5cbiAgICAgICAgaWYgKGlvICE9PSAtMSkge1xuICAgICAgICAgICAgdmVyc2lvbiA9IHBhcnNlRmxvYXQodWEuc2xpY2UoaW8gKyA4KSk7XG4gICAgICAgICAgICBpZiAodmVyc2lvbiA8IDMpIHtcbiAgICAgICAgICAgICAgICBpZiAodmVyc2lvbiA8IDIuNCkge1xuICAgICAgICAgICAgICAgICAgICBtZW1XYXJuaW5nICo9IDIgLyAzO1xuICAgICAgICAgICAgICAgICAgICBtZW1Dcml0aWNhbCAqPSAyIC8gMztcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbnNQZXJIb3N0ID0gODtcbiAgICAgICAgICAgICAgICAgICAgbWF4UG9zc2libGVDb25uZWN0aW9ucyA9IDEwO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmVyc2lvbiA8IDIuMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVtV2FybmluZyAqPSAyIC8gMztcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbUNyaXRpY2FsICo9IDIgLyAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TG9hZFNraXAoMik7IC8vIG9sZCBPU2VzIHRhcmdldCBvbGQgcGhvbmVzIHdoaWNoIGhhdmUgdmVyeSBsaXR0bGUgbWVtb3J5IGFuZCBzbG93IHByb2Nlc3NvcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFBsYXlTa2lwKDIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKC9pUChob25lfG9kfGFkKS9pLnRlc3QodWEpKSB7XG4gICAgICAgICAgICB2ZXJzaW9uID0gcGFyc2VJbnQobmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL09TIChcXGQrKV8/LylbMV0sIDEwKTtcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uIDwgNSkge1xuICAgICAgICAgICAgICAgIG1lbVdhcm5pbmcgKj0gMiAvIDM7XG4gICAgICAgICAgICAgICAgbWVtQ3JpdGljYWwgKj0gMiAvIDM7XG4gICAgICAgICAgICAgICAgaWYgKHZlcnNpb24gPCA0KSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbVdhcm5pbmcgKj0gMiAvIDM7XG4gICAgICAgICAgICAgICAgICAgIG1lbUNyaXRpY2FsICo9IDIgLyAzO1xuICAgICAgICAgICAgICAgICAgICBzZXRMb2FkU2tpcCgyKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0UGxheVNraXAoMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0SW1hZ2VVcmwoaW5kZXgpIHtcbiAgICAgICAgdmFyIG4gPSAyMDtcbiAgICAgICAgdmFyIHkgPSBpbWFnZXNVcmxbTWF0aC5mbG9vcihpbmRleCAvIG4pXTtcbiAgICAgICAgaWYgKHR5cGVvZiB5ID09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB5W2luZGV4ICUgbl0gPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB5W2luZGV4ICUgbl07XG5cbiAgICAgICAgcmV0dXJuIGltYWdlc1VybFtpbmRleCAlIGNkbnNDb3VudF0gKyAoaW5kZXggKyAxKSArICcuanBnJzsgLy8gZGlzdHJpYnV0ZSBpbWFnZXMgbG9hZGluZyBhY3Jvc3MgQ0ROc1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldExvYWRTa2lwKHZhbCkge1xuICAgICAgICAvLyBzZXQgaW1hZ2VzIHNraXBwaW5nIHdoZW4gbG9hZGluZ1xuICAgICAgICBpZiAobG9hZFNraXAgIT09IHZhbCkge1xuICAgICAgICAgICAgbG9hZFNraXAgPSB2YWw7XG5cbiAgICAgICAgICAgIGlmICh2YWwgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAvLyBza2lwIGltYWdlcyBsb2FkaW5nIC0gbG9hZCBvZGQgaW1hZ2VzIG9ubHlcbiAgICAgICAgICAgICAgICBsb2FkVGhpY2tlbmluZ1N0YWdlID0gMDtcbiAgICAgICAgICAgICAgICBpZiAobmV4dExvYWRpbmdQb3MgJSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHBvc2l0aW9uIGlzIG9kZCwgc2V0IGRvd25sb2FkaW5nIHRvIHRoZSBuZXh0IHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIHNldFNraXBwaW5nVG8yID0gbmV4dExvYWRpbmdQb3MgLSAxOyAvLyB3ZSBoYXZlIFwiaG9sZXNcIiBzaW5jZSB0aGUgcHJldmlvdXMgcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgbmV4dExvYWRpbmdQb3MrKztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwcGluZ1RvMiA9IG5leHRMb2FkaW5nUG9zOyAvLyBpZiBwb3NpdGlvbiBpcyBldmVuLCBldmVyeXRoaW5nIGlzIGZpbmVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0U2tpcHBpbmdUbzEgPSBJbmZpbml0eTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0U2tpcHBpbmdUbzEgPSBuZXh0TG9hZGluZ1BvczsgLy8gc3RvcCBza2lwcGluZyBzaW5jZSB0aGlzIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgc2V0U2tpcHBpbmdUbzIgPSBJbmZpbml0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFBsYXlTa2lwKHZhbCkge1xuICAgICAgICBwbGF5U2tpcCA9IHZhbDtcbiAgICAgICAgc2V0U2tpcHBpbmdUbzEgPSBJbmZpbml0eTtcbiAgICAgICAgc2V0U2tpcHBpbmdUbzIgPSBJbmZpbml0eTtcbiAgICAgICAgcmVzZXRGcGkoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGp1c3RQbGF5aW5nUG9zKCkge1xuICAgICAgICB2YXIgY3VycmVudEltYWdlTG9hZGVkID0gaW1hZ2VzW3BsYXlpbmdQb3NdLFxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgc29tZXRoaW5nIGlzIGFscmVhZHkgbG9hZGVkXG4gICAgICAgIHBhdHRlcm4gPSBnZXRQYXR0ZXJuKHBsYXlpbmdQb3MpO1xuICAgICAgICBjdXJyZW50SW1hZ2VMb2FkZWQgPSBjdXJyZW50SW1hZ2VMb2FkZWQgJiYgY3VycmVudEltYWdlTG9hZGVkLmNvbXBsZXRlO1xuXG4gICAgICAgIGlmIChjdXJyZW50SW1hZ2VMb2FkZWQgJiYgcGF0dGVybiA9PT0gLTIgfHwgcGF0dGVybiA9PT0gMikge1xuICAgICAgICAgICAgc2V0TG9hZFNraXAoMik7XG4gICAgICAgICAgICBzZXRQbGF5U2tpcCgyKTtcbiAgICAgICAgICAgIGlmIChwYXR0ZXJuID09PSAyKSB7XG4gICAgICAgICAgICAgICAgcGxheWluZ1BvcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHBhdHRlcm4gPT09IDEpIHtcbiAgICAgICAgICAgIHNldExvYWRTa2lwKDEpO1xuICAgICAgICAgICAgc2V0UGxheVNraXAoMSk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRJbWFnZUxvYWRlZCkge1xuICAgICAgICAgICAgICAgIHBsYXlpbmdQb3MrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwYXR0ZXJuID09PSAtMSkge1xuICAgICAgICAgICAgc2V0TG9hZFNraXAoMSk7XG4gICAgICAgICAgICBzZXRQbGF5U2tpcCgxKTtcbiAgICAgICAgICAgIHBsYXlpbmdQb3MgKz0gMjtcbiAgICAgICAgfSBlbHNlIGlmIChwYXR0ZXJuID09PSAwICYmIGN1cnJlbnRJbWFnZUxvYWRlZCkge1xuICAgICAgICAgICAgc2V0TG9hZFNraXAoMSk7XG4gICAgICAgICAgICBzZXRQbGF5U2tpcCgxKTtcbiAgICAgICAgfSBlbHNlIGlmIChsb2FkU2tpcCA9PT0gMiAmJiBwbGF5aW5nUG9zID4gc2V0U2tpcHBpbmdUbzIpIHtcbiAgICAgICAgICAgIHNldFBsYXlTa2lwKDIpO1xuICAgICAgICB9IGVsc2UgaWYgKGxvYWRTa2lwID09PSAxICYmIHBsYXlpbmdQb3MgPiBzZXRTa2lwcGluZ1RvMSkge1xuICAgICAgICAgICAgc2V0UGxheVNraXAoMSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcGVzaW1taXN0aWMgcGF0dGVybnNcbiAgICAgICAgZWxzZSBpZiAoIWlzU3BlZWRVbmtub3duICYmIHNwZWVkRmFjdG9yIDwgMSkge1xuICAgICAgICAgICAgICAgIHNldExvYWRTa2lwKDIpO1xuICAgICAgICAgICAgICAgIHNldFBsYXlTa2lwKDIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIGlmIChwbGF5U2tpcCA9PT0gMiAmJiBwbGF5aW5nUG9zICUgMiAmJiBwbGF5aW5nUG9zIDwgdmlkZW9MZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBwbGF5aW5nUG9zKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNldEZwaSgpIHtcbiAgICAgICAgZnBpID0gb3JpZ0ZwaSAqIHBsYXlTa2lwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc2l6ZVZpZGVvKHNpemUpIHtcblxuICAgICAgICBpZiAoc2l6ZSA+PSAwICYmIHNpemUgPCBkaW1lbnNpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgY3VycmVudERpbWVuc2lvbiA9IHNpemU7XG5cbiAgICAgICAgICAgIHZhciBkaW1lbnNpb24gPSBkaW1lbnNpb25zW2N1cnJlbnREaW1lbnNpb25dO1xuICAgICAgICAgICAgd2lkdGggPSBkaW1lbnNpb24ud2lkdGg7XG4gICAgICAgICAgICBoZWlnaHQgPSBkaW1lbnNpb24uaGVpZ2h0O1xuICAgICAgICAgICAgY2FudmFzV2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIGNhbnZhc0hlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgIGltYWdlc1VybCA9IGRpbWVuc2lvbi5pbWFnZXNVcmw7XG4gICAgICAgICAgICBjZG5zQ291bnQgPSBpbWFnZXNVcmwubGVuZ3RoO1xuICAgICAgICAgICAgdG90YWxDb25uZWN0aW9ucyA9IE1hdGgubWluKGNvbm5lY3Rpb25zUGVySG9zdCAqIGNkbnNDb3VudCwgbWF4UG9zc2libGVDb25uZWN0aW9ucykgLSAxO1xuXG4gICAgICAgICAgICBjYW52YXNFbC53aWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgY2FudmFzRWwuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U3BlZWQoKSB7XG4gICAgICAgIGlmIChjYWxjU3BlZWRNZXRob2QgPT09IDEpIHtcbiAgICAgICAgICAgIHNwZWVkRmFjdG9yID0gdG90YWxMb2FkZWQgLyAoRGF0ZS5ub3coKSAtIHRvdGFsU3RhcnRUaW1lKSAqIG9yaWdGcGk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2FsY1NwZWVkTWV0aG9kID09PSAyKSB7XG4gICAgICAgICAgICBzcGVlZEZhY3RvciA9IChvbGRTcGVlZEZhY3RvciArICh0b3RhbExvYWRlZCAtIGxvYWRTdGFydENvdW50KSAvIChEYXRlLm5vdygpIC0gbG9hZFN0YXJ0VGltZSkgKiBvcmlnRnBpKSAvIDI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRCdWZmZXJTaXplKCkge1xuICAgICAgICB2YXIgdmFsO1xuXG4gICAgICAgIGlmIChsb2FkVGhpY2tlbmluZ1N0YWdlID09PSAwKSB7XG4gICAgICAgICAgICB2YWwgPSAodmlkZW9MZW5ndGggLSBwbGF5aW5nUG9zKSAqICgxIC0gc3BlZWRGYWN0b3IgKiBsb2FkU2tpcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWwgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHRvdGFsQ29ubmVjdGlvbnMsIE1hdGgubWluKHZhbCwgbWVtQ3JpdGljYWwgLSB0b3RhbENhY2hlZCAtIDEpKSArIHRvdGFsQ29ubmVjdGlvbnM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlU3BlZWQoKSB7XG4gICAgICAgIGdldFNwZWVkKCk7XG5cbiAgICAgICAgaWYgKHNwZWVkRmFjdG9yID4gMikge1xuICAgICAgICAgICAgc2V0TG9hZFNraXAoMSk7XG4gICAgICAgICAgICAvLyByZXNpemVWaWRlbyhzaXplUHJlc2V0ICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3BlZWRGYWN0b3IgPiAwLjgpIHtcbiAgICAgICAgICAgIHNldExvYWRTa2lwKDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNwZWVkRmFjdG9yIDwgMC41KSB7XG4gICAgICAgICAgICAgICAgc2V0TG9hZFNraXAoMik7XG4gICAgICAgICAgICAgICAgLy8gcmVzaXplVmlkZW8oc2l6ZVByZXNldCAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYnVmZmVyU2l6ZSA9IGdldEJ1ZmZlclNpemUoKTtcblxuICAgICAgICBpZiAoc3BlZWRGYWN0b3IgPCAxKSB7XG4gICAgICAgICAgICB2YXIgbG9hZGVkSW5TZXNzaW9uID0gbmV4dExvYWRpbmdQb3MgLSBwbGF5aW5nUG9zO1xuICAgICAgICAgICAgaWYgKGxvYWRlZEluU2Vzc2lvbiA+PSAwICYmIGxvYWRlZEluU2Vzc2lvbiA8IGJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgICAgICBwZXJjZW50YWdlRWwuaW5uZXJUZXh0ID0gTWF0aC5yb3VuZChNYXRoLnNxcnQobG9hZGVkSW5TZXNzaW9uIC8gYnVmZmVyU2l6ZSkgKiAxMDApICsgJyUnO1xuICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2VFbC5jbGFzc05hbWUgPSAndnAtaGlkZGVuIHNwaW5uZXInO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2FsY1NwZWVkVGltZW91dElkID0gc2V0VGltZW91dChjYWxjdWxhdGVTcGVlZCwgMzAwKTtcblxuICAgICAgICBpZiAoaXNTcGVlZFVua25vd24pIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChub0ludGVybmV0VGltZW91dCk7XG4gICAgICAgICAgICBpc1NwZWVkVW5rbm93biA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzZXRMb2FkRGF0YShjdXJyZW50SW1hZ2VMb2FkZWQpIHtcbiAgICAgICAgdmFyIHRvcExpbWl0ID0gcGxheWluZ1BvcyArIG1lbVdhcm5pbmc7XG5cbiAgICAgICAgaWYgKHBsYXlpbmdQb3MgPCBsb2FkU3RhcnRQb3MgfHwgbmV4dExvYWRpbmdQb3MgPCBwbGF5aW5nUG9zIHx8ICFjdXJyZW50SW1hZ2VMb2FkZWQgfHwgc2V0U2tpcHBpbmdUbzEgPCBwbGF5aW5nUG9zIHx8IHNldFNraXBwaW5nVG8xID4gdG9wTGltaXQgfHwgc2V0U2tpcHBpbmdUbzIgPCBwbGF5aW5nUG9zIHx8IHNldFNraXBwaW5nVG8yID4gdG9wTGltaXQpIHtcbiAgICAgICAgICAgIGlmIChwbGF5U2tpcCA9PT0gMikge1xuICAgICAgICAgICAgICAgIHNldFNraXBwaW5nVG8xID0gSW5maW5pdHk7XG4gICAgICAgICAgICAgICAgc2V0U2tpcHBpbmdUbzIgPSBwbGF5aW5nUG9zO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRTa2lwcGluZ1RvMSA9IEluZmluaXR5O1xuICAgICAgICAgICAgICAgIHNldFNraXBwaW5nVG8yID0gSW5maW5pdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBuZXh0TG9hZGluZ1BvcyA9IHBsYXlpbmdQb3M7XG4gICAgICAgIGxvYWRTdGFydFBvcyA9IHBsYXlpbmdQb3M7XG5cbiAgICAgICAgaWYgKHBsYXlpbmdQb3MgPT09IDAgJiYgbmV4dExvYWRpbmdQb3MgPj0gdmlkZW9MZW5ndGgpIHtcbiAgICAgICAgICAgIGNsZWFuaW5nVG9sZXJhbmNlID0gbWVtQ3JpdGljYWwgLSA1MDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNsZWFuaW5nVG9sZXJhbmNlID0gbWVtV2FybmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc01lbUNyaXRpY2FsKSB7XG4gICAgICAgICAgICBsb2FkU3RhcnRDb3VudCA9IHRvdGFsTG9hZGVkO1xuICAgICAgICAgICAgbG9hZFN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjYWxjU3BlZWRNZXRob2QgPSAyO1xuICAgICAgICAgICAgb2xkU3BlZWRGYWN0b3IgPSBzcGVlZEZhY3RvcjtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsb2FkaW5nVGhyb3R0bGVUaW1lb3V0SWRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChsb2FkaW5nVGhyb3R0bGVUaW1lb3V0SWRzW2ldKTtcbiAgICAgICAgICAgICAgICB0aHJlYWRzLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2FkaW5nVGhyb3R0bGVUaW1lb3V0SWRzID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG90YWxDYWNoZWQgPiBjbGVhbmluZ1RvbGVyYW5jZSkge1xuICAgICAgICAgICAgY2xlYW5NZW1vcnkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1ZpZGVvVHJ5aW5nVG9QbGF5KSB7XG4gICAgICAgICAgICBpc1ZpZGVvV2FpdGluZyA9IHRydWU7XG4gICAgICAgICAgICB2aWRlb1N0YXRlID0gdmlkZW9XYWl0aW5nRm9yQnVmZmVyO1xuICAgICAgICB9XG5cbiAgICAgICAgaXNQcmV2aWV3U2hvd24gPSBmYWxzZTtcbiAgICAgICAgZG9TeW5jaHJvbmlzYXRpb25Bc2FwID0gZmFsc2U7XG4gICAgICAgIHJlc2V0RnBpKCk7XG5cbiAgICAgICAgZnJhbWVzRGVsYXllZCA9IDA7XG4gICAgICAgIGxvYWRUaGlja2VuaW5nU3RhZ2UgPSAwO1xuICAgICAgICBzeW5jVG9sZXJhbmNlID0gRlBTIC8gMztcbiAgICAgICAgaXNMb2FkaW5nQmxvY2tlZCA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghaXNTcGVlZFVua25vd24pIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChjYWxjU3BlZWRUaW1lb3V0SWQpO1xuICAgICAgICAgICAgY2FsY1NwZWVkVGltZW91dElkID0gc2V0VGltZW91dChjYWxjdWxhdGVTcGVlZCwgMTAwKTtcbiAgICAgICAgICAgIGJ1ZmZlclNpemUgPSBnZXRCdWZmZXJTaXplKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkltYWdlTG9hZChpbmRleCkge1xuICAgICAgICB0b3RhbExvYWRlZCsrO1xuICAgICAgICB0b3RhbENhY2hlZCsrO1xuXG4gICAgICAgIGlmIChpc1ZpZGVvV2FpdGluZykge1xuICAgICAgICAgICAgaWYgKG5leHRMb2FkaW5nUG9zIC0gcGxheWluZ1BvcyA+IGJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgICAgICAvLyB3aGVuIGJ1ZmZlciBpcyBmdWxsLCBzdGFydCBwbGF5aW5nIHZpZGVvXG4gICAgICAgICAgICAgICAgc3RhcnRWaWRlb09uSW1hZ2VMb2FkVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1ZpZGVvV2FpdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRQbGF5aW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBmcGkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gcGxheWluZ1BvcyAmJiAhaXNQcmV2aWV3U2hvd24pIHtcbiAgICAgICAgICAgICAgICBwbGF5RnJhbWUoKTtcbiAgICAgICAgICAgICAgICBpc1ByZXZpZXdTaG93biA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzU3BlZWRVbmtub3duICYmIHRvdGFsTG9hZGVkID4gdG90YWxDb25uZWN0aW9ucykge1xuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZVNwZWVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2FkUGVyRnJhbWUrKztcbiAgICAgICAgICAgIGlmIChsb2FkUGVyRnJhbWUgPiBtYXhMb2FkZWRQZXJGcmFtZSkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobG9hZE5leHRJbWFnZSwgZnBpIC8gNyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbG9hZE5leHRJbWFnZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFuVGhyb3R0bGUoaWQpIHtcbiAgICAgICAgdmFyIGkgPSBsb2FkaW5nVGhyb3R0bGVUaW1lb3V0SWRzLmluZGV4T2YoaWQpO1xuXG4gICAgICAgIGlmIChpICE9PSAtMSkge1xuICAgICAgICAgICAgbG9hZGluZ1Rocm90dGxlVGltZW91dElkcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkltYWdlRmFpbGVkKGluZGV4KSB7XG4gICAgICAgIGRlbGV0ZUltYWdlKGltYWdlc1tpbmRleF0sIGluZGV4LCBmYWxzZSk7XG5cbiAgICAgICAgaWYgKGluZGV4ID49IHBsYXlpbmdQb3MpIHtcblxuICAgICAgICAgICAgdmFyIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSBwbGF5aW5nUG9zICYmIGluZGV4IC0gcGxheWluZ1BvcyA8IGNsZWFuaW5nVG9sZXJhbmNlICYmIChsb2FkU2tpcCA9PT0gMSB8fCBsb2FkU2tpcCA9PT0gMiAmJiBpbmRleCAlIDIgPT09IDApICYmICFpbWFnZXNbaW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRJbWFnZShpbmRleCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZE5leHRJbWFnZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjbGVhblRocm90dGxlKHRpbWVvdXRJZCk7XG4gICAgICAgICAgICB9LCB2aWRlb1N0YXRlID09PSB2aWRlb1BsYXlpbmcgPyAxMCA6IDUwMCk7IC8vIHJlbG9hZCBpbWFnZVxuXG4gICAgICAgICAgICBsb2FkaW5nVGhyb3R0bGVUaW1lb3V0SWRzLnB1c2godGltZW91dElkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvYWROZXh0SW1hZ2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvYWRJbWFnZShpbmRleCkge1xuICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlc1tpbmRleF0gPSBpbWc7XG5cbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgb25JbWFnZUxvYWQoaW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9uSW1hZ2VGYWlsZWQoaW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcuc3JjID0gZ2V0SW1hZ2VVcmwoaW5kZXgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUltYWdlKGltZywgaW5kZXgsIGNvbXBsZXRlKSB7XG4gICAgICAgIGltYWdlc1tpbmRleF0gPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChjb21wbGV0ZSkge1xuICAgICAgICAgICAgdG90YWxDYWNoZWQtLTtcbiAgICAgICAgfVxuICAgICAgICBpbWcub25sb2FkID0gdW5kZWZpbmVkO1xuICAgICAgICBpbWcub25lcnJvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgaW1nLnNyYyA9ICcnOyAvLyBvbmx5IHRoaXMgbGluZSBhY3R1YWxseSByZWxlYXNlcyBtZW1vcnkgdGFrZW4gYnkgdGhlIGJpdG1hcFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvYWROZXh0SW1hZ2UoKSB7XG4gICAgICAgIGlmICghaXNWaWRlb1RyeWluZ1RvUGxheSAmJiBuZXh0TG9hZGluZ1BvcyAtIHBsYXlpbmdQb3MgPiBidWZmZXJTaXplKSB7XG4gICAgICAgICAgICAvLyBJZiB2aWRlbyBpcyBzdG9wcGVkLCBkbyBub3QgbG9hZCBtb3JlIHRoYW4gYnVmZmVyU2l6ZSBpbWFnZXNcbiAgICAgICAgICAgIHRocmVhZHMtLTsgLy8gSW5kaWNhdGUgd2UgaGF2ZSBraWxsZWQgb25lIGRvd25sb2FkaW5nIHRocmVhZFxuICAgICAgICAgICAgaXNMb2FkaW5nQmxvY2tlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodG90YWxDYWNoZWQgPiBtZW1Dcml0aWNhbCkge1xuICAgICAgICAgICAgLy8gRG8gbm90IGhvbGQgdG9vIG11Y2ggaW1hZ2VzIGluIGNhY2hlLCBiZWNhdXNlIG90aGVyd2lzZSBPUyB3aWxsIHRlcm1pbmF0ZSB0aGUgYnJvd3NlclxuICAgICAgICAgICAgZ2V0U3BlZWQoKTsgLy8gVGhpcyBpcyB0aGUgbGFzdCB0aW1lIHdoZW4gd2UgY2FuIGNhbGN1bGF0ZSBzcGVlZCBwZXJjc2lzZWx5IHVzaW5nIGN1cnJlbnQgbWV0aG9kOyBUaGUgZG93bmxvYWRpbmcgaXMgc3RhcnRpbmcgdG8gdGhyb3R0bGUgbm93XG4gICAgICAgICAgICBpc01lbUNyaXRpY2FsID0gdHJ1ZTtcbiAgICAgICAgICAgIGNhbGNTcGVlZE1ldGhvZCA9IDA7IC8vIE5laXRoZXIgbWV0aG9kIHdpbGwgd29yayBub3dcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChjYWxjU3BlZWRUaW1lb3V0SWQpOyAvLyBTdG9wIGNhbGN1bGF0aW5nIHNwZWVkXG5cbiAgICAgICAgICAgIGlmIChpc1ZpZGVvVHJ5aW5nVG9QbGF5KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdmlkZW8gaXMgc3RhcnRlZCAtIHN0YXJ0IHRocm90dGxpbmdcbiAgICAgICAgICAgICAgICB2YXIgdGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWROZXh0SW1hZ2UoKTsgLy8gQ29udGludWUgdGhyZWFkIGFmdGVyIHRpbWVvdXRcbiAgICAgICAgICAgICAgICAgICAgY2xlYW5UaHJvdHRsZSh0aW1lb3V0SWQpOyAvLyBSZW1vdmUgdGltZW91dCBmcm9tIHRoZSBsaXN0IGJlY2F1c2UgaXQgaGFzIGZpcmVkOyBXZSB0cmFjayBhY3RpdmUgdGltZW91dHMgb25seVxuICAgICAgICAgICAgICAgIH0sIDQgKiBmcGkgKiB0b3RhbENvbm5lY3Rpb25zKTsgLy8gUGVyaW9kaWNhbGx5IHBpbmcgaWYgd2UgY2FuIHJlc3VtZSBkb3dubG9hZGluZ1xuXG4gICAgICAgICAgICAgICAgbG9hZGluZ1Rocm90dGxlVGltZW91dElkcy5wdXNoKHRpbWVvdXRJZCk7IC8vIFJlY29yZCB0aGlzIHRpbWVvdXQgLSBzbyB3ZSBjYW4gcXVpY2tseSBtb3ZlIHRvIGRvd25sb2FkaW5nIHNvbWV0aGluZyBkaWZmZXJlbnRcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyZWFkcy0tOyAvLyBPdGhlcndpc2Ugc3RvcCBkb3dubG9hZGluZyBieSBraWxsaW5nIGN1cnJlbnQgdGhyZWFkXG4gICAgICAgICAgICAgICAgaXNMb2FkaW5nQmxvY2tlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJRiBFVkVSWVRISU5HIElTIEZJTkU6XG5cbiAgICAgICAgICAgIHdoaWxlIChuZXh0TG9hZGluZ1BvcyA8IHZpZGVvTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgLy8gRmluZCBuZXh0IGltYWdlIHRvIGxvYWQgYnkgaXRlcmF0aW5nIG92ZXIgdGhlIGFycmF5XG4gICAgICAgICAgICAgICAgaWYgKGltYWdlc1tuZXh0TG9hZGluZ1Bvc10pIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dExvYWRpbmdQb3MgKz0gbG9hZFNraXA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZEltYWdlKG5leHRMb2FkaW5nUG9zKTtcbiAgICAgICAgICAgICAgICAgICAgbmV4dExvYWRpbmdQb3MgKz0gbG9hZFNraXA7IC8vIFNldCBwb3NpdGlvbiB0byBzdGFydCB0aGUgbmV3IHNlYXJjaCBmcm9tXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gU3VjY2Vzc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbG9hZFRoaWNrZW5pbmdTdGFnZSsrOyAvLyBJZiB3ZSBkaWQgbm90IHJldHVybiwgaXQgbWVhbnMgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmRcblxuICAgICAgICAgICAgaWYgKGlzVmlkZW9XYWl0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2Ugd2FudGVkIHRvIHBsYXksIGJ1dCBjb3VsZCBub3QsIHN0YXJ0IHBsYXlpbmdcbiAgICAgICAgICAgICAgICBzdGFydFBsYXlpbmcoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRvdGFsQ2FjaGVkIDwgdmlkZW9MZW5ndGggJiYgbG9hZFRoaWNrZW5pbmdTdGFnZSA8IDMpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGRvd25sb2FkZWQgdG8gdGhlIGVuZCBidXQgaGF2ZSBcImhvbGVzXCIgaW4gdGhlIG1pZGRsZSAocGx1cyBwcmV2ZW50IHBvc3NpYmxlIHJlY3Vyc2lvbilcblxuICAgICAgICAgICAgICAgIGlmIChsb2FkVGhpY2tlbmluZ1N0YWdlID09PSAxICYmIGxvYWRTa2lwID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGFyZSBza2lwcGluZyBmcmFtZXMgLSBwdXQgYWxsIGRvd25sb2FkaW5nIHRocmVhZHMgdG8gZml4IHRoZSBob2xlcyB3aGlsZSBwbGF5aW5nLCBhbmQgbG9hZCB0aGUgcmVzdCBvZiB0aGUgdmlkZW8gaW4gdGhlIGJlc3QgcG9zc2libGUgcXVhbGl0eVxuICAgICAgICAgICAgICAgICAgICBuZXh0TG9hZGluZ1BvcyA9IHBsYXlpbmdQb3MgKyAvLyBwcmVkaWN0IHRoZSBwb3NpdGlvbiBmcm9tIHdoaWNoIHdlIGNhbiBsb2FkIHdpdGhvdXQgc2tpcHBpbmcgdG8gdGhlIHZlcnkgZW5kOlxuICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKGdldEJ1ZmZlclNpemUoKSk7IC8vIGFuZCBkb3dubG9hZGluZyBzcGVlZCB3aXRoIHRoZSBoZWxwIG9mIHdpc2UgZnVuY3Rpb24gcmV0dXJuaW5nIHJlYWwtdGltZSBidWZmZXIgc2l6ZSBkZXBlbmRpbmcgb24gZG93bmxvYWQgc3BlZWRcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9hZFNraXAoMSk7IC8vIFRoaXMgcmVjb3JkcyB0aGUgcG9zaXRpb24gZnJvbSB3aGljaCB3ZSBsb2FkIHdpdGhvdXQgc2tpcHBpbmdcbiAgICAgICAgICAgICAgICAgICAgY2xlYW5pbmdUb2xlcmFuY2UgPSBtZW1Dcml0aWNhbCAtIDUwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHRMb2FkaW5nUG9zID0gMDsgLy8gT3RoZXJ3aXNlIGNoZWNrIHRoZSB2aWRlbyBmb3IgaG9sZXMgZnJvbSB0aGUgdmVyeSBiZWdpbm5pbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lbUNyaXRpY2FsID4gdmlkZW9MZW5ndGggLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJIGhhdmUgYW4gaWRlYSBvZiBvcHRpbWl6aW5nIHRoZSB2aWRlbyBmb3Igc2VlazpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRTa2lwID0gMTsgLy8gaWYgaXQncyBwb3NzaWJsZSwgZG93bmxvYWQgdGhlIHZpZGVvIGVudGlyZWx5XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkU2tpcCA9IDI7IC8vIGlmIG5vdCwgZG93bmxvYWQgd2l0aCBmcmFtZSBza2lwcGluZy4gVGhpcyBsb3dlcnMgdGhlIHZpZGVvIHF1YWxpdHksIGJ1dCBhbGxvd3MgdG8gc2VlayBvdmVyIHRoZSBtYXhpbXVtIHBhcnQgb2YgdGhlIHZpZGVvIHZpZGVvIGluc3RhbnRseVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbG9hZE5leHRJbWFnZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJlYWRzLS07XG4gICAgICAgICAgICAgICAgaXNMb2FkaW5nQmxvY2tlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhbk1lbW9yeSgpIHtcblxuICAgICAgICBmdW5jdGlvbiBjbGVhbkltYWdlKGkpIHtcbiAgICAgICAgICAgIHZhciBpbWcgPSBpbWFnZXNbaV07XG4gICAgICAgICAgICBpZiAoaW1nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbXBsZXRlID0gaW1nLmNvbXBsZXRlO1xuICAgICAgICAgICAgICAgIGlmICghY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgYXJlIGRlbGV0aW5nIGN1cnJlbnRseSBkb3dubG9hZGluZyBpbWFnZVxuICAgICAgICAgICAgICAgICAgICB0aHJlYWRzLS07IC8vIGl0IG1lYW5zIHdlIGtpbGwgb25lIGRvd25sb2FkaW5nIHRocmVhZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWxldGVJbWFnZShpbWcsIGksIGNvbXBsZXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpID0gMDtcblxuICAgICAgICB3aGlsZSAoaSA8IHBsYXlpbmdQb3MgJiYgdG90YWxDYWNoZWQgPj0gY2xlYW5pbmdUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgIGNsZWFuSW1hZ2UoaSsrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGkgPSB2aWRlb0xlbmd0aCAtIDE7XG4gICAgICAgIHdoaWxlICh0b3RhbENhY2hlZCA+PSBjbGVhbmluZ1RvbGVyYW5jZSkge1xuICAgICAgICAgICAgY2xlYW5JbWFnZShpLS0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzdGFydCgpIHtcbiAgICAgICAgcGxheWluZ1BvcyA9IDA7XG4gICAgICAgIHN0b3BQbGF5aW5nKHsgZGVsYXllZDogZmFsc2UgfSk7XG4gICAgICAgIGRyYXdGcmFtZSgpO1xuXG4gICAgICAgIGlmIChpc0xvb3ApIHtcbiAgICAgICAgICAgIGxvYWRWaWRlbygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNWaWRlb1RyeWluZ1RvUGxheSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZHJhd0ZyYW1lKCkge1xuXG4gICAgICAgIGNhbnZhc0VsLmN1cnJlbnRUaW1lID0gcGxheWluZ1BvcyAvIEZQUztcblxuICAgICAgICB2YXIgaW1nID0gaW1hZ2VzW3BsYXlpbmdQb3NdLFxuICAgICAgICAgICAgY29tcGxldGUgPSBpbWcgJiYgaW1nLmNvbXBsZXRlO1xuXG4gICAgICAgIGlmICh0eXBlb2YgaW1nID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGVpZ2h0ID0gaW1nLmhlaWdodDtcblxuICAgICAgICB2YXIgeCA9IDAsXG4gICAgICAgICAgICB5ID0gMDtcblxuICAgICAgICAvKiBhZGp1c3QgcG9zdGlvbiAqL1xuICAgICAgICBpZiAoaW1nLndpZHRoID4gaW1nLmhlaWdodCkge1xuICAgICAgICAgICAgeSA9IChjYW52YXNIZWlnaHQgLSBpbWcuaGVpZ2h0KSAvIDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4ID0gKGNhbnZhc1dpZHRoIC0gaW1nLndpZHRoKSAvIDI7XG5cbiAgICAgICAgICAgIGlmIChpbWcuaGVpZ2h0IDwgY2FudmFzSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgeSA9IChjYW52YXNIZWlnaHQgLSBpbWcuaGVpZ2h0KSAvIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29tcGxldGUpIHtcbiAgICAgICAgICAgIC8vIGhhbmRsZSBicm9rZW4gZnJhbWVcbiAgICAgICAgICAgIGNhbnZhc0N0eC5kcmF3SW1hZ2UoaW1nLCB4LCB5LCBpbWcud2lkdGgsIGltZy5oZWlnaHQpOyAvLyBkcmF3IHRoZSBmcmFtZVxuXG4gICAgICAgICAgICBpZiAodG90YWxDYWNoZWQgPiBjbGVhbmluZ1RvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZUltYWdlKGltZywgcGxheWluZ1BvcywgY29tcGxldGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpdGVyYXRlUGxheWluZ1BvcygpIHtcbiAgICAgICAgbG9hZFBlckZyYW1lID0gMDtcbiAgICAgICAgcGxheWluZ1BvcysrO1xuXG4gICAgICAgIGlmIChwbGF5aW5nUG9zID49IHNldFNraXBwaW5nVG8xKSB7XG4gICAgICAgICAgICBzZXRQbGF5U2tpcCgxKTtcbiAgICAgICAgfSBlbHNlIGlmIChwbGF5aW5nUG9zID4gc2V0U2tpcHBpbmdUbzIpIHtcbiAgICAgICAgICAgIHNldFBsYXlTa2lwKDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBsYXlTa2lwID09PSAyKSB7XG4gICAgICAgICAgICBwbGF5aW5nUG9zKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgYXV0b0luY3JlbWVudCA9IDAsXG4gICAgICAgIGludGVydmFscyA9IHt9O1xuXG4gICAgdmFyIGNsZWFyQ29ycmVjdGluZ0ludGVydmFsID0gZnVuY3Rpb24gY2xlYXJDb3JyZWN0aW5nSW50ZXJ2YWwoaWQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGludGVydmFsc1tpZF0pO1xuICAgICAgICBkZWxldGUgaW50ZXJ2YWxzW2lkXTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcGxheUZyYW1lKCkge1xuXG4gICAgICAgIGlmIChkb1N5bmNocm9uaXNhdGlvbkFzYXAgfHwgcGxheWluZ1BvcyAlIDcgPT09IDApIHtcbiAgICAgICAgICAgIGRvU3luY2hyb25pc2F0aW9uQXNhcCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRyYXdGcmFtZSgpKSB7XG4gICAgICAgICAgICBpdGVyYXRlUGxheWluZ1BvcygpO1xuICAgICAgICAgICAgaWYgKHBsYXlpbmdQb3MgPj0gdmlkZW9MZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjYW52YXNFbC5kaXNwYXRjaEV2ZW50KGVuZEV2ZW50KTtcbiAgICAgICAgICAgICAgICByZXN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzUHJldmlld1Nob3duICYmICFsb2FkVGhpY2tlbmluZ1N0YWdlICYmIHZpZGVvTGVuZ3RoID4gbmV4dExvYWRpbmdQb3MgJiYgbmV4dExvYWRpbmdQb3MgLSBwbGF5aW5nUG9zIDwgdG90YWxDb25uZWN0aW9ucykge1xuICAgICAgICAgICAgICAgIHNldExvYWRTa2lwKDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVsYXlGcmFtZXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGF5RnJhbWVzKCkge1xuICAgICAgICB2YXIgcGF0dGVybiA9IGdldFBhdHRlcm4ocGxheWluZ1Bvcyk7XG5cbiAgICAgICAgaWYgKHBhdHRlcm4gPT09IDAgfHwgcGF0dGVybiA9PT0gMSkge1xuICAgICAgICAgICAgcGxheWluZ1BvcysrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXR0ZXJuID09PSAtMSkge1xuICAgICAgICAgICAgcGxheWluZ1BvcyArPSAyO1xuICAgICAgICB9IGVsc2UgaWYgKHBhdHRlcm4gPT09IDIpIHtcbiAgICAgICAgICAgIHBsYXlpbmdQb3MrKzsgLy8gZ2V0IGluIHN5bmMgd2l0aCBmcmFtZXMgc2tpcHBpbmdcbiAgICAgICAgICAgIHNldExvYWRTa2lwKDIpOyAvLyBzZXQgc2tpcHBpbmcsIGl0IGxvb2tzIGxpa2Ugd2UgY2FuJ3QgZG93bmxvYWQgdmlkZW8gaW4gZ29vZCBxdWFsaXR5XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRMb2FkU2tpcCgyKTsgLy8gc2V0IHNraXBwaW5nLCBpdCBsb29rcyBsaWtlIHdlIGNhbid0IGRvd25sb2FkIHZpZGVvIGluIGdvb2QgcXVhbGl0eVxuXG4gICAgICAgICAgICBpZiAobmV4dExvYWRpbmdQb3MgPCBwbGF5aW5nUG9zIHx8XG4gICAgICAgICAgICAvL25leHRMb2FkaW5nUG9zIC0gcGxheWluZ1BvcyA+IDEwMCB8fFxuICAgICAgICAgICAgZnJhbWVzRGVsYXllZCA+IDIgKiBzeW5jVG9sZXJhbmNlKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2RlbGF5ZWQnKTtcbiAgICAgICAgICAgICAgICBzdG9wUGxheWluZyh7IGRlbGF5ZWQ6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgbG9hZFZpZGVvKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmcmFtZXNEZWxheWVkKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQYXR0ZXJuKGluZGV4KSB7XG4gICAgICAgIHZhciBpbWcgPSBpbWFnZXNbKytpbmRleF07IC8vIGNoZWNrIHdlYXRoZXIgd2UgcmVhY2hlZCBhbiBhcmVhIGxvYWRlZCB3aXRoIGxvYWRTa2lwID0gMlxuICAgICAgICBpbWcgPSBpbWcgJiYgaW1nLmNvbXBsZXRlOyAvLyByZWNvZ25pemUgdGhlIHBhdHRlcm4gd2hlcmUgZXZlcnkgc2Vjb25kIGltYWdlIGlzIHNraXBwZWRcbiAgICAgICAgdmFyIGltZzEgPSBpbWFnZXNbKytpbmRleF07XG4gICAgICAgIGltZzEgPSBpbWcxICYmIGltZzEuY29tcGxldGU7XG4gICAgICAgIHZhciBpbWcyID0gaW1hZ2VzWysraW5kZXhdO1xuICAgICAgICBpbWcyID0gaW1nMiAmJiBpbWcyLmNvbXBsZXRlO1xuICAgICAgICBpZiAoaW1nICYmICFpbWcxICYmIGltZzIpIHtcbiAgICAgICAgICAgIC8vIGl0IGxvb2tzIGxpa2UgdGhlIGltYWdlcyBhcmUgbG9hZGVkIG9rIHdpdGggbG9hZFN0ZXAgPT09IDJcbiAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICB9IGVsc2UgaWYgKGltZyAmJiBpbWcxICYmIGltZzIpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9IGVsc2UgaWYgKCFpbWcgJiYgaW1nMSAmJiAhaW1nMikge1xuICAgICAgICAgICAgcmV0dXJuIC0yO1xuICAgICAgICB9IGVsc2UgaWYgKGltZzEgJiYgaW1nMikge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9IGVsc2UgaWYgKGltZyAmJiBpbWcxKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0YXJ0UGxheWluZygpIHtcbiAgICAgICAgc3RhcnRWaWRlbygpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0b3BQbGF5aW5nKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zLmRlbGF5ZWQgJiYgcGxheWluZ1BvcyAhPSAwKSB7XG4gICAgICAgICAgICBjYW52YXNFbC5kaXNwYXRjaEV2ZW50KHBhdXNlRXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGNsZWFyVGltZW91dChjYWxjU3BlZWRUaW1lb3V0SWQpO1xuICAgICAgICBwZXJjZW50YWdlRWwuY2xhc3NOYW1lID0gJ3ZwLWhpZGRlbiBzcGlubmVyJztcblxuICAgICAgICBpc1ZpZGVvV2FpdGluZyA9IGZhbHNlO1xuICAgICAgICB2aWRlb1N0YXRlID0gdmlkZW9TdG9wcGVkO1xuXG4gICAgICAgIGNsZWFyQ29ycmVjdGluZ0ludGVydmFsKHZpZGVvSW50ZXJ2YWxJZCk7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc3RhcnRWaWRlb09uSW1hZ2VMb2FkVGltZW91dElkKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdGFydFZpZGVvKCkge1xuICAgICAgICBjYW52YXNFbC5kaXNwYXRjaEV2ZW50KHBsYXlFdmVudCk7XG4gICAgICAgIGNsZWFyVGltZW91dChjYWxjU3BlZWRUaW1lb3V0SWQpO1xuICAgICAgICBwZXJjZW50YWdlRWwuY2xhc3NOYW1lID0gJ3ZwLWhpZGRlbiBzcGlubmVyJztcblxuICAgICAgICBpc1ZpZGVvV2FpdGluZyA9IGZhbHNlO1xuICAgICAgICB2aWRlb1N0YXRlID0gdmlkZW9QbGF5aW5nO1xuICAgICAgICBpc1ByZXZpZXdTaG93biA9IHRydWU7XG5cbiAgICAgICAgY2xlYXJDb3JyZWN0aW5nSW50ZXJ2YWwodmlkZW9JbnRlcnZhbElkKTtcbiAgICAgICAgdmlkZW9JbnRlcnZhbElkID0gc2V0Q29ycmVjdGluZ0ludGVydmFsKHBsYXlGcmFtZSk7XG4gICAgICAgIGNsZWFyVGltZW91dChzdGFydFZpZGVvT25JbWFnZUxvYWRUaW1lb3V0SWQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvYWRWaWRlbygpIHtcblxuICAgICAgICBhZGp1c3RQbGF5aW5nUG9zKCk7XG5cbiAgICAgICAgaWYgKHBsYXlpbmdQb3MgPj0gdmlkZW9MZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIHNvbWUgZXJyb3IgcHJvdGVjdGlvblxuICAgICAgICAgICAgcmVzdGFydCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjdXJyZW50SW1hZ2VMb2FkZWQgPSBpbWFnZXNbcGxheWluZ1Bvc107XG4gICAgICAgIGN1cnJlbnRJbWFnZUxvYWRlZCA9IGN1cnJlbnRJbWFnZUxvYWRlZCAmJiBjdXJyZW50SW1hZ2VMb2FkZWQuY29tcGxldGU7XG5cbiAgICAgICAgcmVzZXRMb2FkRGF0YShjdXJyZW50SW1hZ2VMb2FkZWQpO1xuXG4gICAgICAgIHdoaWxlICh0aHJlYWRzIDwgdG90YWxDb25uZWN0aW9ucyAmJiAhaXNMb2FkaW5nQmxvY2tlZCkge1xuICAgICAgICAgICAgLy8gc3RhcnQgbG9hZGluZyBtYXhDb25uZWN0aW9ucyBpbWFnZXNcbiAgICAgICAgICAgIGxvYWROZXh0SW1hZ2UoKTtcbiAgICAgICAgICAgIHRocmVhZHMrKztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjdXJyZW50SW1hZ2VMb2FkZWQpIHtcbiAgICAgICAgICAgIC8vIGlmIChpc1ZpZGVvVHJ5aW5nVG9QbGF5ICYmIChuZXh0TG9hZGluZ1BvcyAtIHBsYXlpbmdQb3MgPiBidWZmZXJTaXplKSkge1xuICAgICAgICAgICAgLy8gICAgIHN0YXJ0UGxheWluZygpO1xuICAgICAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgICAgIC8vICAgICBwbGF5RnJhbWUoKTtcbiAgICAgICAgICAgIC8vICAgICBpc1ByZXZpZXdTaG93biA9IHRydWU7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAvKiBmaXggcGxheSBzaHV0dGVyIC0gTkogKi9cbiAgICAgICAgICAgIHN0YXJ0UGxheWluZygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICAgICAgaXNWaWRlb1RyeWluZ1RvUGxheSA9IHRydWU7XG4gICAgICAgIGxvYWRWaWRlbygpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgIGlzVmlkZW9UcnlpbmdUb1BsYXkgPSBmYWxzZTtcbiAgICAgICAgc3RvcFBsYXlpbmcoeyBkZWxheWVkOiBmYWxzZSB9KTtcbiAgICB9XG5cbiAgICAvKiByZXBsYXkgdmlkZW8sIGF1ZGlvIHBsYXkgYnkgZGVmYXVsdCAtIE5KICovXG4gICAgZnVuY3Rpb24gcmVwbGF5KCkge1xuICAgICAgICBjYW52YXNFbC5kaXNwYXRjaEV2ZW50KHJlcGxheUV2ZW50KTtcbiAgICAgICAgcmVzdGFydCgpO1xuICAgICAgICBzdGFydFBsYXlpbmcoKTtcbiAgICAgICAgaXNUcnlpbmcyUGxheSA9IHRydWU7XG4gICAgICAgIGlzVmlkZW9UcnlpbmdUb1BsYXkgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIGZ1bmN0aW9uIHRvIGdldCB0aGUgY3VycmVudCBwbGF5aW5nIHRpbWUgLSBBcHJpbFxuICAgIGZ1bmN0aW9uIGN1cnJlbnRUaW1lKCkge1xuICAgICAgICByZXR1cm4gcGxheWluZ1BvcyAvIEZQUztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVJbWFnZXNVcmwoaSkge1xuICAgICAgICBpbWFnZXNVcmwgPSBpO1xuICAgICAgICBjb25zb2xlLmxvZyhpbWFnZXNVcmwpO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlSW1hZ2VzVXJsID0gdXBkYXRlSW1hZ2VzVXJsO1xuXG4gICAgdGhpcy5wbGF5ID0gcGxheTtcblxuICAgIHRoaXMuc3RvcCA9IHN0b3A7XG5cbiAgICB0aGlzLnBhdXNlID0gc3RvcDtcblxuICAgIHRoaXMucmVwbGF5ID0gcmVwbGF5O1xuXG4gICAgdGhpcy5jdXJyZW50VGltZSA9IGN1cnJlbnRUaW1lO1xuXG4gICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlSFRNTCgpIHtcblxuICAgICAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIHZhciAkID0gdC5xdWVyeVNlbGVjdG9yLmJpbmQodCk7XG5cbiAgICAgICAgdC5pbm5lckhUTUwgPSAnPGNhbnZhcyBpZD12cC1jYW52YXM+PC9jYW52YXM+IFxcXHJcbiAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9dnAtcGVyY2VudGFnZSBjbGFzcz12cC1oaWRkZW4+PC9kaXY+JztcblxuICAgICAgICBjYW52YXNFbCA9ICQoJyN2cC1jYW52YXMnKTtcbiAgICAgICAgcGVyY2VudGFnZUVsID0gJCgnI3ZwLXBlcmNlbnRhZ2UnKTtcbiAgICAgICAgY2FudmFzQ3R4ID0gY2FudmFzRWwuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIH1cblxuICAgIGRldGVjdE9sZFBob25lcygpO1xuXG4gICAgY3JlYXRlSFRNTCgpO1xuXG4gICAgcmVzaXplVmlkZW8ob3B0aW9ucy5kZWZhdWx0RGltZW5zaW9uKTtcblxuICAgIGlmIChvcHRpb25zLmF1dG9wbGF5KSB7XG4gICAgICAgIGlzVmlkZW9UcnlpbmdUb1BsYXkgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlzVmlkZW9UcnlpbmdUb1BsYXkgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBsb2FkVmlkZW8oKTtcblxuICAgIG5vSW50ZXJuZXRUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChwbGF5aW5nUG9zID09PSAwICYmIHRvdGFsTG9hZGVkID09PSAwKSB7XG4gICAgICAgICAgICBwZXJjZW50YWdlRWwuaW5uZXJUZXh0ID0gJ25vIGludGVybmV0JztcbiAgICAgICAgICAgIHBlcmNlbnRhZ2VFbC5jbGFzc05hbWUgPSAndnAtaGlkZGVuIHNwaW5uZXInO1xuICAgICAgICB9XG4gICAgfSwgODAwMCk7XG5cbiAgICB2YXIgc2V0Q29ycmVjdGluZ0ludGVydmFsID0gZnVuY3Rpb24gc2V0Q29ycmVjdGluZ0ludGVydmFsKGZ1bmMpIHtcbiAgICAgICAgdmFyIGlkID0gYXV0b0luY3JlbWVudCsrLFxuICAgICAgICAgICAgcGxhbm5lZCA9IERhdGUubm93KCkgLSBmcGk7XG4gICAgICAgIHZhciBvID0gcGxhbm5lZCxcbiAgICAgICAgICAgIHg7XG5cbiAgICAgICAgZnVuY3Rpb24gdGljaygpIHtcbiAgICAgICAgICAgIGZ1bmMoKTtcbiAgICAgICAgICAgIGlmIChpbnRlcnZhbHNbaWRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwbGFubmVkICs9IGZwaTtcbiAgICAgICAgICAgICAgICB4ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBwbGFubmVkIC0geDtcbiAgICAgICAgICAgICAgICBpZiAoZGVsdGEgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIEBOT1RFICBkaXNhYmxlIHRvIGZpeCBpbnZhbGlkIGN1cnJlbnQgdGltZSB3aGVuIHRhYiBpbmFjdGl2ZSAtIE5KICovXG4gICAgICAgICAgICAgICAgICAgIC8vcGxheWluZ1BvcyAtPSBNYXRoLnJvdW5kKGRlbHRhIC8gZnBpKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGxheWluZ1BvcyA+PSB2aWRlb0xlbmd0aCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBWaWRlbyBTdG9wcyBhbmQgbm90IHJlc3RhcnQsIGZpcmUgZW5kIGV2ZW50IC0gTkogKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNMb29wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzRWwuZGlzcGF0Y2hFdmVudChlbmRFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyogQE5PVEUgdGltZSBjaGFuZ2UgZnJvbSBkZWx0YSB0byBvcmlnRnBpIHRvIGZpeCBpbnZhbGlkIGN1cnJlbnQgdGltZSB3aGVuIHRhYiBpbmFjdGl2ZSAtIE5KICovXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWxzW2lkXSA9IHNldFRpbWVvdXQodGljaywgb3JpZ0ZwaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpbnRlcnZhbHNbaWRdID0gc2V0VGltZW91dCh0aWNrLCAwKTtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH07XG5cbiAgICBjYW52YXNFbC5wbGF5ID0gdGhpcy5wbGF5O1xuICAgIGNhbnZhc0VsLnBhdXNlID0gdGhpcy5wYXVzZTtcbiAgICBjYW52YXNFbC5yZXBsYXkgPSB0aGlzLnJlcGxheTtcbiAgICBjYW52YXNFbC5kdXJhdGlvbiA9IE1hdGguZmxvb3IoZHVyYXRpb24pO1xuICAgIGNhbnZhc0VsLnVwZGF0ZUltYWdlc1VybCA9IHRoaXMudXBkYXRlSW1hZ2VzVXJsO1xuXG4gICAgcmV0dXJuIGNhbnZhc0VsO1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gTW9iaWxlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL21vYmlsZS5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _madsCustom = __webpack_require__(1);\n\nvar _madsCustom2 = _interopRequireDefault(_madsCustom);\n\n__webpack_require__(2);\n\nvar _video = __webpack_require__(0);\n\nvar _video2 = _interopRequireDefault(_video);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* eslint-disable */\n\n\nvar AdUnit = function (_Mads) {\n    _inherits(AdUnit, _Mads);\n\n    function AdUnit() {\n        _classCallCheck(this, AdUnit);\n\n        var _this2 = _possibleConstructorReturn(this, (AdUnit.__proto__ || Object.getPrototypeOf(AdUnit)).call(this));\n\n        var _this = _this2;\n\n        return _this2;\n    }\n\n    _createClass(AdUnit, [{\n        key: \'render\',\n        value: function render() {\n            // console.log(\'data\', this.data);\n\n            // this.custTracker = [\'http://www.tracker.com?type={{rmatype}}&tt={{rmatt}}\'];\n\n            // this.tracker(\'CTR\', \'test\');\n\n            // this.linkOpener(\'http://www.google.com\');\n\n            return \'\\n        <div class="container">\\n            <div id="orientation">\\n                <img src="\' + this.data.orientation + \'"/>\\n            </div>\\n            <div class="video">\\n                <div id="ff_layer_0"><div id="video-container-1" class="video-container" style="height: \' + this.data.height + \'px; width: \' + this.data.width + \'px">\\n                    <a id="hosted-video-clickable-area-1" href="#" class="hosted-video-clickable-area"></a>\\n                    <div id="default-control-audio-container-1" class="default-control-audio-container">\\n                        <img src="//cdn.richmediaads.com/html5/images/media/video/mute-v3.png" class="dc-unmute " style="display:none;">   \\n                        <img src="//cdn.richmediaads.com/html5/images/media/video/unmute-v3.png" class="dc-mute" style="display: block;">\\n                    </div>\\n                    <div id="default-control-play-container-1" class="default-control-play-container">\\n                        <img src="//cdn.richmediaads.com/html5/images/media/video/play-v3.png" class="dc-play" style="display: block;">              \\n                        <img src="//cdn.richmediaads.com/html5/images/media/video/pause-v3.png" class="dc-pause">\\n                    </div>\\n                    <div id="default-control-replay-container-1" class="default-control-replay-container">\\n                        <img src="//cdn.richmediaads.com/html5/images/media/video/replay-v3.png" class="dc-replay">\\n                        <span></span>\\n                    </div>\\n                    <video id="video" width="\' + this.data.width + \'" height="\' + this.data.height + \'" muted=""></video>\\n                </div></div>\\n            </div>\\n            <div class="icons">\\n\\n                <div class="first icon slide-in-fwd-center">\\n                    <div class="line"></div>\\n                    <img src="\' + this.data.icon_one + \'" class="click_popup jello-horizontal" target="one"/>\\n                </div>\\n                \\n                <div class="second icon slide-in-fwd-center">\\n                    <div class="line"></div>\\n                    <img src="\' + this.data.icon_two + \'" class="click_popup jello-horizontal" target="two"/>\\n                </div>\\n                \\n                <div class="third icon slide-in-fwd-center">\\n                    <div class="line"></div>\\n                    <img src="\' + this.data.icon_three + \'" class="click_popup jello-horizontal" target="three"/>\\n                </div>\\n                \\n                <div class="forth icon slide-in-fwd-center">\\n                    <div class="line"></div>\\n                    <img src="\' + this.data.icon_four + \'" class="click_popup jello-horizontal" target="four"/>\\n                </div>\\n                <img src="\' + this.data.banner_one + \'" id="ending-image"/>\\n            </div>\\n            <div class="popup">\\n                <img src="\' + this.data.banner_one + \'" class="banner one"/>\\n                <img src="\' + this.data.banner_two + \'" class="banner two"/>\\n                <img src="\' + this.data.banner_three + \'" class="banner three"/>\\n                <img src="\' + this.data.banner_four + \'" class="banner four"/>\\n\\n                <div class="close fade-in">Resume Video</div>\\n            </div>\\n        </div>\\n    \';\n        }\n    }, {\n        key: \'style\',\n        value: function style() {\n            var links = [];\n\n            return [].concat(links, [\'\\n      body {\\n      }\\n      \']);\n        }\n    }, {\n        key: \'events\',\n        value: function events() {\n            var _this3 = this;\n\n            this.orientation = document.getElementById(\'orientation\');\n            this.video = document.querySelector(\'.video\');\n            this.icons = document.querySelector(\'.icons\');\n\n            if (this.data.showOrientation) {\n                setTimeout(function () {\n                    _this3.orientation.style.display = \'none\';\n                }, 2000);\n\n                setTimeout(function () {\n                    _this3.video.style.display = \'block\';\n                    _this3.icons.style.display = \'block\';\n                    _this3.loadDelay();\n                }, 1000);\n            } else {\n                this.orientation.style.display = \'none\';\n                this.video.style.display = \'block\';\n                this.icons.style.display = \'block\';\n                this.loadDelay();\n            }\n        }\n    }, {\n        key: \'loadDelay\',\n        value: function loadDelay() {\n            var _this4 = this;\n\n            var param = { "w": 480, "h": 320, "fps": 10, "frames": 204, "length": 20.417, "src": { "mp4": "https://rmarepo.richmediaads.com/2594/videos/iLotte_Video_20s.mp4", "webm": "https://rmarepo.richmediaads.com/2594/videos/iLotte_Video_20s.webm", "ogg": "https://rmarepo.richmediaads.com/2594/videos/iLotte_Video_20s.ogg", "img_url": "https://rmarepo.richmediaads.com/2594/images/autoplay/j8okn/image_", "audio_url": "https://rmarepo.richmediaads.com/2594/images/autoplay/j8okn/audio.mp3", "file": "https://rmarepo.richmediaads.com/2594/videos/iLotte_Video_20s.mp4", "size": 0 }, "coverImage": { "src": "", "action": 0, "lpUrl": "" }, "endingImage": { "src": "", "action": 0, "lpUrl": "" }, "control": 1, "autoplay": "1", "clickthrough": { "txt": "Click Here", "lpUrl": "" }, "extTrackers": { "ytPlay": "", "enabled": true } };\n            // var param = {"w":336,"h":280,"fps":10,"frames":204,"length":20.417,"src":{"mp4":"https://rmarepo.richmediaads.com/2594/videos/iLotte_Video_20s.mp4","webm":"https://rmarepo.richmediaads.com/2594/videos/iLotte_Video_20s.webm","ogg":"https://rmarepo.richmediaads.com/2594/videos/iLotte_Video_20s.ogg","img_url":"https://rmarepo.richmediaads.com/2594/images/autoplay/2e48w1u/image_","audio_url":"https://rmarepo.richmediaads.com/2594/images/autoplay/2e48w1u/audio.mp3","file":"https://rmarepo.richmediaads.com/2594/videos/iLotte_Video_20s.mp4","size":0},"coverImage":{"src":"","action":0,"lpUrl":""},"endingImage":{"src":"","action":0,"lpUrl":""},"control":1,"autoplay":"1","clickthrough":{"txt":"Click Here","lpUrl":""},"extTrackers":{"ytPlay":"","enabled":true}};\n\n            this.endImage = document.getElementById(\'ending-image\');\n            this.ended = false;\n            this.video = new _video2.default({\n                app: this,\n                selector: \'#ff_hostedvideo_1\',\n                data: param,\n                layer: 0,\n                id: 1,\n                preview: this.preview,\n                animationDelay: 0, //temporary - check used in video js\n                animation: true,\n                replay: false,\n                quality: \'mid\', // hd, low, mid, empty for original, default is low\n                events: {\n                    onPlaying: function onPlaying(time) {\n                        if (time >= 1) {\n                            document.querySelector(\'.first.icon\').style.display = \'block\';\n                        }\n\n                        if (time >= 1.5) {\n                            document.querySelector(\'.second.icon\').style.display = \'block\';\n                        }\n\n                        if (time >= 2.5) {\n                            document.querySelector(\'.third.icon\').style.display = \'block\';\n                        }\n\n                        if (time >= 3.5) {\n                            document.querySelector(\'.forth.icon\').style.display = \'block\';\n                        }\n                    },\n                    onEnded: function onEnded() {\n                        _this4.endImage.style.display = \'block\';\n                        _this4.ended = true;\n                    }\n                }\n            });\n\n            this.endImage.addEventListener(\'click\', function () {\n                _this4.linkOpener(_this4.data.clickthrough_one);\n                _this4.tracker(\'CTR\', \'endimg_clickthrough\');\n            });\n\n            var popup = document.querySelector(\'.popup\');\n            var banner = {\n                one: document.querySelector(\'.banner.one\'),\n                two: document.querySelector(\'.banner.two\'),\n                three: document.querySelector(\'.banner.three\'),\n                four: document.querySelector(\'.banner.four\')\n            };\n\n            var click_popup = document.querySelectorAll(".click_popup");\n            var close = document.querySelector(".close");\n\n            click_popup.forEach(function (click) {\n\n                click.addEventListener(\'click\', function (e) {\n\n                    var target = e.target.getAttribute(\'target\');\n\n                    _this4.tracker(\'E\', \'popup_\' + target);\n\n                    popup.style.display = \'block\';\n                    banner[target].style.display = \'block\';\n                    _this4.video.pauseVideo();\n\n                    popup.classList.add(\'slide-in-bottom\');\n                    popup.classList.remove(\'slide-out-bottom\');\n                });\n            });\n\n            close.addEventListener(\'click\', function (e) {\n\n                // popup.style.display = \'none\'\n                popup.classList.remove(\'slide-in-bottom\');\n                popup.classList.add(\'slide-out-bottom\');\n\n                setTimeout(function () {\n                    banner.one.style.display = \'none\';\n                    banner.two.style.display = \'none\';\n                    banner.three.style.display = \'none\';\n                    banner.four.style.display = \'none\';\n                }, 500);\n\n                if (!_this4.ended) {\n                    _this4.video.playVideo();\n                }\n            });\n\n            banner.one.addEventListener(\'click\', function () {\n                _this4.linkOpener(_this4.data.clickthrough_one);\n                _this4.tracker(\'CTR\', \'clickthrough_one\');\n            });\n            banner.two.addEventListener(\'click\', function () {\n                _this4.linkOpener(_this4.data.clickthrough_two);\n                _this4.tracker(\'CTR\', \'clickthrough_two\');\n            });\n            banner.three.addEventListener(\'click\', function () {\n                _this4.linkOpener(_this4.data.clickthrough_three);\n                _this4.tracker(\'CTR\', \'clickthrough_three\');\n            });\n            banner.four.addEventListener(\'click\', function () {\n                _this4.linkOpener(_this4.data.clickthrough_four);\n                _this4.tracker(\'CTR\', \'clickthrough_four\');\n            });\n        }\n    }, {\n        key: \'isMobile\',\n        value: function isMobile() {\n            if (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i)) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n    }, {\n        key: \'listen\',\n        value: function listen(options) {\n            var receiveMessage = function receiveMessage(event) {\n                // console.log(\'receiveMessage\')\n                // console.log(event)\n                options.callback(event.data);\n            };\n            window.addEventListener("message", receiveMessage, false);\n        }\n    }]);\n\n    return AdUnit;\n}(_madsCustom2.default);\n\nwindow.ad = new AdUnit();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tYWluLmpzP2UzZjYiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX21hZHNDdXN0b20gPSByZXF1aXJlKCdtYWRzLWN1c3RvbScpO1xuXG52YXIgX21hZHNDdXN0b20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWFkc0N1c3RvbSk7XG5cbnJlcXVpcmUoJy4vbWFpbi5jc3MnKTtcblxudmFyIF92aWRlbyA9IHJlcXVpcmUoJy4vanMvdmlkZW8nKTtcblxudmFyIF92aWRlbzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92aWRlbyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0gLyogZXNsaW50LWRpc2FibGUgKi9cblxuXG52YXIgQWRVbml0ID0gZnVuY3Rpb24gKF9NYWRzKSB7XG4gICAgX2luaGVyaXRzKEFkVW5pdCwgX01hZHMpO1xuXG4gICAgZnVuY3Rpb24gQWRVbml0KCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWRVbml0KTtcblxuICAgICAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEFkVW5pdC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEFkVW5pdCkpLmNhbGwodGhpcykpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF90aGlzMjtcblxuICAgICAgICByZXR1cm4gX3RoaXMyO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhBZFVuaXQsIFt7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZGF0YScsIHRoaXMuZGF0YSk7XG5cbiAgICAgICAgICAgIC8vIHRoaXMuY3VzdFRyYWNrZXIgPSBbJ2h0dHA6Ly93d3cudHJhY2tlci5jb20/dHlwZT17e3JtYXR5cGV9fSZ0dD17e3JtYXR0fX0nXTtcblxuICAgICAgICAgICAgLy8gdGhpcy50cmFja2VyKCdDVFInLCAndGVzdCcpO1xuXG4gICAgICAgICAgICAvLyB0aGlzLmxpbmtPcGVuZXIoJ2h0dHA6Ly93d3cuZ29vZ2xlLmNvbScpO1xuXG4gICAgICAgICAgICByZXR1cm4gJ1xcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJvcmllbnRhdGlvblwiPlxcbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIicgKyB0aGlzLmRhdGEub3JpZW50YXRpb24gKyAnXCIvPlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2aWRlb1wiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiZmZfbGF5ZXJfMFwiPjxkaXYgaWQ9XCJ2aWRlby1jb250YWluZXItMVwiIGNsYXNzPVwidmlkZW8tY29udGFpbmVyXCIgc3R5bGU9XCJoZWlnaHQ6ICcgKyB0aGlzLmRhdGEuaGVpZ2h0ICsgJ3B4OyB3aWR0aDogJyArIHRoaXMuZGF0YS53aWR0aCArICdweFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGEgaWQ9XCJob3N0ZWQtdmlkZW8tY2xpY2thYmxlLWFyZWEtMVwiIGhyZWY9XCIjXCIgY2xhc3M9XCJob3N0ZWQtdmlkZW8tY2xpY2thYmxlLWFyZWFcIj48L2E+XFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiZGVmYXVsdC1jb250cm9sLWF1ZGlvLWNvbnRhaW5lci0xXCIgY2xhc3M9XCJkZWZhdWx0LWNvbnRyb2wtYXVkaW8tY29udGFpbmVyXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIvL2Nkbi5yaWNobWVkaWFhZHMuY29tL2h0bWw1L2ltYWdlcy9tZWRpYS92aWRlby9tdXRlLXYzLnBuZ1wiIGNsYXNzPVwiZGMtdW5tdXRlIFwiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPiAgIFxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiLy9jZG4ucmljaG1lZGlhYWRzLmNvbS9odG1sNS9pbWFnZXMvbWVkaWEvdmlkZW8vdW5tdXRlLXYzLnBuZ1wiIGNsYXNzPVwiZGMtbXV0ZVwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7XCI+XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJkZWZhdWx0LWNvbnRyb2wtcGxheS1jb250YWluZXItMVwiIGNsYXNzPVwiZGVmYXVsdC1jb250cm9sLXBsYXktY29udGFpbmVyXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIvL2Nkbi5yaWNobWVkaWFhZHMuY29tL2h0bWw1L2ltYWdlcy9tZWRpYS92aWRlby9wbGF5LXYzLnBuZ1wiIGNsYXNzPVwiZGMtcGxheVwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7XCI+ICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi8vY2RuLnJpY2htZWRpYWFkcy5jb20vaHRtbDUvaW1hZ2VzL21lZGlhL3ZpZGVvL3BhdXNlLXYzLnBuZ1wiIGNsYXNzPVwiZGMtcGF1c2VcIj5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cImRlZmF1bHQtY29udHJvbC1yZXBsYXktY29udGFpbmVyLTFcIiBjbGFzcz1cImRlZmF1bHQtY29udHJvbC1yZXBsYXktY29udGFpbmVyXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIvL2Nkbi5yaWNobWVkaWFhZHMuY29tL2h0bWw1L2ltYWdlcy9tZWRpYS92aWRlby9yZXBsYXktdjMucG5nXCIgY2xhc3M9XCJkYy1yZXBsYXlcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj48L3NwYW4+XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIDx2aWRlbyBpZD1cInZpZGVvXCIgd2lkdGg9XCInICsgdGhpcy5kYXRhLndpZHRoICsgJ1wiIGhlaWdodD1cIicgKyB0aGlzLmRhdGEuaGVpZ2h0ICsgJ1wiIG11dGVkPVwiXCI+PC92aWRlbz5cXG4gICAgICAgICAgICAgICAgPC9kaXY+PC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImljb25zXCI+XFxuXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmaXJzdCBpY29uIHNsaWRlLWluLWZ3ZC1jZW50ZXJcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsaW5lXCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIicgKyB0aGlzLmRhdGEuaWNvbl9vbmUgKyAnXCIgY2xhc3M9XCJjbGlja19wb3B1cCBqZWxsby1ob3Jpem9udGFsXCIgdGFyZ2V0PVwib25lXCIvPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZWNvbmQgaWNvbiBzbGlkZS1pbi1md2QtY2VudGVyXCI+XFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGluZVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCInICsgdGhpcy5kYXRhLmljb25fdHdvICsgJ1wiIGNsYXNzPVwiY2xpY2tfcG9wdXAgamVsbG8taG9yaXpvbnRhbFwiIHRhcmdldD1cInR3b1wiLz5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGhpcmQgaWNvbiBzbGlkZS1pbi1md2QtY2VudGVyXCI+XFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGluZVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCInICsgdGhpcy5kYXRhLmljb25fdGhyZWUgKyAnXCIgY2xhc3M9XCJjbGlja19wb3B1cCBqZWxsby1ob3Jpem9udGFsXCIgdGFyZ2V0PVwidGhyZWVcIi8+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcnRoIGljb24gc2xpZGUtaW4tZndkLWNlbnRlclwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxpbmVcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJyArIHRoaXMuZGF0YS5pY29uX2ZvdXIgKyAnXCIgY2xhc3M9XCJjbGlja19wb3B1cCBqZWxsby1ob3Jpem9udGFsXCIgdGFyZ2V0PVwiZm91clwiLz5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJyArIHRoaXMuZGF0YS5iYW5uZXJfb25lICsgJ1wiIGlkPVwiZW5kaW5nLWltYWdlXCIvPlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3B1cFwiPlxcbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIicgKyB0aGlzLmRhdGEuYmFubmVyX29uZSArICdcIiBjbGFzcz1cImJhbm5lciBvbmVcIi8+XFxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJyArIHRoaXMuZGF0YS5iYW5uZXJfdHdvICsgJ1wiIGNsYXNzPVwiYmFubmVyIHR3b1wiLz5cXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCInICsgdGhpcy5kYXRhLmJhbm5lcl90aHJlZSArICdcIiBjbGFzcz1cImJhbm5lciB0aHJlZVwiLz5cXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCInICsgdGhpcy5kYXRhLmJhbm5lcl9mb3VyICsgJ1wiIGNsYXNzPVwiYmFubmVyIGZvdXJcIi8+XFxuXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjbG9zZSBmYWRlLWluXCI+UmVzdW1lIFZpZGVvPC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgJztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc3R5bGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3R5bGUoKSB7XG4gICAgICAgICAgICB2YXIgbGlua3MgPSBbXTtcblxuICAgICAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChsaW5rcywgWydcXG4gICAgICBib2R5IHtcXG4gICAgICB9XFxuICAgICAgJ10pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdldmVudHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZXZlbnRzKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMub3JpZW50YXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3JpZW50YXRpb24nKTtcbiAgICAgICAgICAgIHRoaXMudmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8nKTtcbiAgICAgICAgICAgIHRoaXMuaWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaWNvbnMnKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5zaG93T3JpZW50YXRpb24pIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLm9yaWVudGF0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfSwgMjAwMCk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczMuaWNvbnMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMy5sb2FkRGVsYXkoKTtcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcmllbnRhdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgdGhpcy5pY29ucy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWREZWxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdsb2FkRGVsYXknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZERlbGF5KCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBwYXJhbSA9IHsgXCJ3XCI6IDQ4MCwgXCJoXCI6IDMyMCwgXCJmcHNcIjogMTAsIFwiZnJhbWVzXCI6IDIwNCwgXCJsZW5ndGhcIjogMjAuNDE3LCBcInNyY1wiOiB7IFwibXA0XCI6IFwiaHR0cHM6Ly9ybWFyZXBvLnJpY2htZWRpYWFkcy5jb20vMjU5NC92aWRlb3MvaUxvdHRlX1ZpZGVvXzIwcy5tcDRcIiwgXCJ3ZWJtXCI6IFwiaHR0cHM6Ly9ybWFyZXBvLnJpY2htZWRpYWFkcy5jb20vMjU5NC92aWRlb3MvaUxvdHRlX1ZpZGVvXzIwcy53ZWJtXCIsIFwib2dnXCI6IFwiaHR0cHM6Ly9ybWFyZXBvLnJpY2htZWRpYWFkcy5jb20vMjU5NC92aWRlb3MvaUxvdHRlX1ZpZGVvXzIwcy5vZ2dcIiwgXCJpbWdfdXJsXCI6IFwiaHR0cHM6Ly9ybWFyZXBvLnJpY2htZWRpYWFkcy5jb20vMjU5NC9pbWFnZXMvYXV0b3BsYXkvajhva24vaW1hZ2VfXCIsIFwiYXVkaW9fdXJsXCI6IFwiaHR0cHM6Ly9ybWFyZXBvLnJpY2htZWRpYWFkcy5jb20vMjU5NC9pbWFnZXMvYXV0b3BsYXkvajhva24vYXVkaW8ubXAzXCIsIFwiZmlsZVwiOiBcImh0dHBzOi8vcm1hcmVwby5yaWNobWVkaWFhZHMuY29tLzI1OTQvdmlkZW9zL2lMb3R0ZV9WaWRlb18yMHMubXA0XCIsIFwic2l6ZVwiOiAwIH0sIFwiY292ZXJJbWFnZVwiOiB7IFwic3JjXCI6IFwiXCIsIFwiYWN0aW9uXCI6IDAsIFwibHBVcmxcIjogXCJcIiB9LCBcImVuZGluZ0ltYWdlXCI6IHsgXCJzcmNcIjogXCJcIiwgXCJhY3Rpb25cIjogMCwgXCJscFVybFwiOiBcIlwiIH0sIFwiY29udHJvbFwiOiAxLCBcImF1dG9wbGF5XCI6IFwiMVwiLCBcImNsaWNrdGhyb3VnaFwiOiB7IFwidHh0XCI6IFwiQ2xpY2sgSGVyZVwiLCBcImxwVXJsXCI6IFwiXCIgfSwgXCJleHRUcmFja2Vyc1wiOiB7IFwieXRQbGF5XCI6IFwiXCIsIFwiZW5hYmxlZFwiOiB0cnVlIH0gfTtcbiAgICAgICAgICAgIC8vIHZhciBwYXJhbSA9IHtcIndcIjozMzYsXCJoXCI6MjgwLFwiZnBzXCI6MTAsXCJmcmFtZXNcIjoyMDQsXCJsZW5ndGhcIjoyMC40MTcsXCJzcmNcIjp7XCJtcDRcIjpcImh0dHBzOi8vcm1hcmVwby5yaWNobWVkaWFhZHMuY29tLzI1OTQvdmlkZW9zL2lMb3R0ZV9WaWRlb18yMHMubXA0XCIsXCJ3ZWJtXCI6XCJodHRwczovL3JtYXJlcG8ucmljaG1lZGlhYWRzLmNvbS8yNTk0L3ZpZGVvcy9pTG90dGVfVmlkZW9fMjBzLndlYm1cIixcIm9nZ1wiOlwiaHR0cHM6Ly9ybWFyZXBvLnJpY2htZWRpYWFkcy5jb20vMjU5NC92aWRlb3MvaUxvdHRlX1ZpZGVvXzIwcy5vZ2dcIixcImltZ191cmxcIjpcImh0dHBzOi8vcm1hcmVwby5yaWNobWVkaWFhZHMuY29tLzI1OTQvaW1hZ2VzL2F1dG9wbGF5LzJlNDh3MXUvaW1hZ2VfXCIsXCJhdWRpb191cmxcIjpcImh0dHBzOi8vcm1hcmVwby5yaWNobWVkaWFhZHMuY29tLzI1OTQvaW1hZ2VzL2F1dG9wbGF5LzJlNDh3MXUvYXVkaW8ubXAzXCIsXCJmaWxlXCI6XCJodHRwczovL3JtYXJlcG8ucmljaG1lZGlhYWRzLmNvbS8yNTk0L3ZpZGVvcy9pTG90dGVfVmlkZW9fMjBzLm1wNFwiLFwic2l6ZVwiOjB9LFwiY292ZXJJbWFnZVwiOntcInNyY1wiOlwiXCIsXCJhY3Rpb25cIjowLFwibHBVcmxcIjpcIlwifSxcImVuZGluZ0ltYWdlXCI6e1wic3JjXCI6XCJcIixcImFjdGlvblwiOjAsXCJscFVybFwiOlwiXCJ9LFwiY29udHJvbFwiOjEsXCJhdXRvcGxheVwiOlwiMVwiLFwiY2xpY2t0aHJvdWdoXCI6e1widHh0XCI6XCJDbGljayBIZXJlXCIsXCJscFVybFwiOlwiXCJ9LFwiZXh0VHJhY2tlcnNcIjp7XCJ5dFBsYXlcIjpcIlwiLFwiZW5hYmxlZFwiOnRydWV9fTtcblxuICAgICAgICAgICAgdGhpcy5lbmRJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmRpbmctaW1hZ2UnKTtcbiAgICAgICAgICAgIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudmlkZW8gPSBuZXcgX3ZpZGVvMi5kZWZhdWx0KHtcbiAgICAgICAgICAgICAgICBhcHA6IHRoaXMsXG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICcjZmZfaG9zdGVkdmlkZW9fMScsXG4gICAgICAgICAgICAgICAgZGF0YTogcGFyYW0sXG4gICAgICAgICAgICAgICAgbGF5ZXI6IDAsXG4gICAgICAgICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgICAgICAgcHJldmlldzogdGhpcy5wcmV2aWV3LFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkRlbGF5OiAwLCAvL3RlbXBvcmFyeSAtIGNoZWNrIHVzZWQgaW4gdmlkZW8ganNcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IHRydWUsXG4gICAgICAgICAgICAgICAgcmVwbGF5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBxdWFsaXR5OiAnbWlkJywgLy8gaGQsIGxvdywgbWlkLCBlbXB0eSBmb3Igb3JpZ2luYWwsIGRlZmF1bHQgaXMgbG93XG4gICAgICAgICAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgICAgICAgICAgIG9uUGxheWluZzogZnVuY3Rpb24gb25QbGF5aW5nKHRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmlyc3QuaWNvbicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGltZSA+PSAxLjUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2Vjb25kLmljb24nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgPj0gMi41KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRoaXJkLmljb24nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgPj0gMy41KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcnRoLmljb24nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25FbmRlZDogZnVuY3Rpb24gb25FbmRlZCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5lbmRJbWFnZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5lbmRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5lbmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpczQubGlua09wZW5lcihfdGhpczQuZGF0YS5jbGlja3Rocm91Z2hfb25lKTtcbiAgICAgICAgICAgICAgICBfdGhpczQudHJhY2tlcignQ1RSJywgJ2VuZGltZ19jbGlja3Rocm91Z2gnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKTtcbiAgICAgICAgICAgIHZhciBiYW5uZXIgPSB7XG4gICAgICAgICAgICAgICAgb25lOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFubmVyLm9uZScpLFxuICAgICAgICAgICAgICAgIHR3bzogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhbm5lci50d28nKSxcbiAgICAgICAgICAgICAgICB0aHJlZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhbm5lci50aHJlZScpLFxuICAgICAgICAgICAgICAgIGZvdXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYW5uZXIuZm91cicpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgY2xpY2tfcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNsaWNrX3BvcHVwXCIpO1xuICAgICAgICAgICAgdmFyIGNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZVwiKTtcblxuICAgICAgICAgICAgY2xpY2tfcG9wdXAuZm9yRWFjaChmdW5jdGlvbiAoY2xpY2spIHtcblxuICAgICAgICAgICAgICAgIGNsaWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKTtcblxuICAgICAgICAgICAgICAgICAgICBfdGhpczQudHJhY2tlcignRScsICdwb3B1cF8nICsgdGFyZ2V0KTtcblxuICAgICAgICAgICAgICAgICAgICBwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgYmFubmVyW3RhcmdldF0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNC52aWRlby5wYXVzZVZpZGVvKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgnc2xpZGUtaW4tYm90dG9tJyk7XG4gICAgICAgICAgICAgICAgICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlLW91dC1ib3R0b20nKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICAgICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUtaW4tYm90dG9tJyk7XG4gICAgICAgICAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgnc2xpZGUtb3V0LWJvdHRvbScpO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhbm5lci5vbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgYmFubmVyLnR3by5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBiYW5uZXIudGhyZWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgYmFubmVyLmZvdXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpczQuZW5kZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LnZpZGVvLnBsYXlWaWRlbygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBiYW5uZXIub25lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzNC5saW5rT3BlbmVyKF90aGlzNC5kYXRhLmNsaWNrdGhyb3VnaF9vbmUpO1xuICAgICAgICAgICAgICAgIF90aGlzNC50cmFja2VyKCdDVFInLCAnY2xpY2t0aHJvdWdoX29uZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBiYW5uZXIudHdvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzNC5saW5rT3BlbmVyKF90aGlzNC5kYXRhLmNsaWNrdGhyb3VnaF90d28pO1xuICAgICAgICAgICAgICAgIF90aGlzNC50cmFja2VyKCdDVFInLCAnY2xpY2t0aHJvdWdoX3R3bycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBiYW5uZXIudGhyZWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM0LmxpbmtPcGVuZXIoX3RoaXM0LmRhdGEuY2xpY2t0aHJvdWdoX3RocmVlKTtcbiAgICAgICAgICAgICAgICBfdGhpczQudHJhY2tlcignQ1RSJywgJ2NsaWNrdGhyb3VnaF90aHJlZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBiYW5uZXIuZm91ci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpczQubGlua09wZW5lcihfdGhpczQuZGF0YS5jbGlja3Rocm91Z2hfZm91cik7XG4gICAgICAgICAgICAgICAgX3RoaXM0LnRyYWNrZXIoJ0NUUicsICdjbGlja3Rocm91Z2hfZm91cicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2lzTW9iaWxlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzTW9iaWxlKCkge1xuICAgICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSkgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvd2ViT1MvaSkgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBob25lL2kpIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQYWQvaSkgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBvZC9pKSB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9CbGFja0JlcnJ5L2kpIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1dpbmRvd3MgUGhvbmUvaSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdsaXN0ZW4nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbGlzdGVuKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciByZWNlaXZlTWVzc2FnZSA9IGZ1bmN0aW9uIHJlY2VpdmVNZXNzYWdlKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JlY2VpdmVNZXNzYWdlJylcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhldmVudClcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCByZWNlaXZlTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEFkVW5pdDtcbn0oX21hZHNDdXN0b20yLmRlZmF1bHQpO1xuXG53aW5kb3cuYWQgPSBuZXcgQWRVbml0KCk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbWFpbi5qc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4\n')},function(module,exports,__webpack_require__){eval('exports = module.exports = __webpack_require__(6)(false);\n// imports\n\n\n// module\nexports.push([module.i, ".video-container{position:relative;background:#000}.video-container-background{width:100%;height:100%;background:#000;opacity:.7}.cover-image,.ending-image,.video-container-background,.video-container video{position:absolute;top:0;left:0}.cover-image,.ending-image{z-index:10}.clickthrough-container{position:absolute;cursor:pointer;width:100%;height:100%;top:0;left:0;z-index:8}.clickthrough-container img{width:25px;margin-bottom:-7px}.control-replay{right:0}.control-replay,.control-replay img{position:absolute;top:0;width:32px;height:32px}.control-replay img{display:none;left:0;z-index:11}.special-control{position:absolute;top:50%;left:50%;width:32px;height:32px;margin-left:-16px;margin-top:-16px}.default-control-audio-container img,.default-control-play-container img,.special-control img{top:0;z-index:9;display:none;position:absolute}.special-control img{width:32px;height:32px;left:0}.default-control-play-container{width:32px;height:32px;position:absolute;bottom:5px;left:50%;margin-left:-9px;z-index:9}.default-control-bar-container{width:100%;height:65px;background:url(https://cdn.serving1.net/html5/images/media/video/rectangle.png) repeat-x;position:absolute;bottom:0;left:0;background-size:100%;z-index:9}.default-control-play-container img.dc-pause,.default-control-play-container img.dc-play{width:32px;height:32px;left:0}.default-control-audio-container{width:32px;height:32px;position:absolute;bottom:5px;left:50%;margin-left:40px;z-index:9}.default-control-audio-container img.dc-mute,.default-control-audio-container img.dc-unmute{width:32px;height:32px;left:0}.default-control-replay-container{width:32px;height:32px;position:absolute;bottom:5px;left:50%;margin-left:-60px;z-index:11}.default-control-replay-container span{background:url(https://cdn.richmediaads.com/html5/images/media/video/time.png);padding:7px 0;border-radius:50px;color:#fff;position:absolute;font-size:16px;font-family:arial;width:32px;height:18px;text-align:center}.default-control-replay-container img{width:32px;height:32px;display:none;position:absolute;top:0;left:0;z-index:11}.default-control-replay-container svg{width:32px;height:32px;position:absolute;top:0;left:0;z-index:9}svg{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.circle_animation{stroke-dasharray:88;stroke-dashoffset:88;-webkit-transition:all 1s linear;transition:all 1s linear}#adBased .video-container{pointer-events:none}#default-control-play-container-1,#default-control-replay-container-1{display:none}#default-control-audio-container-1{right:10px;left:auto}.container{width:480px;height:320px;position:relative;overflow:hidden}.video{display:none}.line{border-left:3px solid #fff;height:60%;left:50%;margin-left:-3px}.icons,.line{bottom:0;position:absolute}.icons{width:100%;height:100%;display:none}.icons .click_popup{cursor:pointer;width:52px;height:40px;background:hsla(0,0%,100%,.5)}.icons .icon{position:absolute;width:50px;height:75px;bottom:0;left:10%;text-align:center;display:none}.icons .first{height:75px;left:13%}.icons .first .line{height:39px}.icons .second{height:90px;left:33%}.icons .second .line{height:54px}.icons .third{height:105px;left:55%}.icons .third .line{height:69px}.icons .forth{height:90px;left:80%}.icons .forth .line{height:54px}.popup{z-index:999}.banner,.popup{position:absolute;top:0;left:0;display:none}.banner{width:480px;height:320px;cursor:pointer}.close{z-index:199999;top:285px;color:#fff;background:rgba(0,0,0,.5);text-align:center;padding:5px 10px;border-radius:10px;left:330px;width:125px}#ending-image,.close{position:absolute;cursor:pointer;-webkit-animation:fade-in 1.2s cubic-bezier(.39,.575,.565,1) both;animation:fade-in 1.2s cubic-bezier(.39,.575,.565,1) both}#ending-image{display:none;width:480px;height:320px;top:0;left:0}.slide-in-fwd-center{-webkit-animation:slide-in-fwd-center .4s cubic-bezier(.25,.46,.45,.94) both;animation:slide-in-fwd-center .4s cubic-bezier(.25,.46,.45,.94) both}.jello-horizontal{-webkit-animation:jello-horizontal 5s infinite;animation:jello-horizontal 5s infinite}.slide-in-bottom{-webkit-animation:slide-in-bottom .5s cubic-bezier(.25,.46,.45,.94) both;animation:slide-in-bottom .5s cubic-bezier(.25,.46,.45,.94) both}.slide-out-bottom{-webkit-animation:slide-out-bottom .5s cubic-bezier(.55,.085,.68,.53) both;animation:slide-out-bottom .5s cubic-bezier(.55,.085,.68,.53) both}.fade-in{-webkit-animation:fade-in 1.2s cubic-bezier(.39,.575,.565,1) both;animation:fade-in 1.2s cubic-bezier(.39,.575,.565,1) both;-webkit-animation-delay:.5s;animation-delay:.5s}@-webkit-keyframes slide-in-fwd-center{0%{-webkit-transform:translateZ(-1400px);transform:translateZ(-1400px);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}@keyframes slide-in-fwd-center{0%{-webkit-transform:translateZ(-1400px);transform:translateZ(-1400px);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}. @-webkit-keyframes jello-horizontal{0%{-webkit-transform:scaleX(1);transform:scaleX(1)}15%{-webkit-transform:scale3d(1.25,.75,1);transform:scale3d(1.25,.75,1)}20%{-webkit-transform:scale3d(.75,1.25,1);transform:scale3d(.75,1.25,1)}25%{-webkit-transform:scale3d(1.15,.85,1);transform:scale3d(1.15,.85,1)}32%{-webkit-transform:scale3d(.95,1.05,1);transform:scale3d(.95,1.05,1)}37%{-webkit-transform:scale3d(1.05,.95,1);transform:scale3d(1.05,.95,1)}50%,to{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes jello-horizontal{0%{-webkit-transform:scaleX(1);transform:scaleX(1)}15%{-webkit-transform:scale3d(1.25,.75,1);transform:scale3d(1.25,.75,1)}20%{-webkit-transform:scale3d(.75,1.25,1);transform:scale3d(.75,1.25,1)}25%{-webkit-transform:scale3d(1.15,.85,1);transform:scale3d(1.15,.85,1)}32%{-webkit-transform:scale3d(.95,1.05,1);transform:scale3d(.95,1.05,1)}37%{-webkit-transform:scale3d(1.05,.95,1);transform:scale3d(1.05,.95,1)}50%{-webkit-transform:scaleX(1);transform:scaleX(1)}to{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes jello-horizontal{0%{-webkit-transform:scaleX(1);transform:scaleX(1)}15%{-webkit-transform:scale3d(1.25,.75,1);transform:scale3d(1.25,.75,1)}20%{-webkit-transform:scale3d(.75,1.25,1);transform:scale3d(.75,1.25,1)}25%{-webkit-transform:scale3d(1.15,.85,1);transform:scale3d(1.15,.85,1)}32%{-webkit-transform:scale3d(.95,1.05,1);transform:scale3d(.95,1.05,1)}37%{-webkit-transform:scale3d(1.05,.95,1);transform:scale3d(1.05,.95,1)}50%{-webkit-transform:scaleX(1);transform:scaleX(1)}to{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes slide-in-bottom{0%{-webkit-transform:translateY(1000px);transform:translateY(1000px);opacity:0}to{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}}@keyframes slide-in-bottom{0%{-webkit-transform:translateY(1000px);transform:translateY(1000px);opacity:0}to{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}}@-webkit-keyframes slide-out-bottom{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}to{-webkit-transform:translateY(1000px);transform:translateY(1000px);opacity:0}}@keyframes slide-out-bottom{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}to{-webkit-transform:translateY(1000px);transform:translateY(1000px);opacity:0}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}", ""]);\n\n// exports\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tYWluLmNzcz8yNzUxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoZmFsc2UpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnZpZGVvLWNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kOiMwMDB9LnZpZGVvLWNvbnRhaW5lci1iYWNrZ3JvdW5ke3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7YmFja2dyb3VuZDojMDAwO29wYWNpdHk6Ljd9LmNvdmVyLWltYWdlLC5lbmRpbmctaW1hZ2UsLnZpZGVvLWNvbnRhaW5lci1iYWNrZ3JvdW5kLC52aWRlby1jb250YWluZXIgdmlkZW97cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowfS5jb3Zlci1pbWFnZSwuZW5kaW5nLWltYWdle3otaW5kZXg6MTB9LmNsaWNrdGhyb3VnaC1jb250YWluZXJ7cG9zaXRpb246YWJzb2x1dGU7Y3Vyc29yOnBvaW50ZXI7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt0b3A6MDtsZWZ0OjA7ei1pbmRleDo4fS5jbGlja3Rocm91Z2gtY29udGFpbmVyIGltZ3t3aWR0aDoyNXB4O21hcmdpbi1ib3R0b206LTdweH0uY29udHJvbC1yZXBsYXl7cmlnaHQ6MH0uY29udHJvbC1yZXBsYXksLmNvbnRyb2wtcmVwbGF5IGltZ3twb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDt3aWR0aDozMnB4O2hlaWdodDozMnB4fS5jb250cm9sLXJlcGxheSBpbWd7ZGlzcGxheTpub25lO2xlZnQ6MDt6LWluZGV4OjExfS5zcGVjaWFsLWNvbnRyb2x7cG9zaXRpb246YWJzb2x1dGU7dG9wOjUwJTtsZWZ0OjUwJTt3aWR0aDozMnB4O2hlaWdodDozMnB4O21hcmdpbi1sZWZ0Oi0xNnB4O21hcmdpbi10b3A6LTE2cHh9LmRlZmF1bHQtY29udHJvbC1hdWRpby1jb250YWluZXIgaW1nLC5kZWZhdWx0LWNvbnRyb2wtcGxheS1jb250YWluZXIgaW1nLC5zcGVjaWFsLWNvbnRyb2wgaW1ne3RvcDowO3otaW5kZXg6OTtkaXNwbGF5Om5vbmU7cG9zaXRpb246YWJzb2x1dGV9LnNwZWNpYWwtY29udHJvbCBpbWd7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtsZWZ0OjB9LmRlZmF1bHQtY29udHJvbC1wbGF5LWNvbnRhaW5lcnt3aWR0aDozMnB4O2hlaWdodDozMnB4O3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTo1cHg7bGVmdDo1MCU7bWFyZ2luLWxlZnQ6LTlweDt6LWluZGV4Ojl9LmRlZmF1bHQtY29udHJvbC1iYXItY29udGFpbmVye3dpZHRoOjEwMCU7aGVpZ2h0OjY1cHg7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9jZG4uc2VydmluZzEubmV0L2h0bWw1L2ltYWdlcy9tZWRpYS92aWRlby9yZWN0YW5nbGUucG5nKSByZXBlYXQteDtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MDtsZWZ0OjA7YmFja2dyb3VuZC1zaXplOjEwMCU7ei1pbmRleDo5fS5kZWZhdWx0LWNvbnRyb2wtcGxheS1jb250YWluZXIgaW1nLmRjLXBhdXNlLC5kZWZhdWx0LWNvbnRyb2wtcGxheS1jb250YWluZXIgaW1nLmRjLXBsYXl7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtsZWZ0OjB9LmRlZmF1bHQtY29udHJvbC1hdWRpby1jb250YWluZXJ7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206NXB4O2xlZnQ6NTAlO21hcmdpbi1sZWZ0OjQwcHg7ei1pbmRleDo5fS5kZWZhdWx0LWNvbnRyb2wtYXVkaW8tY29udGFpbmVyIGltZy5kYy1tdXRlLC5kZWZhdWx0LWNvbnRyb2wtYXVkaW8tY29udGFpbmVyIGltZy5kYy11bm11dGV7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtsZWZ0OjB9LmRlZmF1bHQtY29udHJvbC1yZXBsYXktY29udGFpbmVye3dpZHRoOjMycHg7aGVpZ2h0OjMycHg7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjVweDtsZWZ0OjUwJTttYXJnaW4tbGVmdDotNjBweDt6LWluZGV4OjExfS5kZWZhdWx0LWNvbnRyb2wtcmVwbGF5LWNvbnRhaW5lciBzcGFue2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vY2RuLnJpY2htZWRpYWFkcy5jb20vaHRtbDUvaW1hZ2VzL21lZGlhL3ZpZGVvL3RpbWUucG5nKTtwYWRkaW5nOjdweCAwO2JvcmRlci1yYWRpdXM6NTBweDtjb2xvcjojZmZmO3Bvc2l0aW9uOmFic29sdXRlO2ZvbnQtc2l6ZToxNnB4O2ZvbnQtZmFtaWx5OmFyaWFsO3dpZHRoOjMycHg7aGVpZ2h0OjE4cHg7dGV4dC1hbGlnbjpjZW50ZXJ9LmRlZmF1bHQtY29udHJvbC1yZXBsYXktY29udGFpbmVyIGltZ3t3aWR0aDozMnB4O2hlaWdodDozMnB4O2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7ei1pbmRleDoxMX0uZGVmYXVsdC1jb250cm9sLXJlcGxheS1jb250YWluZXIgc3Zne3dpZHRoOjMycHg7aGVpZ2h0OjMycHg7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3otaW5kZXg6OX1zdmd7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC05MGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtOTBkZWcpfS5jaXJjbGVfYW5pbWF0aW9ue3N0cm9rZS1kYXNoYXJyYXk6ODg7c3Ryb2tlLWRhc2hvZmZzZXQ6ODg7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAxcyBsaW5lYXI7dHJhbnNpdGlvbjphbGwgMXMgbGluZWFyfSNhZEJhc2VkIC52aWRlby1jb250YWluZXJ7cG9pbnRlci1ldmVudHM6bm9uZX0jZGVmYXVsdC1jb250cm9sLXBsYXktY29udGFpbmVyLTEsI2RlZmF1bHQtY29udHJvbC1yZXBsYXktY29udGFpbmVyLTF7ZGlzcGxheTpub25lfSNkZWZhdWx0LWNvbnRyb2wtYXVkaW8tY29udGFpbmVyLTF7cmlnaHQ6MTBweDtsZWZ0OmF1dG99LmNvbnRhaW5lcnt3aWR0aDo0ODBweDtoZWlnaHQ6MzIwcHg7cG9zaXRpb246cmVsYXRpdmU7b3ZlcmZsb3c6aGlkZGVufS52aWRlb3tkaXNwbGF5Om5vbmV9LmxpbmV7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICNmZmY7aGVpZ2h0OjYwJTtsZWZ0OjUwJTttYXJnaW4tbGVmdDotM3B4fS5pY29ucywubGluZXtib3R0b206MDtwb3NpdGlvbjphYnNvbHV0ZX0uaWNvbnN7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtkaXNwbGF5Om5vbmV9Lmljb25zIC5jbGlja19wb3B1cHtjdXJzb3I6cG9pbnRlcjt3aWR0aDo1MnB4O2hlaWdodDo0MHB4O2JhY2tncm91bmQ6aHNsYSgwLDAlLDEwMCUsLjUpfS5pY29ucyAuaWNvbntwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDo1MHB4O2hlaWdodDo3NXB4O2JvdHRvbTowO2xlZnQ6MTAlO3RleHQtYWxpZ246Y2VudGVyO2Rpc3BsYXk6bm9uZX0uaWNvbnMgLmZpcnN0e2hlaWdodDo3NXB4O2xlZnQ6MTMlfS5pY29ucyAuZmlyc3QgLmxpbmV7aGVpZ2h0OjM5cHh9Lmljb25zIC5zZWNvbmR7aGVpZ2h0OjkwcHg7bGVmdDozMyV9Lmljb25zIC5zZWNvbmQgLmxpbmV7aGVpZ2h0OjU0cHh9Lmljb25zIC50aGlyZHtoZWlnaHQ6MTA1cHg7bGVmdDo1NSV9Lmljb25zIC50aGlyZCAubGluZXtoZWlnaHQ6NjlweH0uaWNvbnMgLmZvcnRoe2hlaWdodDo5MHB4O2xlZnQ6ODAlfS5pY29ucyAuZm9ydGggLmxpbmV7aGVpZ2h0OjU0cHh9LnBvcHVwe3otaW5kZXg6OTk5fS5iYW5uZXIsLnBvcHVwe3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDtkaXNwbGF5Om5vbmV9LmJhbm5lcnt3aWR0aDo0ODBweDtoZWlnaHQ6MzIwcHg7Y3Vyc29yOnBvaW50ZXJ9LmNsb3Nle3otaW5kZXg6MTk5OTk5O3RvcDoyODVweDtjb2xvcjojZmZmO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNSk7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzo1cHggMTBweDtib3JkZXItcmFkaXVzOjEwcHg7bGVmdDozMzBweDt3aWR0aDoxMjVweH0jZW5kaW5nLWltYWdlLC5jbG9zZXtwb3NpdGlvbjphYnNvbHV0ZTtjdXJzb3I6cG9pbnRlcjstd2Via2l0LWFuaW1hdGlvbjpmYWRlLWluIDEuMnMgY3ViaWMtYmV6aWVyKC4zOSwuNTc1LC41NjUsMSkgYm90aDthbmltYXRpb246ZmFkZS1pbiAxLjJzIGN1YmljLWJlemllciguMzksLjU3NSwuNTY1LDEpIGJvdGh9I2VuZGluZy1pbWFnZXtkaXNwbGF5Om5vbmU7d2lkdGg6NDgwcHg7aGVpZ2h0OjMyMHB4O3RvcDowO2xlZnQ6MH0uc2xpZGUtaW4tZndkLWNlbnRlcnstd2Via2l0LWFuaW1hdGlvbjpzbGlkZS1pbi1md2QtY2VudGVyIC40cyBjdWJpYy1iZXppZXIoLjI1LC40NiwuNDUsLjk0KSBib3RoO2FuaW1hdGlvbjpzbGlkZS1pbi1md2QtY2VudGVyIC40cyBjdWJpYy1iZXppZXIoLjI1LC40NiwuNDUsLjk0KSBib3RofS5qZWxsby1ob3Jpem9udGFsey13ZWJraXQtYW5pbWF0aW9uOmplbGxvLWhvcml6b250YWwgNXMgaW5maW5pdGU7YW5pbWF0aW9uOmplbGxvLWhvcml6b250YWwgNXMgaW5maW5pdGV9LnNsaWRlLWluLWJvdHRvbXstd2Via2l0LWFuaW1hdGlvbjpzbGlkZS1pbi1ib3R0b20gLjVzIGN1YmljLWJlemllciguMjUsLjQ2LC40NSwuOTQpIGJvdGg7YW5pbWF0aW9uOnNsaWRlLWluLWJvdHRvbSAuNXMgY3ViaWMtYmV6aWVyKC4yNSwuNDYsLjQ1LC45NCkgYm90aH0uc2xpZGUtb3V0LWJvdHRvbXstd2Via2l0LWFuaW1hdGlvbjpzbGlkZS1vdXQtYm90dG9tIC41cyBjdWJpYy1iZXppZXIoLjU1LC4wODUsLjY4LC41MykgYm90aDthbmltYXRpb246c2xpZGUtb3V0LWJvdHRvbSAuNXMgY3ViaWMtYmV6aWVyKC41NSwuMDg1LC42OCwuNTMpIGJvdGh9LmZhZGUtaW57LXdlYmtpdC1hbmltYXRpb246ZmFkZS1pbiAxLjJzIGN1YmljLWJlemllciguMzksLjU3NSwuNTY1LDEpIGJvdGg7YW5pbWF0aW9uOmZhZGUtaW4gMS4ycyBjdWJpYy1iZXppZXIoLjM5LC41NzUsLjU2NSwxKSBib3RoOy13ZWJraXQtYW5pbWF0aW9uLWRlbGF5Oi41czthbmltYXRpb24tZGVsYXk6LjVzfUAtd2Via2l0LWtleWZyYW1lcyBzbGlkZS1pbi1md2QtY2VudGVyezAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVooLTE0MDBweCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVooLTE0MDBweCk7b3BhY2l0eTowfXRvey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVooMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVooMCk7b3BhY2l0eToxfX1Aa2V5ZnJhbWVzIHNsaWRlLWluLWZ3ZC1jZW50ZXJ7MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWigtMTQwMHB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWigtMTQwMHB4KTtvcGFjaXR5OjB9dG97LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWigwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWigwKTtvcGFjaXR5OjF9fS4gQC13ZWJraXQta2V5ZnJhbWVzIGplbGxvLWhvcml6b250YWx7MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGVYKDEpO3RyYW5zZm9ybTpzY2FsZVgoMSl9MTUley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlM2QoMS4yNSwuNzUsMSk7dHJhbnNmb3JtOnNjYWxlM2QoMS4yNSwuNzUsMSl9MjAley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlM2QoLjc1LDEuMjUsMSk7dHJhbnNmb3JtOnNjYWxlM2QoLjc1LDEuMjUsMSl9MjUley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlM2QoMS4xNSwuODUsMSk7dHJhbnNmb3JtOnNjYWxlM2QoMS4xNSwuODUsMSl9MzIley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlM2QoLjk1LDEuMDUsMSk7dHJhbnNmb3JtOnNjYWxlM2QoLjk1LDEuMDUsMSl9Mzcley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlM2QoMS4wNSwuOTUsMSk7dHJhbnNmb3JtOnNjYWxlM2QoMS4wNSwuOTUsMSl9NTAlLHRvey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlWCgxKTt0cmFuc2Zvcm06c2NhbGVYKDEpfX1ALXdlYmtpdC1rZXlmcmFtZXMgamVsbG8taG9yaXpvbnRhbHswJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZVgoMSk7dHJhbnNmb3JtOnNjYWxlWCgxKX0xNSV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUzZCgxLjI1LC43NSwxKTt0cmFuc2Zvcm06c2NhbGUzZCgxLjI1LC43NSwxKX0yMCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUzZCguNzUsMS4yNSwxKTt0cmFuc2Zvcm06c2NhbGUzZCguNzUsMS4yNSwxKX0yNSV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUzZCgxLjE1LC44NSwxKTt0cmFuc2Zvcm06c2NhbGUzZCgxLjE1LC44NSwxKX0zMiV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUzZCguOTUsMS4wNSwxKTt0cmFuc2Zvcm06c2NhbGUzZCguOTUsMS4wNSwxKX0zNyV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUzZCgxLjA1LC45NSwxKTt0cmFuc2Zvcm06c2NhbGUzZCgxLjA1LC45NSwxKX01MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGVYKDEpO3RyYW5zZm9ybTpzY2FsZVgoMSl9dG97LXdlYmtpdC10cmFuc2Zvcm06c2NhbGVYKDEpO3RyYW5zZm9ybTpzY2FsZVgoMSl9fUBrZXlmcmFtZXMgamVsbG8taG9yaXpvbnRhbHswJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZVgoMSk7dHJhbnNmb3JtOnNjYWxlWCgxKX0xNSV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUzZCgxLjI1LC43NSwxKTt0cmFuc2Zvcm06c2NhbGUzZCgxLjI1LC43NSwxKX0yMCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUzZCguNzUsMS4yNSwxKTt0cmFuc2Zvcm06c2NhbGUzZCguNzUsMS4yNSwxKX0yNSV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUzZCgxLjE1LC44NSwxKTt0cmFuc2Zvcm06c2NhbGUzZCgxLjE1LC44NSwxKX0zMiV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUzZCguOTUsMS4wNSwxKTt0cmFuc2Zvcm06c2NhbGUzZCguOTUsMS4wNSwxKX0zNyV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUzZCgxLjA1LC45NSwxKTt0cmFuc2Zvcm06c2NhbGUzZCgxLjA1LC45NSwxKX01MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGVYKDEpO3RyYW5zZm9ybTpzY2FsZVgoMSl9dG97LXdlYmtpdC10cmFuc2Zvcm06c2NhbGVYKDEpO3RyYW5zZm9ybTpzY2FsZVgoMSl9fUAtd2Via2l0LWtleWZyYW1lcyBzbGlkZS1pbi1ib3R0b217MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgxMDAwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDEwMDBweCk7b3BhY2l0eTowfXRvey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCk7b3BhY2l0eToxfX1Aa2V5ZnJhbWVzIHNsaWRlLWluLWJvdHRvbXswJXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDEwMDBweCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwMHB4KTtvcGFjaXR5OjB9dG97LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKTtvcGFjaXR5OjF9fUAtd2Via2l0LWtleWZyYW1lcyBzbGlkZS1vdXQtYm90dG9tezAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCk7b3BhY2l0eToxfXRvey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwMHB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMDAwcHgpO29wYWNpdHk6MH19QGtleWZyYW1lcyBzbGlkZS1vdXQtYm90dG9tezAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCk7b3BhY2l0eToxfXRvey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwMHB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMDAwcHgpO29wYWNpdHk6MH19QC13ZWJraXQta2V5ZnJhbWVzIGZhZGUtaW57MCV7b3BhY2l0eTowfXRve29wYWNpdHk6MX19QGtleWZyYW1lcyBmYWRlLWluezAle29wYWNpdHk6MH10b3tvcGFjaXR5OjF9fVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9jc3MtbG9hZGVyP3tcImltcG9ydExvYWRlcnNcIjoxfSEuL34vcG9zdGNzcy1sb2FkZXIvbGliIS4vc3JjL21haW4uY3NzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///5\n')},function(module,exports){eval('/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn "@media " + item[2] + "{" + content + "}";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join("");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === "string")\n\t\t\tmodules = [[null, modules, ""]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === "number")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== "number" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = "(" + item[2] + ") and (" + mediaQuery + ")";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || \'\';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === \'function\') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn \'/*# sourceURL=\' + cssMapping.sourceRoot + source + \' */\'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join(\'\\n\');\n\t}\n\n\treturn [content].join(\'\\n\');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = \'sourceMappingURL=data:application/json;charset=utf-8;base64,\' + base64;\n\n\treturn \'/*# \' + data + \' */\';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanM/ZGEwNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odXNlU291cmNlTWFwKSB7XG5cdHZhciBsaXN0ID0gW107XG5cblx0Ly8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHR2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblx0XHRcdGlmKGl0ZW1bMl0pIHtcblx0XHRcdFx0cmV0dXJuIFwiQG1lZGlhIFwiICsgaXRlbVsyXSArIFwie1wiICsgY29udGVudCArIFwifVwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0fSkuam9pbihcIlwiKTtcblx0fTtcblxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG5cdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcblx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuXHRcdH1cblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuXHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuXHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcblx0dmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnO1xuXHR2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cdGlmICghY3NzTWFwcGluZykge1xuXHRcdHJldHVybiBjb250ZW50O1xuXHR9XG5cblx0aWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuXHRcdHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG5cdFx0XHRyZXR1cm4gJy8qIyBzb3VyY2VVUkw9JyArIGNzc01hcHBpbmcuc291cmNlUm9vdCArIHNvdXJjZSArICcgKi8nXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcblx0fVxuXG5cdHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59XG5cbi8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG5cdHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuXHR2YXIgZGF0YSA9ICdzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwnICsgYmFzZTY0O1xuXG5cdHJldHVybiAnLyojICcgKyBkYXRhICsgJyAqLyc7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///6\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = __webpack_require__(10);\n\nvar constants = {\n  json: (0, _utils.getParameterByName)('json'),\n  custTracker: (0, _utils.getParameterByName)('custTracker'),\n  fet: (0, _utils.getParameterByName)('fet'),\n  ct: (0, _utils.getParameterByName)('ct'),\n  cte: (0, _utils.getParameterByName)('cte'),\n  tags: (0, _utils.getParameterByName)('tags'),\n  pgId: (0, _utils.getParameterByName)('pgId'),\n  preview: (0, _utils.getParameterByName)('preview'),\n  md5: (0, _utils.getParameterByName)('md5')\n};\n\nexports.default = constants;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vbWFkcy1jdXN0b20vbGliL2NvbnN0YW50cy5qcz84NzgwIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF91dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcblxudmFyIGNvbnN0YW50cyA9IHtcbiAganNvbjogKDAsIF91dGlscy5nZXRQYXJhbWV0ZXJCeU5hbWUpKCdqc29uJyksXG4gIGN1c3RUcmFja2VyOiAoMCwgX3V0aWxzLmdldFBhcmFtZXRlckJ5TmFtZSkoJ2N1c3RUcmFja2VyJyksXG4gIGZldDogKDAsIF91dGlscy5nZXRQYXJhbWV0ZXJCeU5hbWUpKCdmZXQnKSxcbiAgY3Q6ICgwLCBfdXRpbHMuZ2V0UGFyYW1ldGVyQnlOYW1lKSgnY3QnKSxcbiAgY3RlOiAoMCwgX3V0aWxzLmdldFBhcmFtZXRlckJ5TmFtZSkoJ2N0ZScpLFxuICB0YWdzOiAoMCwgX3V0aWxzLmdldFBhcmFtZXRlckJ5TmFtZSkoJ3RhZ3MnKSxcbiAgcGdJZDogKDAsIF91dGlscy5nZXRQYXJhbWV0ZXJCeU5hbWUpKCdwZ0lkJyksXG4gIHByZXZpZXc6ICgwLCBfdXRpbHMuZ2V0UGFyYW1ldGVyQnlOYW1lKSgncHJldmlldycpLFxuICBtZDU6ICgwLCBfdXRpbHMuZ2V0UGFyYW1ldGVyQnlOYW1lKSgnbWQ1Jylcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGNvbnN0YW50cztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWFkcy1jdXN0b20vbGliL2NvbnN0YW50cy5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* global window, requestAnimationFrame */\n\nvar fadeIn = function fadeIn(el, display) {\n  var tmpEl = el;\n  var opacity = 0;\n\n  tmpEl.style.display = display || window.getComputedStyle(tmpEl, null).getPropertyValue('display') || 'block';\n  tmpEl.style.opacity = 0;\n  tmpEl.style.filter = '';\n\n  var last = +new Date();\n  var anim = void 0;\n  var tick = function tick() {\n    opacity += (new Date() - last) / 400;\n    tmpEl.style.opacity = opacity;\n    tmpEl.style.filter = 'alpha(opacity=' + (100 * opacity | 0) + ')'; // eslint-disable-line no-bitwise\n\n    last = +new Date();\n\n    if (opacity < 1) {\n      // eslint-disable-next-line no-unused-expressions\n      anim = window.requestAnimationFrame && requestAnimationFrame(tick) || setTimeout(tick, 16);\n    } else {\n      window.cancelAnimationFrame && cancelAnimationFrame(anim) || clearTimeout(anim);\n      tmpEl.style.display = display || window.getComputedStyle(tmpEl, null).getPropertyValue('display') || 'block';\n    }\n  };\n\n  tick();\n};\n\nvar fadeOut = function fadeOut(el) {\n  var tmpEl = el;\n  var opacity = 1;\n\n  tmpEl.style.opacity = 1;\n  tmpEl.style.filter = 'alpha(opacity=' + (100 * opacity | 1) + ')'; // eslint-disable-line no-bitwise\n\n  var last = +new Date();\n  var anim = void 0;\n  var tick = function tick() {\n    opacity -= (new Date() - last) / 400;\n    tmpEl.style.opacity = opacity;\n    tmpEl.style.filter = 'alpha(opacity=' + (100 * opacity | 0) + ')'; // eslint-disable-line no-bitwise\n\n    last = +new Date();\n\n    if (opacity <= 0) {\n      window.cancelAnimationFrame && cancelAnimationFrame(anim) || clearTimeout(anim);\n      tmpEl.style.display = 'none';\n    } else {\n      // eslint-disable-next-line no-unused-expressions\n      anim = window.requestAnimationFrame && requestAnimationFrame(tick) || setTimeout(tick, 16);\n    }\n  };\n\n  tick();\n};\n\nvar fadeOutIn = function fadeOutIn(elOut, elIn, opts) {\n  fadeOut(elOut);\n  fadeIn(elIn, opts.display);\n};\n\nexports.default = null;\nexports.fadeIn = fadeIn;\nexports.fadeOut = fadeOut;\nexports.fadeOutIn = fadeOutIn;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vbWFkcy1jdXN0b20vbGliL2VmZmVjdHMuanM/MzRiOSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKiBnbG9iYWwgd2luZG93LCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgKi9cblxudmFyIGZhZGVJbiA9IGZ1bmN0aW9uIGZhZGVJbihlbCwgZGlzcGxheSkge1xuICB2YXIgdG1wRWwgPSBlbDtcbiAgdmFyIG9wYWNpdHkgPSAwO1xuXG4gIHRtcEVsLnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5IHx8IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRtcEVsLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCdkaXNwbGF5JykgfHwgJ2Jsb2NrJztcbiAgdG1wRWwuc3R5bGUub3BhY2l0eSA9IDA7XG4gIHRtcEVsLnN0eWxlLmZpbHRlciA9ICcnO1xuXG4gIHZhciBsYXN0ID0gK25ldyBEYXRlKCk7XG4gIHZhciBhbmltID0gdm9pZCAwO1xuICB2YXIgdGljayA9IGZ1bmN0aW9uIHRpY2soKSB7XG4gICAgb3BhY2l0eSArPSAobmV3IERhdGUoKSAtIGxhc3QpIC8gNDAwO1xuICAgIHRtcEVsLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5O1xuICAgIHRtcEVsLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyAoMTAwICogb3BhY2l0eSB8IDApICsgJyknOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWJpdHdpc2VcblxuICAgIGxhc3QgPSArbmV3IERhdGUoKTtcblxuICAgIGlmIChvcGFjaXR5IDwgMSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC1leHByZXNzaW9uc1xuICAgICAgYW5pbSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgJiYgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spIHx8IHNldFRpbWVvdXQodGljaywgMTYpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgJiYgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbSkgfHwgY2xlYXJUaW1lb3V0KGFuaW0pO1xuICAgICAgdG1wRWwuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXkgfHwgd2luZG93LmdldENvbXB1dGVkU3R5bGUodG1wRWwsIG51bGwpLmdldFByb3BlcnR5VmFsdWUoJ2Rpc3BsYXknKSB8fCAnYmxvY2snO1xuICAgIH1cbiAgfTtcblxuICB0aWNrKCk7XG59O1xuXG52YXIgZmFkZU91dCA9IGZ1bmN0aW9uIGZhZGVPdXQoZWwpIHtcbiAgdmFyIHRtcEVsID0gZWw7XG4gIHZhciBvcGFjaXR5ID0gMTtcblxuICB0bXBFbC5zdHlsZS5vcGFjaXR5ID0gMTtcbiAgdG1wRWwuc3R5bGUuZmlsdGVyID0gJ2FscGhhKG9wYWNpdHk9JyArICgxMDAgKiBvcGFjaXR5IHwgMSkgKyAnKSc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tYml0d2lzZVxuXG4gIHZhciBsYXN0ID0gK25ldyBEYXRlKCk7XG4gIHZhciBhbmltID0gdm9pZCAwO1xuICB2YXIgdGljayA9IGZ1bmN0aW9uIHRpY2soKSB7XG4gICAgb3BhY2l0eSAtPSAobmV3IERhdGUoKSAtIGxhc3QpIC8gNDAwO1xuICAgIHRtcEVsLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5O1xuICAgIHRtcEVsLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyAoMTAwICogb3BhY2l0eSB8IDApICsgJyknOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWJpdHdpc2VcblxuICAgIGxhc3QgPSArbmV3IERhdGUoKTtcblxuICAgIGlmIChvcGFjaXR5IDw9IDApIHtcbiAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSAmJiBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltKSB8fCBjbGVhclRpbWVvdXQoYW5pbSk7XG4gICAgICB0bXBFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLWV4cHJlc3Npb25zXG4gICAgICBhbmltID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSAmJiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljaykgfHwgc2V0VGltZW91dCh0aWNrLCAxNik7XG4gICAgfVxuICB9O1xuXG4gIHRpY2soKTtcbn07XG5cbnZhciBmYWRlT3V0SW4gPSBmdW5jdGlvbiBmYWRlT3V0SW4oZWxPdXQsIGVsSW4sIG9wdHMpIHtcbiAgZmFkZU91dChlbE91dCk7XG4gIGZhZGVJbihlbEluLCBvcHRzLmRpc3BsYXkpO1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gbnVsbDtcbmV4cG9ydHMuZmFkZUluID0gZmFkZUluO1xuZXhwb3J0cy5mYWRlT3V0ID0gZmFkZU91dDtcbmV4cG9ydHMuZmFkZU91dEluID0gZmFkZU91dEluO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYWRzLWN1c3RvbS9saWIvZWZmZWN0cy5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///8\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* global document window XMLHttpRequest MutationObserver mraid */\n\n\nvar _constants = __webpack_require__(7);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Mads = function () {\n  function Mads() {\n    var _this = this;\n\n    _classCallCheck(this, Mads);\n\n    this.body = document.getElementsByTagName('body')[0];\n    this.head = document.getElementsByTagName('head')[0];\n\n    this.googleApiKey = 'AIzaSyCFHn5MNIYN-lGyTDTUYRAJM2fEKvHm-nE';\n\n    this.path = typeof window.rma !== 'undefined' ? window.rma.customize.src || '' : '';\n\n    // Get JSON value\n    if (!_constants2.default.json && window.rma && window.rma.customize && window.rma.customize.json && Object.keys(window.rma.customize.json).length !== 0) {\n      this.json = window.rma.customize.json;\n    } else if (_constants2.default.json && Object.keys(_constants2.default.json).length !== 0) {\n      this.json = _constants2.default.json;\n    } else {\n      this.json = this.resolve('./data.json');\n    }\n\n    // Setup & get FET value\n    this.fetTracked = false;\n    if (!_constants2.default.fet && window.rma) {\n      this.fet = typeof window.rma.fet === 'string' ? [window.rma.fet] : window.rma.fet;\n    } else if (_constants2.default.fet) {\n      this.fet = typeof _constants2.default.fet === 'string' ? [_constants2.default.fet] : _constants2.default.fet;\n    } else {\n      this.fet = [];\n    }\n\n    if (!_constants2.default.custTracker && window.rma) {\n      this.custTracker = window.rma.customize.custTracker;\n    } else if (_constants2.default.custTracker) {\n      this.custTracker = _constants2.default.custTracker;\n    } else {\n      this.custTracker = [];\n    }\n\n    if (!_constants2.default.ct && window.rma) {\n      this.ct = typeof window.rma.ct === 'string' ? [window.rma.ct] : window.rma.ct;\n    } else if (_constants2.default.ct) {\n      this.ct = typeof _constants2.default.ct === 'string' ? [_constants2.default.ct] : _constants2.default.ct;\n    } else {\n      this.ct = [];\n    }\n\n    if (!_constants2.default.cte && window.rma) {\n      this.cte = typeof window.rma.cte === 'string' ? [window.rma.cte] : window.rma.cte;\n    } else if (_constants2.default.cte) {\n      this.cte = typeof _constants2.default.cte === 'string' ? [_constants2.default.cte] : _constants2.default.cte;\n    } else {\n      this.cte = [];\n    }\n\n    if (_constants2.default.pgId && typeof _constants2.default.pgId !== 'undefined' && _constants2.default.pgId !== 'undefined') {\n      this.pgId = _constants2.default.pgId;\n    } else {\n      var genereatePgId = function genereatePgId(flag) {\n        var r = (Math.random().toString(16) + \"000000000\").substr(2, 8);\n        return flag ? '-' + r.substr(0, 4) + '-' + r.substr(4, 4) : r;\n      };\n\n      this.pgId = '' + genereatePgId() + genereatePgId(true) + genereatePgId(true) + genereatePgId();\n    }\n\n    if (!_constants2.default.tags && window.rma) {\n      this.leadTags = this.leadTagsProcess(window.rma.tags);\n      this.tags = this.processTags(window.rma.tags);\n    } else if (_constants2.default.tags) {\n      this.leadTags = this.leadTagsProcess(_constants2.default.tags);\n      this.tags = this.processTags(_constants2.default.tags);\n    } else {\n      this.leadTags = '';\n      this.tags = '';\n    }\n\n    this.id = this.generateUniqueId();\n    this.tracked = [];\n    this.trackedEngagementType = [];\n    this.engagementTypeExclude = [];\n    this.firstEngagementTracked = false;\n    this.content = document.getElementById('rma-widget');\n\n    for (var i = 0; i < this.custTracker.length; i += 1) {\n      if (this.custTracker[i].indexOf('{2}') !== -1) {\n        this.custTracker[i] = this.custTracker[i].replace('{2}', '{{type}}');\n      }\n    }\n    this.elems = {};\n\n    var loadAdOldSchool = function loadAdOldSchool() {\n      if (typeof _this.json === 'string' && (_this.json.indexOf('./') === 0 || _this.json.indexOf('https://') === 0 || _this.json.indexOf('http://') === 0)) {\n\n        _this.loadJS(_this.json).then(function () {\n          if (json_data) {\n            _this.userId = json_data.userId;\n            _this.studioId = json_data.id;\n            _this.data = json_data;\n            _this.leadData = {\n              leadGenEle: json_data.leadGenEle\n            };\n          }\n          console.log('loaded old with loading json', _this.json, _this.data);\n          _this.loadAd();\n        });\n      } else {\n        if (_constants2.default.json) {\n          _this.userId = _constants2.default.json.userId;\n          _this.studioId = _constants2.default.json.id;\n          _this.data = _constants2.default.json;\n          _this.leadData = {\n            leadGenEle: _constants2.default.json.leadGenEle\n          };\n        }\n        console.log('loaded old with constant json', _constants2.default.json, _this.data);\n        _this.loadAd();\n      }\n    };\n\n    if (_constants2.default.preview) {\n      window.addEventListener('message', function (e) {\n        var props = e.data.data;\n        if (typeof e.data.auth !== 'undefined' && e.data.auth === 'preview') {\n          _this.data = props.data;\n          _this.leadData = props.leadgen;\n          _this.userId = props.userId;\n          _this.studioId = props.studioId;\n          setTimeout(function () {\n            console.log('loaded new with preview json', props, _this.data);\n            _this.loadAd();\n          }, 1);\n        }\n      });\n    } else if (_constants2.default.md5 && _constants2.default.md5 !== 'undefined' && typeof _constants2.default.md5 !== 'undefined') {\n      this.loadJS('https://cdn.richmediaads.com/studio-full/' + _constants2.default.md5 + '.json?pgId' + this.pgId).then(function () {\n        try {\n          _this.userId = data_studiofull.userId;\n          _this.studioId = data_studiofull.id;\n          _this.data = data_studiofull.tab1.componentContent[34].data.raw.property;\n          _this.leadData = data_studiofull.tab1.componentContent[34].data.raw.leadgen;\n          console.log('loaded new with md5 json', data_studiofull, _this.data);\n          _this.loadAd();\n        } catch (e) {\n          loadAdOldSchool();\n        }\n      });\n    } else {\n      loadAdOldSchool();\n    }\n  }\n\n  _createClass(Mads, [{\n    key: 'loadAd',\n    value: function loadAd() {\n      var _this2 = this;\n\n      var obs = new MutationObserver(function (mutations) {\n        mutations.forEach(function (mutation) {\n          if (mutation.target === _this2.content) {\n            _this2.content.querySelectorAll('*').forEach(function (elem) {\n              if (elem.id) {\n                _this2.elems[elem.id] = elem;\n              }\n            });\n            if (_this2.postRender) _this2.postRender();\n            _this2.events();\n            obs.disconnect();\n          }\n        });\n      });\n\n      var config = { childList: true };\n\n      obs.observe(this.content, config);\n\n      this.content.innerHTML = this.render().replace(/src=\"/g, 'src=\"' + this.path);\n\n      var defaultStyles = 'body{padding:0;margin:0;}';\n      this.loadCSS(defaultStyles);\n      var style = this.style();\n      if (typeof style === 'string') {\n        this.loadCSS(style);\n      } else {\n        style.forEach(function (_style) {\n          return _this2.loadCSS(_style);\n        });\n      }\n    }\n  }, {\n    key: 'resolve',\n    value: function resolve(path) {\n      if (this.path) {\n        return this.path + path;\n      }\n      return path;\n    }\n  }, {\n    key: 'generateUniqueId',\n    value: function generateUniqueId() {\n      // eslint-disable-line class-methods-use-this\n      return +new Date();\n    }\n  }, {\n    key: 'processTags',\n    value: function processTags(tags) {\n      var tmpTags = tags || this.tags;\n      var resultTags = '';\n      Object.keys(tmpTags).forEach(function (tag) {\n        if (tmpTags[tag]) {\n          tmpTags[tag] = encodeURIComponent(tmpTags[tag]);\n          resultTags += '&' + tag + '=' + tmpTags[tag];\n        }\n      });\n\n      return resultTags;\n    }\n  }, {\n    key: 'leadTagsProcess',\n    value: function leadTagsProcess(tags) {\n      var tmpTags = '';\n      Object.keys(tags).forEach(function (tag) {\n        if (tags[tag]) {\n          tmpTags += tags[tag] + ',';\n        }\n      });\n      return tmpTags.slice(0, -1);\n    }\n  }, {\n    key: 'linkOpener',\n    value: function linkOpener(url) {\n      var tmpUrl = url;\n      if (typeof tmpUrl !== 'undefined' && tmpUrl !== '') {\n        if (typeof this.ct !== 'undefined' && this.ct !== '' && this.ct.length !== 0) {\n          tmpUrl = this.ct + encodeURIComponent(tmpUrl);\n          this.url = tmpUrl;\n        }\n\n        if (typeof mraid !== 'undefined') {\n          mraid.open(tmpUrl);\n        } else {\n          window.open(tmpUrl);\n        }\n\n        if (typeof this.cte !== 'undefined' && this.cte !== '') {\n          this.imageTracker(this.cte);\n        }\n      }\n    }\n  }, {\n    key: 'tracker',\n    value: function tracker(tt, type, name, value) {\n      var _this3 = this;\n\n      var tmpName = type.name || name || type;\n      var tmpValue = value;\n\n      if (tt === 'E' && !this.fetTracked && this.fet) {\n        for (var i = 0; i < this.fet.length; i += 1) {\n          var t = document.createElement('img');\n          t.src = decodeURIComponent(this.fet[i]);\n\n          t.style.display = 'none';\n          this.body.appendChild(t);\n        }\n        this.fetTracked = true;\n      }\n\n      if (typeof this.custTracker !== 'undefined' && this.custTracker !== '' && this.tracked.indexOf(tmpName) === -1) {\n        for (var _i = 0; _i < this.custTracker.length; _i += 1) {\n          if (_i !== 0 && type.exclude) continue;\n          var img = document.createElement('img');\n\n          if (typeof tmpValue === 'undefined') {\n            tmpValue = '';\n          }\n\n          var src = this.custTracker[_i].replace('{{rmatype}}', type.name || type);\n          src = src.replace('{{rmavalue}}', tmpValue);\n\n          if (this.trackedEngagementType.indexOf(tt) !== -1\n            || this.engagementTypeExclude.indexOf(tt) !== -1 || tt == '') {\n            src = src.replace('tt={{rmatt}}', '');\n          } else {\n            src = src.replace('{{rmatt}}', tt);\n            this.trackedEngagementType.push(tt);\n          }\n\n          if (!this.firstEngagementTracked && tt === 'E' && type !== 'tilt_landscape') {\n            src += '&ty=E';\n            this.firstEngagementTracked = true;\n          }\n\n          if (type == 'yt_play' || type == 'video_play') {\n            src += '&tv=VP'\n          } else if (type == 'yt_play_100' || type == 'video_play_100') {\n            src += '&tv=VC'\n          }\n\n          var tags = Object.keys(this.tags).map(function (key) {\n            return _this3.tags[key];\n          });\n\n          img.src = src + this.tags + '&' + this.id;\n\n          img.style.display = 'none';\n          this.body.appendChild(img);\n\n          this.tracked.push(tmpName);\n        }\n      }\n    }\n  }, {\n    key: 'imageTracker',\n    value: function imageTracker(url) {\n      for (var i = 0; i < url.length; i += 1) {\n        var t = document.createElement('img');\n        t.src = url[i];\n\n        t.style.display = 'none';\n        this.body.appendChild(t);\n      }\n    }\n  }, {\n    key: 'loadJS',\n    value: function loadJS(url) {\n      var _this4 = this;\n\n      return new Promise(function (resolve, reject) {\n        try {\n          var script = document.createElement('script');\n          script.src = url;\n          _this4.head.appendChild(script);\n          script.onload = function () {\n            resolve(true);\n          };\n        } catch (e) {\n          reject(e);\n        }\n      });\n    }\n  }, {\n    key: 'generateShortUrl',\n    value: function generateShortUrl(url) {\n      var _this5 = this;\n\n      return new Promise(function (resolve, reject) {\n        if (_this5.shortUrl) {\n          resolve(JSON.stringify({ id: _this5.shortUrl }));\n        } else {\n          try {\n            var xhr = new XMLHttpRequest();\n            xhr.open('POST', 'https://www.googleapis.com/urlshortener/v1/url?key=' + _this5.googleApiKey);\n            xhr.setRequestHeader('content-type', 'application/json');\n            xhr.onreadystatechange = function () {\n              if (xhr.readyState === 4 && xhr.status === 200) {\n                resolve(xhr.responseText);\n              }\n            };\n            xhr.send(JSON.stringify({ longUrl: url }));\n          } catch (e) {\n            reject(e);\n          }\n        }\n      });\n    }\n  }, {\n    key: 'loadCSS',\n    value: function loadCSS(url) {\n      var _this6 = this;\n\n      return new Promise(function (resolve, reject) {\n        try {\n          if (url.indexOf('http') === 0) {\n            var link = document.createElement('link');\n            link.href = url;\n            link.setAttribute('type', 'text/css');\n            link.setAttribute('rel', 'stylesheet');\n            _this6.head.appendChild(link);\n          } else {\n            var cssText = url.replace(/(<br>)|(\\n)|(      )/gm, '');\n            var style = document.createElement('style');\n            style.innerText = cssText;\n            _this6.head.appendChild(style);\n          }\n\n          resolve(true);\n        } catch (e) {\n          reject(e);\n        }\n      });\n    }\n  }]);\n\n  return Mads;\n}();\n\nexports.default = Mads;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vbWFkcy1jdXN0b20vbGliL21hZHMuanM/MWVhOCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7IC8qIGdsb2JhbCBkb2N1bWVudCB3aW5kb3cgWE1MSHR0cFJlcXVlc3QgTXV0YXRpb25PYnNlcnZlciBtcmFpZCAqL1xuXG5cbnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxudmFyIF9jb25zdGFudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29uc3RhbnRzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIE1hZHMgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIE1hZHMoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNYWRzKTtcblxuICAgIHRoaXMuYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XG4gICAgdGhpcy5oZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcblxuICAgIHRoaXMuZ29vZ2xlQXBpS2V5ID0gJ0FJemFTeUNGSG41TU5JWU4tbEd5VERUVVlSQUpNMmZFS3ZIbS1uRSc7XG5cbiAgICB0aGlzLnBhdGggPSB0eXBlb2Ygd2luZG93LnJtYSAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cucm1hLmN1c3RvbWl6ZS5zcmMgfHwgJycgOiAnJztcblxuICAgIC8vIEdldCBKU09OIHZhbHVlXG4gICAgaWYgKCFfY29uc3RhbnRzMi5kZWZhdWx0Lmpzb24gJiYgd2luZG93LnJtYSAmJiB3aW5kb3cucm1hLmN1c3RvbWl6ZSAmJiB3aW5kb3cucm1hLmN1c3RvbWl6ZS5qc29uICYmIE9iamVjdC5rZXlzKHdpbmRvdy5ybWEuY3VzdG9taXplLmpzb24pLmxlbmd0aCAhPT0gMCkge1xuICAgICAgdGhpcy5qc29uID0gd2luZG93LnJtYS5jdXN0b21pemUuanNvbjtcbiAgICB9IGVsc2UgaWYgKF9jb25zdGFudHMyLmRlZmF1bHQuanNvbiAmJiBPYmplY3Qua2V5cyhfY29uc3RhbnRzMi5kZWZhdWx0Lmpzb24pLmxlbmd0aCAhPT0gMCkge1xuICAgICAgdGhpcy5qc29uID0gX2NvbnN0YW50czIuZGVmYXVsdC5qc29uO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmpzb24gPSB0aGlzLnJlc29sdmUoJy4vZGF0YS5qc29uJyk7XG4gICAgfVxuXG4gICAgLy8gU2V0dXAgJiBnZXQgRkVUIHZhbHVlXG4gICAgdGhpcy5mZXRUcmFja2VkID0gZmFsc2U7XG4gICAgaWYgKCFfY29uc3RhbnRzMi5kZWZhdWx0LmZldCAmJiB3aW5kb3cucm1hKSB7XG4gICAgICB0aGlzLmZldCA9IHR5cGVvZiB3aW5kb3cucm1hLmZldCA9PT0gJ3N0cmluZycgPyBbd2luZG93LnJtYS5mZXRdIDogd2luZG93LnJtYS5mZXQ7XG4gICAgfSBlbHNlIGlmIChfY29uc3RhbnRzMi5kZWZhdWx0LmZldCkge1xuICAgICAgdGhpcy5mZXQgPSB0eXBlb2YgX2NvbnN0YW50czIuZGVmYXVsdC5mZXQgPT09ICdzdHJpbmcnID8gW19jb25zdGFudHMyLmRlZmF1bHQuZmV0XSA6IF9jb25zdGFudHMyLmRlZmF1bHQuZmV0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZldCA9IFtdO1xuICAgIH1cblxuICAgIGlmICghX2NvbnN0YW50czIuZGVmYXVsdC5jdXN0VHJhY2tlciAmJiB3aW5kb3cucm1hKSB7XG4gICAgICB0aGlzLmN1c3RUcmFja2VyID0gd2luZG93LnJtYS5jdXN0b21pemUuY3VzdFRyYWNrZXI7XG4gICAgfSBlbHNlIGlmIChfY29uc3RhbnRzMi5kZWZhdWx0LmN1c3RUcmFja2VyKSB7XG4gICAgICB0aGlzLmN1c3RUcmFja2VyID0gX2NvbnN0YW50czIuZGVmYXVsdC5jdXN0VHJhY2tlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXN0VHJhY2tlciA9IFtdO1xuICAgIH1cblxuICAgIGlmICghX2NvbnN0YW50czIuZGVmYXVsdC5jdCAmJiB3aW5kb3cucm1hKSB7XG4gICAgICB0aGlzLmN0ID0gdHlwZW9mIHdpbmRvdy5ybWEuY3QgPT09ICdzdHJpbmcnID8gW3dpbmRvdy5ybWEuY3RdIDogd2luZG93LnJtYS5jdDtcbiAgICB9IGVsc2UgaWYgKF9jb25zdGFudHMyLmRlZmF1bHQuY3QpIHtcbiAgICAgIHRoaXMuY3QgPSB0eXBlb2YgX2NvbnN0YW50czIuZGVmYXVsdC5jdCA9PT0gJ3N0cmluZycgPyBbX2NvbnN0YW50czIuZGVmYXVsdC5jdF0gOiBfY29uc3RhbnRzMi5kZWZhdWx0LmN0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN0ID0gW107XG4gICAgfVxuXG4gICAgaWYgKCFfY29uc3RhbnRzMi5kZWZhdWx0LmN0ZSAmJiB3aW5kb3cucm1hKSB7XG4gICAgICB0aGlzLmN0ZSA9IHR5cGVvZiB3aW5kb3cucm1hLmN0ZSA9PT0gJ3N0cmluZycgPyBbd2luZG93LnJtYS5jdGVdIDogd2luZG93LnJtYS5jdGU7XG4gICAgfSBlbHNlIGlmIChfY29uc3RhbnRzMi5kZWZhdWx0LmN0ZSkge1xuICAgICAgdGhpcy5jdGUgPSB0eXBlb2YgX2NvbnN0YW50czIuZGVmYXVsdC5jdGUgPT09ICdzdHJpbmcnID8gW19jb25zdGFudHMyLmRlZmF1bHQuY3RlXSA6IF9jb25zdGFudHMyLmRlZmF1bHQuY3RlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN0ZSA9IFtdO1xuICAgIH1cblxuICAgIGlmIChfY29uc3RhbnRzMi5kZWZhdWx0LnBnSWQgJiYgdHlwZW9mIF9jb25zdGFudHMyLmRlZmF1bHQucGdJZCAhPT0gJ3VuZGVmaW5lZCcgJiYgX2NvbnN0YW50czIuZGVmYXVsdC5wZ0lkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5wZ0lkID0gX2NvbnN0YW50czIuZGVmYXVsdC5wZ0lkO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZ2VuZXJlYXRlUGdJZCA9IGZ1bmN0aW9uIGdlbmVyZWF0ZVBnSWQoZmxhZykge1xuICAgICAgICB2YXIgciA9IChNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KSArIFwiMDAwMDAwMDAwXCIpLnN1YnN0cigyLCA4KTtcbiAgICAgICAgcmV0dXJuIGZsYWcgPyAnLScgKyByLnN1YnN0cigwLCA0KSArICctJyArIHIuc3Vic3RyKDQsIDQpIDogcjtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMucGdJZCA9ICcnICsgZ2VuZXJlYXRlUGdJZCgpICsgZ2VuZXJlYXRlUGdJZCh0cnVlKSArIGdlbmVyZWF0ZVBnSWQodHJ1ZSkgKyBnZW5lcmVhdGVQZ0lkKCk7XG4gICAgfVxuXG4gICAgaWYgKCFfY29uc3RhbnRzMi5kZWZhdWx0LnRhZ3MgJiYgd2luZG93LnJtYSkge1xuICAgICAgdGhpcy5sZWFkVGFncyA9IHRoaXMubGVhZFRhZ3NQcm9jZXNzKHdpbmRvdy5ybWEudGFncyk7XG4gICAgICB0aGlzLnRhZ3MgPSB0aGlzLnByb2Nlc3NUYWdzKHdpbmRvdy5ybWEudGFncyk7XG4gICAgfSBlbHNlIGlmIChfY29uc3RhbnRzMi5kZWZhdWx0LnRhZ3MpIHtcbiAgICAgIHRoaXMubGVhZFRhZ3MgPSB0aGlzLmxlYWRUYWdzUHJvY2VzcyhfY29uc3RhbnRzMi5kZWZhdWx0LnRhZ3MpO1xuICAgICAgdGhpcy50YWdzID0gdGhpcy5wcm9jZXNzVGFncyhfY29uc3RhbnRzMi5kZWZhdWx0LnRhZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxlYWRUYWdzID0gJyc7XG4gICAgICB0aGlzLnRhZ3MgPSAnJztcbiAgICB9XG5cbiAgICB0aGlzLmlkID0gdGhpcy5nZW5lcmF0ZVVuaXF1ZUlkKCk7XG4gICAgdGhpcy50cmFja2VkID0gW107XG4gICAgdGhpcy50cmFja2VkRW5nYWdlbWVudFR5cGUgPSBbXTtcbiAgICB0aGlzLmVuZ2FnZW1lbnRUeXBlRXhjbHVkZSA9IFtdO1xuICAgIHRoaXMuZmlyc3RFbmdhZ2VtZW50VHJhY2tlZCA9IGZhbHNlO1xuICAgIHRoaXMuY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdybWEtd2lkZ2V0Jyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY3VzdFRyYWNrZXIubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGlmICh0aGlzLmN1c3RUcmFja2VyW2ldLmluZGV4T2YoJ3syfScpICE9PSAtMSkge1xuICAgICAgICB0aGlzLmN1c3RUcmFja2VyW2ldID0gdGhpcy5jdXN0VHJhY2tlcltpXS5yZXBsYWNlKCd7Mn0nLCAne3t0eXBlfX0nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5lbGVtcyA9IHt9O1xuXG4gICAgdmFyIGxvYWRBZE9sZFNjaG9vbCA9IGZ1bmN0aW9uIGxvYWRBZE9sZFNjaG9vbCgpIHtcbiAgICAgIGlmICh0eXBlb2YgX3RoaXMuanNvbiA9PT0gJ3N0cmluZycgJiYgKF90aGlzLmpzb24uaW5kZXhPZignLi8nKSA9PT0gMCB8fCBfdGhpcy5qc29uLmluZGV4T2YoJ2h0dHBzOi8vJykgPT09IDAgfHwgX3RoaXMuanNvbi5pbmRleE9mKCdodHRwOi8vJykgPT09IDApKSB7XG5cbiAgICAgICAgX3RoaXMubG9hZEpTKF90aGlzLmpzb24pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChqc29uX2RhdGEpIHtcbiAgICAgICAgICAgIF90aGlzLnVzZXJJZCA9IGpzb25fZGF0YS51c2VySWQ7XG4gICAgICAgICAgICBfdGhpcy5zdHVkaW9JZCA9IGpzb25fZGF0YS5pZDtcbiAgICAgICAgICAgIF90aGlzLmRhdGEgPSBqc29uX2RhdGE7XG4gICAgICAgICAgICBfdGhpcy5sZWFkRGF0YSA9IHtcbiAgICAgICAgICAgICAgbGVhZEdlbkVsZToganNvbl9kYXRhLmxlYWRHZW5FbGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkZWQgb2xkIHdpdGggbG9hZGluZyBqc29uJywgX3RoaXMuanNvbiwgX3RoaXMuZGF0YSk7XG4gICAgICAgICAgX3RoaXMubG9hZEFkKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKF9jb25zdGFudHMyLmRlZmF1bHQuanNvbikge1xuICAgICAgICAgIF90aGlzLnVzZXJJZCA9IF9jb25zdGFudHMyLmRlZmF1bHQuanNvbi51c2VySWQ7XG4gICAgICAgICAgX3RoaXMuc3R1ZGlvSWQgPSBfY29uc3RhbnRzMi5kZWZhdWx0Lmpzb24uaWQ7XG4gICAgICAgICAgX3RoaXMuZGF0YSA9IF9jb25zdGFudHMyLmRlZmF1bHQuanNvbjtcbiAgICAgICAgICBfdGhpcy5sZWFkRGF0YSA9IHtcbiAgICAgICAgICAgIGxlYWRHZW5FbGU6IF9jb25zdGFudHMyLmRlZmF1bHQuanNvbi5sZWFkR2VuRWxlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZygnbG9hZGVkIG9sZCB3aXRoIGNvbnN0YW50IGpzb24nLCBfY29uc3RhbnRzMi5kZWZhdWx0Lmpzb24sIF90aGlzLmRhdGEpO1xuICAgICAgICBfdGhpcy5sb2FkQWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKF9jb25zdGFudHMyLmRlZmF1bHQucHJldmlldykge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgcHJvcHMgPSBlLmRhdGEuZGF0YTtcbiAgICAgICAgaWYgKHR5cGVvZiBlLmRhdGEuYXV0aCAhPT0gJ3VuZGVmaW5lZCcgJiYgZS5kYXRhLmF1dGggPT09ICdwcmV2aWV3Jykge1xuICAgICAgICAgIF90aGlzLmRhdGEgPSBwcm9wcy5kYXRhO1xuICAgICAgICAgIF90aGlzLmxlYWREYXRhID0gcHJvcHMubGVhZGdlbjtcbiAgICAgICAgICBfdGhpcy51c2VySWQgPSBwcm9wcy51c2VySWQ7XG4gICAgICAgICAgX3RoaXMuc3R1ZGlvSWQgPSBwcm9wcy5zdHVkaW9JZDtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkZWQgbmV3IHdpdGggcHJldmlldyBqc29uJywgcHJvcHMsIF90aGlzLmRhdGEpO1xuICAgICAgICAgICAgX3RoaXMubG9hZEFkKCk7XG4gICAgICAgICAgfSwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoX2NvbnN0YW50czIuZGVmYXVsdC5tZDUgJiYgX2NvbnN0YW50czIuZGVmYXVsdC5tZDUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBfY29uc3RhbnRzMi5kZWZhdWx0Lm1kNSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubG9hZEpTKCdodHRwczovL2Nkbi5yaWNobWVkaWFhZHMuY29tL3N0dWRpby1mdWxsLycgKyBfY29uc3RhbnRzMi5kZWZhdWx0Lm1kNSArICcuanNvbj9wZ0lkJyArIHRoaXMucGdJZCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgX3RoaXMudXNlcklkID0gZGF0YV9zdHVkaW9mdWxsLnVzZXJJZDtcbiAgICAgICAgICBfdGhpcy5zdHVkaW9JZCA9IGRhdGFfc3R1ZGlvZnVsbC5pZDtcbiAgICAgICAgICBfdGhpcy5kYXRhID0gZGF0YV9zdHVkaW9mdWxsLnRhYjEuY29tcG9uZW50Q29udGVudFszNF0uZGF0YS5yYXcucHJvcGVydHk7XG4gICAgICAgICAgX3RoaXMubGVhZERhdGEgPSBkYXRhX3N0dWRpb2Z1bGwudGFiMS5jb21wb25lbnRDb250ZW50WzM0XS5kYXRhLnJhdy5sZWFkZ2VuO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkZWQgbmV3IHdpdGggbWQ1IGpzb24nLCBkYXRhX3N0dWRpb2Z1bGwsIF90aGlzLmRhdGEpO1xuICAgICAgICAgIF90aGlzLmxvYWRBZCgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgbG9hZEFkT2xkU2Nob29sKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2FkQWRPbGRTY2hvb2woKTtcbiAgICB9XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTWFkcywgW3tcbiAgICBrZXk6ICdsb2FkQWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkQWQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIG9icyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcbiAgICAgICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gKG11dGF0aW9uKSB7XG4gICAgICAgICAgaWYgKG11dGF0aW9uLnRhcmdldCA9PT0gX3RoaXMyLmNvbnRlbnQpIHtcbiAgICAgICAgICAgIF90aGlzMi5jb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgICAgICAgIGlmIChlbGVtLmlkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMyLmVsZW1zW2VsZW0uaWRdID0gZWxlbTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoX3RoaXMyLnBvc3RSZW5kZXIpIF90aGlzMi5wb3N0UmVuZGVyKCk7XG4gICAgICAgICAgICBfdGhpczIuZXZlbnRzKCk7XG4gICAgICAgICAgICBvYnMuZGlzY29ubmVjdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIGNvbmZpZyA9IHsgY2hpbGRMaXN0OiB0cnVlIH07XG5cbiAgICAgIG9icy5vYnNlcnZlKHRoaXMuY29udGVudCwgY29uZmlnKTtcblxuICAgICAgdGhpcy5jb250ZW50LmlubmVySFRNTCA9IHRoaXMucmVuZGVyKCkucmVwbGFjZSgvc3JjPVwiL2csICdzcmM9XCInICsgdGhpcy5wYXRoKTtcblxuICAgICAgdmFyIGRlZmF1bHRTdHlsZXMgPSAnYm9keXtwYWRkaW5nOjA7bWFyZ2luOjA7fSc7XG4gICAgICB0aGlzLmxvYWRDU1MoZGVmYXVsdFN0eWxlcyk7XG4gICAgICB2YXIgc3R5bGUgPSB0aGlzLnN0eWxlKCk7XG4gICAgICBpZiAodHlwZW9mIHN0eWxlID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLmxvYWRDU1Moc3R5bGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3R5bGUuZm9yRWFjaChmdW5jdGlvbiAoX3N0eWxlKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMi5sb2FkQ1NTKF9zdHlsZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3Jlc29sdmUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNvbHZlKHBhdGgpIHtcbiAgICAgIGlmICh0aGlzLnBhdGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aCArIHBhdGg7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGF0aDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdnZW5lcmF0ZVVuaXF1ZUlkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2VuZXJhdGVVbmlxdWVJZCgpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICAgICAgcmV0dXJuICtuZXcgRGF0ZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3Byb2Nlc3NUYWdzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc1RhZ3ModGFncykge1xuICAgICAgdmFyIHRtcFRhZ3MgPSB0YWdzIHx8IHRoaXMudGFncztcbiAgICAgIHZhciByZXN1bHRUYWdzID0gJyc7XG4gICAgICBPYmplY3Qua2V5cyh0bXBUYWdzKS5mb3JFYWNoKGZ1bmN0aW9uICh0YWcpIHtcbiAgICAgICAgaWYgKHRtcFRhZ3NbdGFnXSkge1xuICAgICAgICAgIHRtcFRhZ3NbdGFnXSA9IGVuY29kZVVSSUNvbXBvbmVudCh0bXBUYWdzW3RhZ10pO1xuICAgICAgICAgIHJlc3VsdFRhZ3MgKz0gJyYnICsgdGFnICsgJz0nICsgdG1wVGFnc1t0YWddO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHJlc3VsdFRhZ3M7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnbGVhZFRhZ3NQcm9jZXNzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGVhZFRhZ3NQcm9jZXNzKHRhZ3MpIHtcbiAgICAgIHZhciB0bXBUYWdzID0gJyc7XG4gICAgICBPYmplY3Qua2V5cyh0YWdzKS5mb3JFYWNoKGZ1bmN0aW9uICh0YWcpIHtcbiAgICAgICAgaWYgKHRhZ3NbdGFnXSkge1xuICAgICAgICAgIHRtcFRhZ3MgKz0gdGFnc1t0YWddICsgJywnO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0bXBUYWdzLnNsaWNlKDAsIC0xKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdsaW5rT3BlbmVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGlua09wZW5lcih1cmwpIHtcbiAgICAgIHZhciB0bXBVcmwgPSB1cmw7XG4gICAgICBpZiAodHlwZW9mIHRtcFVybCAhPT0gJ3VuZGVmaW5lZCcgJiYgdG1wVXJsICE9PSAnJykge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY3QgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuY3QgIT09ICcnICYmIHRoaXMuY3QubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgdG1wVXJsID0gdGhpcy5jdCArIGVuY29kZVVSSUNvbXBvbmVudCh0bXBVcmwpO1xuICAgICAgICAgIHRoaXMudXJsID0gdG1wVXJsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBtcmFpZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBtcmFpZC5vcGVuKHRtcFVybCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2luZG93Lm9wZW4odG1wVXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5jdGUgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuY3RlICE9PSAnJykge1xuICAgICAgICAgIHRoaXMuaW1hZ2VUcmFja2VyKHRoaXMuY3RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3RyYWNrZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0cmFja2VyKHR0LCB0eXBlLCBuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciB0bXBOYW1lID0gdHlwZS5uYW1lIHx8IG5hbWUgfHwgdHlwZTtcbiAgICAgIHZhciB0bXBWYWx1ZSA9IHZhbHVlO1xuXG4gICAgICBpZiAodHQgPT09ICdFJyAmJiAhdGhpcy5mZXRUcmFja2VkICYmIHRoaXMuZmV0KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5mZXQubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgIHQuc3JjID0gZGVjb2RlVVJJQ29tcG9uZW50KHRoaXMuZmV0W2ldKTtcblxuICAgICAgICAgIHQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICB0aGlzLmJvZHkuYXBwZW5kQ2hpbGQodCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mZXRUcmFja2VkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmN1c3RUcmFja2VyICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLmN1c3RUcmFja2VyICE9PSAnJyAmJiB0aGlzLnRyYWNrZWQuaW5kZXhPZih0bXBOYW1lKSA9PT0gLTEpIHtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHRoaXMuY3VzdFRyYWNrZXIubGVuZ3RoOyBfaSArPSAxKSB7XG4gICAgICAgICAgaWYgKF9pICE9PSAwICYmIHR5cGUuZXhjbHVkZSkgY29udGludWU7XG4gICAgICAgICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiB0bXBWYWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRtcFZhbHVlID0gJyc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHNyYyA9IHRoaXMuY3VzdFRyYWNrZXJbX2ldLnJlcGxhY2UoJ3t7cm1hdHlwZX19JywgdHlwZS5uYW1lIHx8IHR5cGUpO1xuICAgICAgICAgIHNyYyA9IHNyYy5yZXBsYWNlKCd7e3JtYXZhbHVlfX0nLCB0bXBWYWx1ZSk7XG5cbiAgICAgICAgICBpZiAodGhpcy50cmFja2VkRW5nYWdlbWVudFR5cGUuaW5kZXhPZih0dCkgIT09IC0xXG4gICAgICAgICAgICB8fCB0aGlzLmVuZ2FnZW1lbnRUeXBlRXhjbHVkZS5pbmRleE9mKHR0KSAhPT0gLTEgfHwgdHQgPT0gJycpIHtcbiAgICAgICAgICAgIHNyYyA9IHNyYy5yZXBsYWNlKCd0dD17e3JtYXR0fX0nLCAnJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNyYyA9IHNyYy5yZXBsYWNlKCd7e3JtYXR0fX0nLCB0dCk7XG4gICAgICAgICAgICB0aGlzLnRyYWNrZWRFbmdhZ2VtZW50VHlwZS5wdXNoKHR0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXRoaXMuZmlyc3RFbmdhZ2VtZW50VHJhY2tlZCAmJiB0dCA9PT0gJ0UnICYmIHR5cGUgIT09ICd0aWx0X2xhbmRzY2FwZScpIHtcbiAgICAgICAgICAgIHNyYyArPSAnJnR5PUUnO1xuICAgICAgICAgICAgdGhpcy5maXJzdEVuZ2FnZW1lbnRUcmFja2VkID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodHlwZSA9PSAneXRfcGxheScgfHwgdHlwZSA9PSAndmlkZW9fcGxheScpIHtcbiAgICAgICAgICAgIHNyYyArPSAnJnR2PVZQJ1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAneXRfcGxheV8xMDAnIHx8IHR5cGUgPT0gJ3ZpZGVvX3BsYXlfMTAwJykge1xuICAgICAgICAgICAgc3JjICs9ICcmdHY9VkMnXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHRhZ3MgPSBPYmplY3Qua2V5cyh0aGlzLnRhZ3MpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMzLnRhZ3Nba2V5XTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGltZy5zcmMgPSBzcmMgKyB0aGlzLnRhZ3MgKyAnJicgKyB0aGlzLmlkO1xuXG4gICAgICAgICAgaW1nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgdGhpcy5ib2R5LmFwcGVuZENoaWxkKGltZyk7XG5cbiAgICAgICAgICB0aGlzLnRyYWNrZWQucHVzaCh0bXBOYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2ltYWdlVHJhY2tlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGltYWdlVHJhY2tlcih1cmwpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdXJsLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgIHQuc3JjID0gdXJsW2ldO1xuXG4gICAgICAgIHQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgdGhpcy5ib2R5LmFwcGVuZENoaWxkKHQpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2xvYWRKUycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRKUyh1cmwpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgICBzY3JpcHQuc3JjID0gdXJsO1xuICAgICAgICAgIF90aGlzNC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2VuZXJhdGVTaG9ydFVybCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlU2hvcnRVcmwodXJsKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgaWYgKF90aGlzNS5zaG9ydFVybCkge1xuICAgICAgICAgIHJlc29sdmUoSlNPTi5zdHJpbmdpZnkoeyBpZDogX3RoaXM1LnNob3J0VXJsIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyLm9wZW4oJ1BPU1QnLCAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vdXJsc2hvcnRlbmVyL3YxL3VybD9rZXk9JyArIF90aGlzNS5nb29nbGVBcGlLZXkpO1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ2NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQgJiYgeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KHsgbG9uZ1VybDogdXJsIH0pKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdsb2FkQ1NTJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZENTUyh1cmwpIHtcbiAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh1cmwuaW5kZXhPZignaHR0cCcpID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICAgICAgICAgIGxpbmsuaHJlZiA9IHVybDtcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvY3NzJyk7XG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgncmVsJywgJ3N0eWxlc2hlZXQnKTtcbiAgICAgICAgICAgIF90aGlzNi5oZWFkLmFwcGVuZENoaWxkKGxpbmspO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgY3NzVGV4dCA9IHVybC5yZXBsYWNlKC8oPGJyPil8KFxcbil8KCAgICAgICkvZ20sICcnKTtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgICBzdHlsZS5pbm5lclRleHQgPSBjc3NUZXh0O1xuICAgICAgICAgICAgX3RoaXM2LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBNYWRzO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBNYWRzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYWRzLWN1c3RvbS9saWIvbWFkcy5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* global window */\n\nvar getParameterByName = function getParameterByName(name, url) {\n  var tmpUrl = url;\n  var tmpName = name;\n  if (!tmpUrl) tmpUrl = window.location.href;\n  tmpName = tmpName.replace(/[[\\]]/g, '\\\\$&');\n  var regex = new RegExp('[?&]' + tmpName + '(=([^&#]*)|&|#|$)');\n  var results = regex.exec(tmpUrl);\n  if (!results) return null;\n  if (!results[2]) return '';\n  try {\n    return JSON.parse(decodeURIComponent(results[2].replace(/\\+/g, ' ')));\n  } catch (e) {\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n  }\n};\n\nexports.default = null;\nexports.getParameterByName = getParameterByName;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L21hZHMtY3VzdG9tL2xpYi91dGlscy5qcz8yODcyIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbi8qIGdsb2JhbCB3aW5kb3cgKi9cblxudmFyIGdldFBhcmFtZXRlckJ5TmFtZSA9IGZ1bmN0aW9uIGdldFBhcmFtZXRlckJ5TmFtZShuYW1lLCB1cmwpIHtcbiAgdmFyIHRtcFVybCA9IHVybDtcbiAgdmFyIHRtcE5hbWUgPSBuYW1lO1xuICBpZiAoIXRtcFVybCkgdG1wVXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIHRtcE5hbWUgPSB0bXBOYW1lLnJlcGxhY2UoL1tbXFxdXS9nLCAnXFxcXCQmJyk7XG4gIHZhciByZWdleCA9IG5ldyBSZWdFeHAoJ1s/Jl0nICsgdG1wTmFtZSArICcoPShbXiYjXSopfCZ8I3wkKScpO1xuICB2YXIgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModG1wVXJsKTtcbiAgaWYgKCFyZXN1bHRzKSByZXR1cm4gbnVsbDtcbiAgaWYgKCFyZXN1bHRzWzJdKSByZXR1cm4gJyc7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXFwrL2csICcgJykpKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XG4gIH1cbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IG51bGw7XG5leHBvcnRzLmdldFBhcmFtZXRlckJ5TmFtZSA9IGdldFBhcmFtZXRlckJ5TmFtZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWFkcy1jdXN0b20vbGliL3V0aWxzLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///10\n")},function(module,exports,__webpack_require__){eval('/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === "undefined") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === "undefined") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = __webpack_require__(12);\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== "undefined" && DEBUG) {\n\t\tif (typeof document !== "object") throw new Error("The style-loader cannot be used in a non-browser environment");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === "object" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = "head";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = "bottom";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error("Couldn\'t find a style target. This probably means that the value for the \'insertInto\' parameter is invalid.");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === "top") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === "bottom") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error("Invalid value for parameter \'insertAt\'. Must be \'top\' or \'bottom\'.");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement("style");\n\n\toptions.attrs.type = "text/css";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement("link");\n\n\toptions.attrs.type = "text/css";\n\toptions.attrs.rel = "stylesheet";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don\'t add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === "function" &&\n\t\ttypeof URL.createObjectURL === "function" &&\n\t\ttypeof URL.revokeObjectURL === "function" &&\n\t\ttypeof Blob === "function" &&\n\t\ttypeof btoa === "function"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join(\'\\n\');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? "" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute("media", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn\'t defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += "\\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + " */";\n\t}\n\n\tvar blob = new Blob([css], { type: "text/css" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzP2I3ODEiXSwic291cmNlc0NvbnRlbnQiOlsiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cblxudmFyIHN0eWxlc0luRG9tID0ge307XG5cbnZhclx0bWVtb2l6ZSA9IGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbztcblxuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0cmV0dXJuIG1lbW87XG5cdH07XG59O1xuXG52YXIgaXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuXHQvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuXHQvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG5cdC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcblx0Ly8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG5cdC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuXHRyZXR1cm4gd2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2I7XG59KTtcblxudmFyIGdldEVsZW1lbnQgPSAoZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vID0ge307XG5cblx0cmV0dXJuIGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG5cdFx0aWYgKHR5cGVvZiBtZW1vW3NlbGVjdG9yXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0bWVtb1tzZWxlY3Rvcl0gPSBmbi5jYWxsKHRoaXMsIHNlbGVjdG9yKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbWVtb1tzZWxlY3Rvcl1cblx0fTtcbn0pKGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0cmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KVxufSk7XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyXHRzaW5nbGV0b25Db3VudGVyID0gMDtcbnZhclx0c3R5bGVzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG52YXJcdGZpeFVybHMgPSByZXF1aXJlKFwiLi91cmxzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYgKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xuXHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdG9wdGlvbnMuYXR0cnMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRycyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMuYXR0cnMgOiB7fTtcblxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAoIW9wdGlvbnMuc2luZ2xldG9uKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSA8aGVhZD4gZWxlbWVudFxuXHRpZiAoIW9wdGlvbnMuaW5zZXJ0SW50bykgb3B0aW9ucy5pbnNlcnRJbnRvID0gXCJoZWFkXCI7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIHRoZSB0YXJnZXRcblx0aWYgKCFvcHRpb25zLmluc2VydEF0KSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcblxuXHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpO1xuXG5cdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSAobmV3TGlzdCkge1xuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0fVxuXG5cdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0LCBvcHRpb25zKTtcblx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblxuXHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSBkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXG5cdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufTtcblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20gKHN0eWxlcywgb3B0aW9ucykge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHBhcnRzID0gW107XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXG5cdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzIChsaXN0LCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZXMgPSBbXTtcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcblx0XHR2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcblx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcblxuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKSBzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xuXHRcdGVsc2UgbmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHR9XG5cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50IChvcHRpb25zLCBzdHlsZSkge1xuXHR2YXIgdGFyZ2V0ID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8pXG5cblx0aWYgKCF0YXJnZXQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydEludG8nIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcblx0fVxuXG5cdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlc0luc2VydGVkQXRUb3Bbc3R5bGVzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblxuXHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdGlmICghbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIHRhcmdldC5maXJzdENoaWxkKTtcblx0XHR9IGVsc2UgaWYgKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdFx0fVxuXHRcdHN0eWxlc0luc2VydGVkQXRUb3AucHVzaChzdHlsZSk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcuIE11c3QgYmUgJ3RvcCcgb3IgJ2JvdHRvbScuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudCAoc3R5bGUpIHtcblx0aWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblx0c3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG5cblx0dmFyIGlkeCA9IHN0eWxlc0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZSk7XG5cdGlmKGlkeCA+PSAwKSB7XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG5cdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblxuXHRhZGRBdHRycyhzdHlsZSwgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZSk7XG5cblx0cmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXG5cdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0b3B0aW9ucy5hdHRycy5yZWwgPSBcInN0eWxlc2hlZXRcIjtcblxuXHRhZGRBdHRycyhsaW5rLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmspO1xuXG5cdHJldHVybiBsaW5rO1xufVxuXG5mdW5jdGlvbiBhZGRBdHRycyAoZWwsIGF0dHJzKSB7XG5cdE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRlbC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyc1trZXldKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlIChvYmosIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlLCB1cGRhdGUsIHJlbW92ZSwgcmVzdWx0O1xuXG5cdC8vIElmIGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHdhcyBkZWZpbmVkLCBydW4gaXQgb24gdGhlIGNzc1xuXHRpZiAob3B0aW9ucy50cmFuc2Zvcm0gJiYgb2JqLmNzcykge1xuXHQgICAgcmVzdWx0ID0gb3B0aW9ucy50cmFuc2Zvcm0ob2JqLmNzcyk7XG5cblx0ICAgIGlmIChyZXN1bHQpIHtcblx0ICAgIFx0Ly8gSWYgdHJhbnNmb3JtIHJldHVybnMgYSB2YWx1ZSwgdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgb3JpZ2luYWwgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBydW5uaW5nIHJ1bnRpbWUgdHJhbnNmb3JtYXRpb25zIG9uIHRoZSBjc3MuXG5cdCAgICBcdG9iai5jc3MgPSByZXN1bHQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgXHQvLyBJZiB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHJldHVybnMgYSBmYWxzeSB2YWx1ZSwgZG9uJ3QgYWRkIHRoaXMgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBjb25kaXRpb25hbCBsb2FkaW5nIG9mIGNzc1xuXHQgICAgXHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0Ly8gbm9vcFxuXHQgICAgXHR9O1xuXHQgICAgfVxuXHR9XG5cblx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cblx0XHRzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cblx0fSBlbHNlIGlmIChcblx0XHRvYmouc291cmNlTWFwICYmXG5cdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIlxuXHQpIHtcblx0XHRzdHlsZSA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblxuXHRcdFx0aWYoc3R5bGUuaHJlZikgVVJMLnJldm9rZU9iamVjdFVSTChzdHlsZS5ocmVmKTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdHN0eWxlID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlIChuZXdPYmopIHtcblx0XHRpZiAobmV3T2JqKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdG5ld09iai5jc3MgPT09IG9iai5jc3MgJiZcblx0XHRcdFx0bmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiZcblx0XHRcdFx0bmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcFxuXHRcdFx0KSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZSgpO1xuXHRcdH1cblx0fTtcbn1cblxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuXG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnIChzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cblx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblxuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcgKHN0eWxlLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcblxuXHRpZihtZWRpYSkge1xuXHRcdHN0eWxlLnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxuXHR9XG5cblx0aWYoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0fSBlbHNlIHtcblx0XHR3aGlsZShzdHlsZS5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcblx0XHR9XG5cblx0XHRzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcblx0fVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMaW5rIChsaW5rLCBvcHRpb25zLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG5cdC8qXG5cdFx0SWYgY29udmVydFRvQWJzb2x1dGVVcmxzIGlzbid0IGRlZmluZWQsIGJ1dCBzb3VyY2VtYXBzIGFyZSBlbmFibGVkXG5cdFx0YW5kIHRoZXJlIGlzIG5vIHB1YmxpY1BhdGggZGVmaW5lZCB0aGVuIGxldHMgdHVybiBjb252ZXJ0VG9BYnNvbHV0ZVVybHNcblx0XHRvbiBieSBkZWZhdWx0LiAgT3RoZXJ3aXNlIGRlZmF1bHQgdG8gdGhlIGNvbnZlcnRUb0Fic29sdXRlVXJscyBvcHRpb25cblx0XHRkaXJlY3RseVxuXHQqL1xuXHR2YXIgYXV0b0ZpeFVybHMgPSBvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyA9PT0gdW5kZWZpbmVkICYmIHNvdXJjZU1hcDtcblxuXHRpZiAob3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgfHwgYXV0b0ZpeFVybHMpIHtcblx0XHRjc3MgPSBmaXhVcmxzKGNzcyk7XG5cdH1cblxuXHRpZiAoc291cmNlTWFwKSB7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblxuXHR2YXIgb2xkU3JjID0gbGluay5ocmVmO1xuXG5cdGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cblx0aWYob2xkU3JjKSBVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///11\n')},function(module,exports){eval('\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function "fixes" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== "undefined" && window.location;\n\n  if (!location) {\n    throw new Error("fixUrls requires window.location");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== "string") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + "//" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, "/");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word "url" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn\'t a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn\'t a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn\'t a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^"(.*)"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^\'(.*)\'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf("//") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf("/") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with \'/\'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, ""); // Strip leading \'./\'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn "url(" + JSON.stringify(newUrl) + ")";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L3N0eWxlLWxvYWRlci9saWIvdXJscy5qcz85YzMxIl0sInNvdXJjZXNDb250ZW50IjpbIlxuLyoqXG4gKiBXaGVuIHNvdXJjZSBtYXBzIGFyZSBlbmFibGVkLCBgc3R5bGUtbG9hZGVyYCB1c2VzIGEgbGluayBlbGVtZW50IHdpdGggYSBkYXRhLXVyaSB0b1xuICogZW1iZWQgdGhlIGNzcyBvbiB0aGUgcGFnZS4gVGhpcyBicmVha3MgYWxsIHJlbGF0aXZlIHVybHMgYmVjYXVzZSBub3cgdGhleSBhcmUgcmVsYXRpdmUgdG8gYVxuICogYnVuZGxlIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgcGFnZS5cbiAqXG4gKiBPbmUgc29sdXRpb24gaXMgdG8gb25seSB1c2UgZnVsbCB1cmxzLCBidXQgdGhhdCBtYXkgYmUgaW1wb3NzaWJsZS5cbiAqXG4gKiBJbnN0ZWFkLCB0aGlzIGZ1bmN0aW9uIFwiZml4ZXNcIiB0aGUgcmVsYXRpdmUgdXJscyB0byBiZSBhYnNvbHV0ZSBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgcGFnZSBsb2NhdGlvbi5cbiAqXG4gKiBBIHJ1ZGltZW50YXJ5IHRlc3Qgc3VpdGUgaXMgbG9jYXRlZCBhdCBgdGVzdC9maXhVcmxzLmpzYCBhbmQgY2FuIGJlIHJ1biB2aWEgdGhlIGBucG0gdGVzdGAgY29tbWFuZC5cbiAqXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzKSB7XG4gIC8vIGdldCBjdXJyZW50IGxvY2F0aW9uXG4gIHZhciBsb2NhdGlvbiA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uO1xuXG4gIGlmICghbG9jYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmaXhVcmxzIHJlcXVpcmVzIHdpbmRvdy5sb2NhdGlvblwiKTtcbiAgfVxuXG5cdC8vIGJsYW5rIG9yIG51bGw/XG5cdGlmICghY3NzIHx8IHR5cGVvZiBjc3MgIT09IFwic3RyaW5nXCIpIHtcblx0ICByZXR1cm4gY3NzO1xuICB9XG5cbiAgdmFyIGJhc2VVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3Q7XG4gIHZhciBjdXJyZW50RGlyID0gYmFzZVVybCArIGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1xcL1teXFwvXSokLywgXCIvXCIpO1xuXG5cdC8vIGNvbnZlcnQgZWFjaCB1cmwoLi4uKVxuXHQvKlxuXHRUaGlzIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBqdXN0IGEgd2F5IHRvIHJlY3Vyc2l2ZWx5IG1hdGNoIGJyYWNrZXRzIHdpdGhpblxuXHRhIHN0cmluZy5cblxuXHQgL3VybFxccypcXCggID0gTWF0Y2ggb24gdGhlIHdvcmQgXCJ1cmxcIiB3aXRoIGFueSB3aGl0ZXNwYWNlIGFmdGVyIGl0IGFuZCB0aGVuIGEgcGFyZW5zXG5cdCAgICggID0gU3RhcnQgYSBjYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAoPzogID0gU3RhcnQgYSBub24tY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgICAgIFteKShdICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAoPzogID0gU3RhcnQgYW5vdGhlciBub24tY2FwdHVyaW5nIGdyb3Vwc1xuXHQgICAgICAgICAgICAgICAgIFteKShdKyAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICAgICAgW14pKF0qICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIFxcKSAgPSBNYXRjaCBhIGVuZCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKSAgPSBFbmQgR3JvdXBcbiAgICAgICAgICAgICAgKlxcKSA9IE1hdGNoIGFueXRoaW5nIGFuZCB0aGVuIGEgY2xvc2UgcGFyZW5zXG4gICAgICAgICAgKSAgPSBDbG9zZSBub24tY2FwdHVyaW5nIGdyb3VwXG4gICAgICAgICAgKiAgPSBNYXRjaCBhbnl0aGluZ1xuICAgICAgICkgID0gQ2xvc2UgY2FwdHVyaW5nIGdyb3VwXG5cdCBcXCkgID0gTWF0Y2ggYSBjbG9zZSBwYXJlbnNcblxuXHQgL2dpICA9IEdldCBhbGwgbWF0Y2hlcywgbm90IHRoZSBmaXJzdC4gIEJlIGNhc2UgaW5zZW5zaXRpdmUuXG5cdCAqL1xuXHR2YXIgZml4ZWRDc3MgPSBjc3MucmVwbGFjZSgvdXJsXFxzKlxcKCgoPzpbXikoXXxcXCgoPzpbXikoXSt8XFwoW14pKF0qXFwpKSpcXCkpKilcXCkvZ2ksIGZ1bmN0aW9uKGZ1bGxNYXRjaCwgb3JpZ1VybCkge1xuXHRcdC8vIHN0cmlwIHF1b3RlcyAoaWYgdGhleSBleGlzdClcblx0XHR2YXIgdW5xdW90ZWRPcmlnVXJsID0gb3JpZ1VybFxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL15cIiguKilcIiQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSlcblx0XHRcdC5yZXBsYWNlKC9eJyguKiknJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KTtcblxuXHRcdC8vIGFscmVhZHkgYSBmdWxsIHVybD8gbm8gY2hhbmdlXG5cdFx0aWYgKC9eKCN8ZGF0YTp8aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvfGZpbGU6XFwvXFwvXFwvKS9pLnRlc3QodW5xdW90ZWRPcmlnVXJsKSkge1xuXHRcdCAgcmV0dXJuIGZ1bGxNYXRjaDtcblx0XHR9XG5cblx0XHQvLyBjb252ZXJ0IHRoZSB1cmwgdG8gYSBmdWxsIHVybFxuXHRcdHZhciBuZXdVcmw7XG5cblx0XHRpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvL1wiKSA9PT0gMCkge1xuXHRcdCAgXHQvL1RPRE86IHNob3VsZCB3ZSBhZGQgcHJvdG9jb2w/XG5cdFx0XHRuZXdVcmwgPSB1bnF1b3RlZE9yaWdVcmw7XG5cdFx0fSBlbHNlIGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi9cIikgPT09IDApIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBiYXNlIHVybFxuXHRcdFx0bmV3VXJsID0gYmFzZVVybCArIHVucXVvdGVkT3JpZ1VybDsgLy8gYWxyZWFkeSBzdGFydHMgd2l0aCAnLydcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gY3VycmVudCBkaXJlY3Rvcnlcblx0XHRcdG5ld1VybCA9IGN1cnJlbnREaXIgKyB1bnF1b3RlZE9yaWdVcmwucmVwbGFjZSgvXlxcLlxcLy8sIFwiXCIpOyAvLyBTdHJpcCBsZWFkaW5nICcuLydcblx0XHR9XG5cblx0XHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIHVybCguLi4pXG5cdFx0cmV0dXJuIFwidXJsKFwiICsgSlNPTi5zdHJpbmdpZnkobmV3VXJsKSArIFwiKVwiO1xuXHR9KTtcblxuXHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIGNzc1xuXHRyZXR1cm4gZml4ZWRDc3M7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3N0eWxlLWxvYWRlci9saWIvdXJscy5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///12\n')}]);